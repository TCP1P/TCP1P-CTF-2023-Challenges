/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var e={467:(e,t,r)=>{"use strict";var n=r(8764).Buffer,i=function(){function e(){}return e.decodeLength=function(e){return parseInt(e,16)},e.encodeLength=function(e){return("0000"+e.toString(16)).slice(-4).toUpperCase()},e.encodeData=function(t){return n.isBuffer(t)||(t=new n(t)),n.concat([new n(e.encodeLength(t.length)),t])},e.OKAY="OKAY",e.FAIL="FAIL",e.STAT="STAT",e.LIST="LIST",e.DENT="DENT",e.RECV="RECV",e.DATA="DATA",e.DONE="DONE",e.SEND="SEND",e.QUIT="QUIT",e}();e.exports=i},9742:(e,t)=>{"use strict";t.byteLength=function(e){var t=u(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){var t,r,o=u(e),a=o[0],s=o[1],c=new i(function(e,t,r){return 3*(t+r)/4-r}(0,a,s)),l=0,d=s>0?a-4:a;for(r=0;r<d;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],c[l++]=t>>16&255,c[l++]=t>>8&255,c[l++]=255&t;return 2===s&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,c[l++]=255&t),1===s&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,c[l++]=t>>8&255,c[l++]=255&t),c},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],a=16383,s=0,u=n-i;s<u;s+=a)o.push(c(e,s,s+a>u?u:s+a));return 1===i?(t=e[n-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),o.join("")};for(var r=[],n=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,s=o.length;a<s;++a)r[a]=o[a],n[o.charCodeAt(a)]=a;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function c(e,t,n){for(var i,o,a=[],s=t;s<n;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return a.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},8764:(e,t,r)=>{"use strict";const n=r(9742),i=r(645),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=u,t.SlowBuffer=function(e){return+e!=e&&(e=0),u.alloc(+e)},t.INSPECT_MAX_BYTES=50;const a=2147483647;function s(e){if(e>a)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,u.prototype),t}function u(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return d(e)}return c(e,t,r)}function c(e,t,r){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!u.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const r=0|m(e,t);let n=s(r);const i=n.write(e,t);return i!==r&&(n=n.slice(0,i)),n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(X(e,Uint8Array)){const t=new Uint8Array(e);return h(t.buffer,t.byteOffset,t.byteLength)}return f(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(X(e,ArrayBuffer)||e&&X(e.buffer,ArrayBuffer))return h(e,t,r);if("undefined"!=typeof SharedArrayBuffer&&(X(e,SharedArrayBuffer)||e&&X(e.buffer,SharedArrayBuffer)))return h(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return u.from(n,t,r);const i=function(e){if(u.isBuffer(e)){const t=0|p(e.length),r=s(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!=typeof e.length||Q(e.length)?s(0):f(e):"Buffer"===e.type&&Array.isArray(e.data)?f(e.data):void 0}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return u.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function d(e){return l(e),s(e<0?0:0|p(e))}function f(e){const t=e.length<0?0:0|p(e.length),r=s(t);for(let n=0;n<t;n+=1)r[n]=255&e[n];return r}function h(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(n,u.prototype),n}function p(e){if(e>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|e}function m(e,t){if(u.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||X(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return j(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return z(e).length;default:if(i)return n?-1:j(e).length;t=(""+t).toLowerCase(),i=!0}}function v(e,t,r){let n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return P(this,t,r);case"utf8":case"utf-8":return O(this,t,r);case"ascii":return D(this,t,r);case"latin1":case"binary":return A(this,t,r);case"base64":return w(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function E(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function y(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),Q(r=+r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=u.from(t,n)),u.isBuffer(t))return 0===t.length?-1:g(e,t,r,n,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):g(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function g(e,t,r,n,i){let o,a=1,s=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;a=2,s/=2,u/=2,r/=2}function c(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){let n=-1;for(o=r;o<s;o++)if(c(e,o)===c(t,-1===n?0:o-n)){if(-1===n&&(n=o),o-n+1===u)return n*a}else-1!==n&&(o-=o-n),n=-1}else for(r+u>s&&(r=s-u),o=r;o>=0;o--){let r=!0;for(let n=0;n<u;n++)if(c(e,o+n)!==c(t,n)){r=!1;break}if(r)return o}return-1}function _(e,t,r,n){r=Number(r)||0;const i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;const o=t.length;let a;for(n>o/2&&(n=o/2),a=0;a<n;++a){const n=parseInt(t.substr(2*a,2),16);if(Q(n))return a;e[r+a]=n}return a}function S(e,t,r,n){return q(j(t,e.length-r),e,r,n)}function C(e,t,r,n){return q(function(e){const t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function T(e,t,r,n){return q(z(t),e,r,n)}function b(e,t,r,n){return q(function(e,t){let r,n,i;const o=[];for(let a=0;a<e.length&&!((t-=2)<0);++a)r=e.charCodeAt(a),n=r>>8,i=r%256,o.push(i),o.push(n);return o}(t,e.length-r),e,r,n)}function w(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function O(e,t,r){r=Math.min(e.length,r);const n=[];let i=t;for(;i<r;){const t=e[i];let o=null,a=t>239?4:t>223?3:t>191?2:1;if(i+a<=r){let r,n,s,u;switch(a){case 1:t<128&&(o=t);break;case 2:r=e[i+1],128==(192&r)&&(u=(31&t)<<6|63&r,u>127&&(o=u));break;case 3:r=e[i+1],n=e[i+2],128==(192&r)&&128==(192&n)&&(u=(15&t)<<12|(63&r)<<6|63&n,u>2047&&(u<55296||u>57343)&&(o=u));break;case 4:r=e[i+1],n=e[i+2],s=e[i+3],128==(192&r)&&128==(192&n)&&128==(192&s)&&(u=(15&t)<<18|(63&r)<<12|(63&n)<<6|63&s,u>65535&&u<1114112&&(o=u))}}null===o?(o=65533,a=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),i+=a}return function(e){const t=e.length;if(t<=I)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=I));return r}(n)}t.kMaxLength=a,u.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),u.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),u.poolSize=8192,u.from=function(e,t,r){return c(e,t,r)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array),u.alloc=function(e,t,r){return function(e,t,r){return l(e),e<=0?s(e):void 0!==t?"string"==typeof r?s(e).fill(t,r):s(e).fill(t):s(e)}(e,t,r)},u.allocUnsafe=function(e){return d(e)},u.allocUnsafeSlow=function(e){return d(e)},u.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==u.prototype},u.compare=function(e,t){if(X(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),X(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,n=t.length;for(let i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);let r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;const n=u.allocUnsafe(t);let i=0;for(r=0;r<e.length;++r){let t=e[r];if(X(t,Uint8Array))i+t.length>n.length?(u.isBuffer(t)||(t=u.from(t)),t.copy(n,i)):Uint8Array.prototype.set.call(n,t,i);else{if(!u.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(n,i)}i+=t.length}return n},u.byteLength=m,u.prototype._isBuffer=!0,u.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)E(this,t,t+1);return this},u.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)E(this,t,t+3),E(this,t+1,t+2);return this},u.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)E(this,t,t+7),E(this,t+1,t+6),E(this,t+2,t+5),E(this,t+3,t+4);return this},u.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?O(this,0,e):v.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){let e="";const r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},o&&(u.prototype[o]=u.prototype.inspect),u.prototype.compare=function(e,t,r,n,i){if(X(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),!u.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(this===e)return 0;let o=(i>>>=0)-(n>>>=0),a=(r>>>=0)-(t>>>=0);const s=Math.min(o,a),c=this.slice(n,i),l=e.slice(t,r);for(let e=0;e<s;++e)if(c[e]!==l[e]){o=c[e],a=l[e];break}return o<a?-1:a<o?1:0},u.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},u.prototype.indexOf=function(e,t,r){return y(this,e,t,r,!0)},u.prototype.lastIndexOf=function(e,t,r){return y(this,e,t,r,!1)},u.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let o=!1;for(;;)switch(n){case"hex":return _(this,e,t,r);case"utf8":case"utf-8":return S(this,e,t,r);case"ascii":case"latin1":case"binary":return C(this,e,t,r);case"base64":return T(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return b(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const I=4096;function D(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function A(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function P(e,t,r){const n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let i="";for(let n=t;n<r;++n)i+=$[e[n]];return i}function M(e,t,r){const n=e.slice(t,r);let i="";for(let e=0;e<n.length-1;e+=2)i+=String.fromCharCode(n[e]+256*n[e+1]);return i}function R(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function N(e,t,r,n,i,o){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function L(e,t,r,n,i){V(t,n,i,e,r,7);let o=Number(t&BigInt(4294967295));e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=a,a>>=8,e[r++]=a,a>>=8,e[r++]=a,a>>=8,e[r++]=a,r}function x(e,t,r,n,i){V(t,n,i,e,r,7);let o=Number(t&BigInt(4294967295));e[r+7]=o,o>>=8,e[r+6]=o,o>>=8,e[r+5]=o,o>>=8,e[r+4]=o;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=a,a>>=8,e[r+2]=a,a>>=8,e[r+1]=a,a>>=8,e[r]=a,r+8}function B(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function F(e,t,r,n,o){return t=+t,r>>>=0,o||B(e,0,r,4),i.write(e,t,r,n,23,4),r+4}function U(e,t,r,n,o){return t=+t,r>>>=0,o||B(e,0,r,8),i.write(e,t,r,n,52,8),r+8}u.prototype.slice=function(e,t){const r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);const n=this.subarray(e,t);return Object.setPrototypeOf(n,u.prototype),n},u.prototype.readUintLE=u.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||R(e,t,this.length);let n=this[e],i=1,o=0;for(;++o<t&&(i*=256);)n+=this[e+o]*i;return n},u.prototype.readUintBE=u.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||R(e,t,this.length);let n=this[e+--t],i=1;for(;t>0&&(i*=256);)n+=this[e+--t]*i;return n},u.prototype.readUint8=u.prototype.readUInt8=function(e,t){return e>>>=0,t||R(e,1,this.length),this[e]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(e,t){return e>>>=0,t||R(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(e,t){return e>>>=0,t||R(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(e,t){return e>>>=0,t||R(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(e,t){return e>>>=0,t||R(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readBigUInt64LE=Z((function(e){H(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||G(e,this.length-8);const n=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,i=this[++e]+256*this[++e]+65536*this[++e]+r*2**24;return BigInt(n)+(BigInt(i)<<BigInt(32))})),u.prototype.readBigUInt64BE=Z((function(e){H(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||G(e,this.length-8);const n=t*2**24+65536*this[++e]+256*this[++e]+this[++e],i=this[++e]*2**24+65536*this[++e]+256*this[++e]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)})),u.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||R(e,t,this.length);let n=this[e],i=1,o=0;for(;++o<t&&(i*=256);)n+=this[e+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*t)),n},u.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||R(e,t,this.length);let n=t,i=1,o=this[e+--n];for(;n>0&&(i*=256);)o+=this[e+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},u.prototype.readInt8=function(e,t){return e>>>=0,t||R(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){e>>>=0,t||R(e,2,this.length);const r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(e,t){e>>>=0,t||R(e,2,this.length);const r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(e,t){return e>>>=0,t||R(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return e>>>=0,t||R(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readBigInt64LE=Z((function(e){H(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||G(e,this.length-8);const n=this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),u.prototype.readBigInt64BE=Z((function(e){H(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||G(e,this.length-8);const n=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(n)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+r)})),u.prototype.readFloatLE=function(e,t){return e>>>=0,t||R(e,4,this.length),i.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return e>>>=0,t||R(e,4,this.length),i.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return e>>>=0,t||R(e,8,this.length),i.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return e>>>=0,t||R(e,8,this.length),i.read(this,e,!1,52,8)},u.prototype.writeUintLE=u.prototype.writeUIntLE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||N(this,e,t,r,Math.pow(2,8*r)-1,0);let i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||N(this,e,t,r,Math.pow(2,8*r)-1,0);let i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},u.prototype.writeUint8=u.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||N(this,e,t,1,255,0),this[t]=255&e,t+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||N(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||N(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||N(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||N(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeBigUInt64LE=Z((function(e,t=0){return L(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),u.prototype.writeBigUInt64BE=Z((function(e,t=0){return x(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),u.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);N(this,e,t,r,n-1,-n)}let i=0,o=1,a=0;for(this[t]=255&e;++i<r&&(o*=256);)e<0&&0===a&&0!==this[t+i-1]&&(a=1),this[t+i]=(e/o>>0)-a&255;return t+r},u.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);N(this,e,t,r,n-1,-n)}let i=r-1,o=1,a=0;for(this[t+i]=255&e;--i>=0&&(o*=256);)e<0&&0===a&&0!==this[t+i+1]&&(a=1),this[t+i]=(e/o>>0)-a&255;return t+r},u.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||N(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||N(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||N(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||N(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},u.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||N(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeBigInt64LE=Z((function(e,t=0){return L(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),u.prototype.writeBigInt64BE=Z((function(e,t=0){return x(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),u.prototype.writeFloatLE=function(e,t,r){return F(this,e,t,!0,r)},u.prototype.writeFloatBE=function(e,t,r){return F(this,e,t,!1,r)},u.prototype.writeDoubleLE=function(e,t,r){return U(this,e,t,!0,r)},u.prototype.writeDoubleBE=function(e,t,r){return U(this,e,t,!1,r)},u.prototype.copy=function(e,t,r,n){if(!u.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);const i=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),i},u.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){const t=e.charCodeAt(0);("utf8"===n&&t<128||"latin1"===n)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;let i;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{const o=u.isBuffer(e)?e:u.from(e,n),a=o.length;if(0===a)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=o[i%a]}return this};const k={};function K(e,t,r){k[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function Y(e){let t="",r=e.length;const n="-"===e[0]?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function V(e,t,r,n,i,o){if(e>r||e<t){const n="bigint"==typeof t?"n":"";let i;throw i=o>3?0===t||t===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(o+1)}${n}`:`>= -(2${n} ** ${8*(o+1)-1}${n}) and < 2 ** ${8*(o+1)-1}${n}`:`>= ${t}${n} and <= ${r}${n}`,new k.ERR_OUT_OF_RANGE("value",i,e)}!function(e,t,r){H(t,"offset"),void 0!==e[t]&&void 0!==e[t+r]||G(t,e.length-(r+1))}(n,i,o)}function H(e,t){if("number"!=typeof e)throw new k.ERR_INVALID_ARG_TYPE(t,"number",e)}function G(e,t,r){if(Math.floor(e)!==e)throw H(e,r),new k.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new k.ERR_BUFFER_OUT_OF_BOUNDS;throw new k.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${t}`,e)}K("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),K("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),K("ERR_OUT_OF_RANGE",(function(e,t,r){let n=`The value of "${e}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=Y(String(r)):"bigint"==typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=Y(i)),i+="n"),n+=` It must be ${t}. Received ${i}`,n}),RangeError);const W=/[^+/0-9A-Za-z-_]/g;function j(e,t){let r;t=t||1/0;const n=e.length;let i=null;const o=[];for(let a=0;a<n;++a){if(r=e.charCodeAt(a),r>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function z(e){return n.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(W,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function q(e,t,r,n){let i;for(i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function X(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function Q(e){return e!=e}const $=function(){const e="0123456789abcdef",t=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let i=0;i<16;++i)t[n+i]=e[r]+e[i]}return t}();function Z(e){return"undefined"==typeof BigInt?J:e}function J(){throw new Error("BigInt not supported")}},7187:e=>{"use strict";var t,r="object"==typeof Reflect?Reflect:null,n=r&&"function"==typeof r.apply?r.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};t=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise((function(r,n){function i(r){e.removeListener(t,o),n(r)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",i),r([].slice.call(arguments))}m(e,t,o,{once:!0}),"error"!==t&&function(e,t,r){"function"==typeof e.on&&m(e,"error",t,{once:!0})}(e,i)}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var a=10;function s(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function u(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function c(e,t,r,n){var i,o,a,c;if(s(r),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),o=e._events),a=o[t]),void 0===a)a=o[t]=r,++e._eventsCount;else if("function"==typeof a?a=o[t]=n?[r,a]:[a,r]:n?a.unshift(r):a.push(r),(i=u(e))>0&&a.length>i&&!a.warned){a.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=a.length,c=l,console&&console.warn&&console.warn(c)}return e}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=l.bind(n);return i.listener=r,n.wrapFn=i,i}function f(e,t,r){var n=e._events;if(void 0===n)return[];var i=n[t];return void 0===i?[]:"function"==typeof i?r?[i.listener||i]:[i]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(i):p(i,i.length)}function h(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function p(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function m(e,t,r,n){if("function"==typeof e.on)n.once?e.once(t,r):e.on(t,r);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(o){n.once&&e.removeEventListener(t,i),r(o)}))}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");a=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return u(this)},o.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var i="error"===e,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var u=o[e];if(void 0===u)return!1;if("function"==typeof u)n(u,this,t);else{var c=u.length,l=p(u,c);for(r=0;r<c;++r)n(l[r],this,t)}return!0},o.prototype.addListener=function(e,t){return c(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return c(this,e,t,!0)},o.prototype.once=function(e,t){return s(t),this.on(e,d(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,d(this,e,t)),this},o.prototype.removeListener=function(e,t){var r,n,i,o,a;if(s(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===t||r[o].listener===t){a=r[o].listener,i=o;break}if(i<0)return this;0===i?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,i),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,a||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var i,o=Object.keys(r);for(n=0;n<o.length;++n)"removeListener"!==(i=o[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},o.prototype.listeners=function(e){return f(this,e,!0)},o.prototype.rawListeners=function(e){return f(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):h.call(e,t)},o.prototype.listenerCount=h,o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},5944:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});const n=r.p+"1279f368b5bb729ca7b35990042f9928.png"},4218:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});const n=r.p+"0adc36cf9cddfe4b6056c3ca47abaca0.png"},9503:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});const n=r.p+"avc.wasm"},8395:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1539),i=r(8949),o=r(1252),a=function(){function e(e){this.remuxer=e,this.track=e.mp4track}return e.prototype.parseSEI=function(t){for(var r=0,n=e.readSEI(t);r<n.length;r++)switch(n[r].type){case 0:this.track.seiBuffering=!0;break;case 5:return!0}return!1},e.prototype.parseSPS=function(t){var r=e.readSPS(t);this.track.width=r.width,this.track.height=r.height,this.track.sps=[t],this.track.codec="avc1.";for(var n=new DataView(t.buffer,t.byteOffset+1,4),i=0;i<3;++i){var o=n.getUint8(i).toString(16);o.length<2&&(o="0"+o),this.track.codec+=o}},e.prototype.parsePPS=function(e){this.track.pps=[e]},e.prototype.parseNAL=function(e){if(!e)return!1;var t=!1;switch(e.type()){case o.default.NDR:case o.default.IDR:t=!0;break;case o.default.SEI:t=this.parseSEI(e.getData().subarray(4));break;case o.default.SPS:this.parseSPS(e.getData().subarray(4)),i.log(" Found SPS type NALU frame."),!this.remuxer.readyToDecode&&this.track.pps.length>0&&this.track.sps.length>0&&(this.remuxer.readyToDecode=!0);break;case o.default.PPS:this.parsePPS(e.getData().subarray(4)),i.log(" Found PPS type NALU frame."),!this.remuxer.readyToDecode&&this.track.pps.length>0&&this.track.sps.length>0&&(this.remuxer.readyToDecode=!0);break;default:i.log(" Found Unknown type NALU frame. type="+e.type())}return t},e.skipScalingList=function(e,t){for(var r=8,n=8,i=0;i<t;i++)0!==n&&(n=(r+e.readEG()+256)%256),r=0===n?r:n},e.readSPS=function(e){var t=this.parseSPS(e),r=t.pic_width_in_mbs_minus1,n=t.frame_crop_left_offset,i=t.frame_crop_right_offset,o=t.frame_mbs_only_flag,a=t.pic_height_in_map_units_minus1,s=t.frame_crop_top_offset,u=t.frame_crop_bottom_offset,c=t.sar,l=c[0]/c[1];return{width:Math.ceil((16*(r+1)-2*n-2*i)*l),height:(2-o)*(a+1)*16-(o?2:4)*(s+u)}},e.parseSPS=function(t){var r=new n.default(t),o=0,a=0,s=0,u=0;r.readUByte();var c=r.readUByte(),l=r.readUByte(),d=r.readBits(8),f=r.readUEG();if(100===c||110===c||122===c||244===c||44===c||83===c||86===c||118===c||128===c||138===c||139===c||134===c){var h=r.readUEG();if(3===h&&r.skipBits(1),r.skipUEG(),r.skipUEG(),r.skipBits(1),r.readBoolean())for(var p=3!==h?8:12,m=0;m<p;++m)r.readBoolean()&&(m<6?e.skipScalingList(r,16):e.skipScalingList(r,64))}r.skipUEG();var v=r.readUEG();if(0===v)r.readUEG();else if(1===v){r.skipBits(1),r.skipEG(),r.skipEG();var E=r.readUEG();for(m=0;m<E;++m)r.skipEG()}r.skipUEG(),r.skipBits(1);var y=r.readUEG(),g=r.readUEG(),_=r.readBits(1);0===_&&r.skipBits(1),r.skipBits(1),r.readBoolean()&&(o=r.readUEG(),a=r.readUEG(),s=r.readUEG(),u=r.readUEG());var S=[1,1];if(r.readBoolean()){if(r.readBoolean()){var C=r.readUByte();switch(C){case 1:S=[1,1];break;case 2:S=[12,11];break;case 3:S=[10,11];break;case 4:S=[16,11];break;case 5:S=[40,33];break;case 6:S=[24,11];break;case 7:S=[20,11];break;case 8:S=[32,11];break;case 9:S=[80,33];break;case 10:S=[18,11];break;case 11:S=[15,11];break;case 12:S=[64,33];break;case 13:S=[160,99];break;case 14:S=[4,3];break;case 15:S=[3,2];break;case 16:S=[2,1];break;case 255:S=[r.readUByte()<<8|r.readUByte(),r.readUByte()<<8|r.readUByte()];break;default:i.error("  H264: Unknown aspectRatioIdc="+C)}}if(r.readBoolean()&&r.skipBits(1),r.readBoolean()&&(r.skipBits(4),r.readBoolean()&&r.skipBits(24)),r.readBoolean()&&(r.skipUEG(),r.skipUEG()),r.readBoolean())if(r.bitsAvailable>64){var T=r.readUInt(),b=r.readUInt(),w=r.readBoolean(),O=b/(2*T);i.log("timescale: "+b+"; unitsInTick: "+T+"; fixedFramerate: "+w+"; avgFrameDuration: "+O)}else i.log("Truncated VUI ("+r.bitsAvailable+")")}return{profile_idc:c,constraint_set_flags:l,level_idc:d,seq_parameter_set_id:f,pic_width_in_mbs_minus1:y,pic_height_in_map_units_minus1:g,frame_mbs_only_flag:_,frame_crop_left_offset:o,frame_crop_right_offset:a,frame_crop_top_offset:s,frame_crop_bottom_offset:u,sar:S}},e.readSEI=function(e){var t=new n.default(e);t.skipBits(8);for(var r=[];t.bitsAvailable>24;)r.push(this.readSEIMessage(t));return r},e.readSEIMessage=function(e){function t(){for(var t=0;;){var r=e.readUByte();if(t+=r,255!==r)break}return t}var r=t(),n=t();return this.readSEIPayload(e,r,n)},e.readSEIPayload=function(e,t,r){var n;return n={type:t},e.skipBits(8*r),e.skipBits(e.bitsAvailable%8),n},e}();t.default=a},6377:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(8395),i=r(8949),o=r(1252),a=1,s=function(){function e(t,r,i){this.fps=t,this.framePerFragment=r,this.timescale=i,this.readyToDecode=!1,this.totalDTS=0,this.stepDTS=Math.round(this.timescale/this.fps),this.frameCount=0,this.seq=1,this.mp4track={id:e.getTrackID(),type:"video",len:0,codec:"",sps:[],pps:[],seiBuffering:!1,width:0,height:0,timescale:i,duration:i,samples:[],isKeyFrame:!0},this.unitSamples=[[]],this.parser=new n.default(this)}return e.getTrackID=function(){return a++},Object.defineProperty(e.prototype,"seqNum",{get:function(){return this.seq},enumerable:!0,configurable:!0}),e.prototype.remux=function(e){return this.mp4track.seiBuffering&&e.type()===o.default.SEI?this.createNextFrame():(this.parser.parseNAL(e)&&(this.unitSamples[this.unitSamples.length-1].push(e),this.mp4track.len+=e.getSize(),this.mp4track.isKeyFrame=e.isKeyframe()),this.mp4track.seiBuffering||e.type()!==o.default.IDR&&e.type()!==o.default.NDR?void 0:this.createNextFrame())},e.prototype.createNextFrame=function(){if(this.mp4track.len>0){if(this.frameCount++,this.frameCount%this.framePerFragment==0){var e=this.getFragment();if(e){var t=this.totalDTS;return this.totalDTS=this.stepDTS*this.frameCount,[t,e]}i.log("No mp4 sample data.")}this.unitSamples.push([])}},e.prototype.flush=function(){this.seq++,this.mp4track.len=0,this.mp4track.samples=[],this.mp4track.isKeyFrame=!1,this.unitSamples=[[]]},e.prototype.getFragment=function(){if(this.checkReadyToDecode()){var e=new Uint8Array(this.mp4track.len);this.mp4track.samples=[];for(var t=0,r=0,n=this.unitSamples.length;r<n;r++){var i=this.unitSamples[r];if(0!==i.length){for(var o={size:0,cts:this.stepDTS*r},a=0,s=i;a<s.length;a++){var u=s[a];o.size+=u.getSize(),e.set(u.getData(),t),t+=u.getSize()}this.mp4track.samples.push(o)}}if(0!==t)return e}},e.prototype.checkReadyToDecode=function(){return!(!this.readyToDecode||0===this.unitSamples.filter((function(e){return e.length>0})).length)||(i.log("Not ready to decode! readyToDecode("+this.readyToDecode+") is false or units is empty."),!1)},e}();t.default=s},754:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(6377),i=r(1149),o=r(8949),a=r(3615);t.mimeType='video/mp4; codecs="avc1.42E01E"';var s=r(8949);t.setLogger=s.setLogger;var u=function(){function e(e,r,n){if(void 0===r&&(r=60),void 0===n&&(n=r),this.element=e,this.fps=r,this.fpf=n,this.receiveBuffer=new a.default,this.queue=[],!MediaSource||!MediaSource.isTypeSupported(t.mimeType))throw new Error("Your browser is not supported: "+t.mimeType);this.reset()}return Object.defineProperty(e,"errorNotes",{get:function(){var e;return(e={})[MediaError.MEDIA_ERR_ABORTED]="fetching process aborted by user",e[MediaError.MEDIA_ERR_NETWORK]="error occurred when downloading",e[MediaError.MEDIA_ERR_DECODE]="error occurred when decoding",e[MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED]="audio/video not supported",e},enumerable:!0,configurable:!0}),e.prototype.setup=function(){var e=this;return this.mediaReadyPromise=new Promise((function(r,n){e.mediaSource.addEventListener("sourceopen",(function(){o.log("Media Source opened."),e.sourceBuffer=e.mediaSource.addSourceBuffer(t.mimeType),e.sourceBuffer.addEventListener("updateend",(function(){o.log("  SourceBuffer updateend"),o.log("    sourceBuffer.buffered.length="+e.sourceBuffer.buffered.length);for(var t=0,r=e.sourceBuffer.buffered.length;t<r;t++)o.log("    sourceBuffer.buffered ["+t+"]: "+e.sourceBuffer.buffered.start(t)+", "+e.sourceBuffer.buffered.end(t));if(o.log("  mediasource.duration="+e.mediaSource.duration),o.log("  mediasource.readyState="+e.mediaSource.readyState),o.log("  video.duration="+e.element.duration),o.log("    video.buffered.length="+e.element.buffered.length),o.isEnable())for(t=0,r=e.element.buffered.length;t<r;t++)o.log("    video.buffered ["+t+"]: "+e.element.buffered.start(t)+", "+e.element.buffered.end(t));if(o.log("  video.currentTime="+e.element.currentTime),o.log("  video.readyState="+e.element.readyState),!e.sourceBuffer.updating){var n=e.queue.shift();n&&e.doAppend(n)}})),e.sourceBuffer.addEventListener("error",(function(){o.error("  SourceBuffer errored!")})),e.mediaReady=!0,r()}),!1),e.mediaSource.addEventListener("sourceclose",(function(){o.log("Media Source closed."),e.mediaReady=!1}),!1),e.element.src=URL.createObjectURL(e.mediaSource)})),this.mediaReadyPromise},e.prototype.play=function(){var e=this;if(this.element.paused)if(this.mediaReady&&this.element.readyState>=2)this.element.play();else{var t=function(){e.play(),e.element.removeEventListener("canplaythrough",t)};this.element.addEventListener("canplaythrough",t)}},e.prototype.pause=function(){this.element.paused||this.element.pause()},e.prototype.reset=function(){if(this.receiveBuffer.clear(),this.mediaSource&&"open"===this.mediaSource.readyState&&this.sourceBuffer.updating){var e=this.mediaSource;this.sourceBuffer.addEventListener("updateend",(function(){e.endOfStream()}))}this.mediaSource=new MediaSource,this.remuxer=new n.default(this.fps,this.fpf,60*this.fps),this.mediaReady=!1,this.mediaReadyPromise=void 0,this.queue=[],this.setup()},e.prototype.appendRawData=function(e){for(var t=0,r=this.receiveBuffer.append(e);t<r.length;t++){var n=r[t],i=this.remuxer.remux(n);i&&this.writeFragment(i[0],i[1])}},e.prototype.writeFragment=function(e,t){var r=this.remuxer;if(r.mp4track.isKeyFrame&&this.writeBuffer(i.default.initSegment([r.mp4track],1/0,r.timescale)),t&&t.byteLength){o.log(" Put fragment: "+r.seqNum+", frames="+r.mp4track.samples.length+", size="+t.byteLength);var n=i.default.fragmentSegment(r.seqNum,e,r.mp4track,t);this.writeBuffer(n),r.flush()}else o.error("Nothing payload!")},e.prototype.writeBuffer=function(e){var t=this;this.mediaReady?this.sourceBuffer.updating||this.queue.length?this.queue.push(e):this.doAppend(e):(this.queue.push(e),this.mediaReadyPromise&&(this.mediaReadyPromise.then((function(){if(!t.sourceBuffer.updating){var e=t.queue.shift();e&&t.doAppend(e)}})),this.mediaReadyPromise=void 0))},e.prototype.doAppend=function(t){var r=this.element.error;if(r)o.error("MSE Error Occured: "+e.errorNotes[r.code]),this.element.pause(),"open"===this.mediaSource.readyState&&this.mediaSource.endOfStream();else try{this.sourceBuffer.appendBuffer(t),o.log("  appended buffer: size="+t.byteLength)}catch(e){o.error("MSE Error occured while appending buffer. "+e.name+": "+e.message)}},e}();t.default=u},1149:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.init=function(){for(var t in e.initalized=!0,e.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trep:[],trex:[],tkhd:[],vmhd:[],smhd:[]},e.types)e.types.hasOwnProperty(t)&&(e.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);var r=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),i=new Uint8Array([0,0,0,0,0,0,0,0]);e.STTS=e.STSC=e.STCO=i,e.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),e.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),e.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),e.STSD=new Uint8Array([0,0,0,0,0,0,0,1]),e.FTYP=e.box(e.types.ftyp,new Uint8Array([105,115,111,53,0,0,0,1,97,118,99,49,105,115,111,53,100,97,115,104])),e.STYP=e.box(e.types.styp,new Uint8Array([109,115,100,104,0,0,0,0,109,115,100,104,109,115,105,120])),e.DINF=e.box(e.types.dinf,e.box(e.types.dref,n)),e.HDLR=e.box(e.types.hdlr,r)},e.box=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];for(var n=8,i=0,o=t;i<o.length;i++){var a=o[i];n+=a.byteLength}var s=new Uint8Array(n);s[0]=n>>24&255,s[1]=n>>16&255,s[2]=n>>8&255,s[3]=255&n,s.set(e,4),n=8;for(var u=0,c=t;u<c.length;u++){var l=c[u];s.set(l,n),n+=l.byteLength}return s},e.mdat=function(t){return e.box(e.types.mdat,t)},e.mdhd=function(t){return e.box(e.types.mdhd,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,t>>24&255,t>>16&255,t>>8&255,255&t,0,0,0,0,85,196,0,0]))},e.mdia=function(t){return e.box(e.types.mdia,e.mdhd(t.timescale),e.HDLR,e.minf(t))},e.mfhd=function(t){return e.box(e.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))},e.minf=function(t){return e.box(e.types.minf,e.box(e.types.vmhd,e.VMHD),e.DINF,e.stbl(t))},e.moof=function(t,r,n){return e.box(e.types.moof,e.mfhd(t),e.traf(n,r))},e.moov=function(t,r,n){for(var i=[],o=0,a=t;o<a.length;o++){var s=a[o];i.push(e.trak(s))}return e.box.apply(e,[e.types.moov,e.mvhd(n,r),e.mvex(t)].concat(i))},e.mvhd=function(t,r){var n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,t>>24&255,t>>16&255,t>>8&255,255&t,r>>24&255,r>>16&255,r>>8&255,255&r,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2]);return e.box(e.types.mvhd,n)},e.mvex=function(t){for(var r=[],n=0,i=t;n<i.length;n++){var o=i[n];r.push(e.trex(o))}return e.box.apply(e,[e.types.mvex].concat(r,[e.trep()]))},e.trep=function(){return e.box(e.types.trep,new Uint8Array([0,0,0,0,0,0,0,1]))},e.stbl=function(t){return e.box(e.types.stbl,e.stsd(t),e.box(e.types.stts,e.STTS),e.box(e.types.stsc,e.STSC),e.box(e.types.stsz,e.STSZ),e.box(e.types.stco,e.STCO))},e.avc1=function(t){for(var r=[],n=[],i=0,o=t.sps;i<o.length;i++){var a=(c=o[i]).byteLength;r.push(a>>>8&255),r.push(255&a),r=r.concat(Array.prototype.slice.call(c))}for(var s=0,u=t.pps;s<u.length;s++){var c;a=(c=u[s]).byteLength,n.push(a>>>8&255),n.push(255&a),n=n.concat(Array.prototype.slice.call(c))}var l=e.box(e.types.avcC,new Uint8Array([1,r[3],r[4],r[5],255,224|t.sps.length].concat(r).concat([t.pps.length]).concat(n))),d=t.width,f=t.height;return e.box(e.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,d>>8&255,255&d,f>>8&255,255&f,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,98,105,110,101,108,112,114,111,46,114,117,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),l,e.box(e.types.btrt,new Uint8Array([0,0,0,0,0,45,198,192,0,45,198,192])))},e.stsd=function(t){return e.box(e.types.stsd,e.STSD,e.avc1(t))},e.tkhd=function(t){var r=t.id,n=t.width,i=t.height;return e.box(e.types.tkhd,new Uint8Array([0,0,0,1,0,0,0,1,0,0,0,2,r>>24&255,r>>16&255,r>>8&255,255&r,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,"audio"===t.type?1:0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,n>>8&255,255&n,0,0,i>>8&255,255&i,0,0]))},e.traf=function(t,r){var n=t.id;return e.box(e.types.traf,e.box(e.types.tfhd,new Uint8Array([0,2,0,0,n>>24,n>>16&255,n>>8&255,255&n])),e.box(e.types.tfdt,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r])),e.trun(t,72))},e.trak=function(t){return t.duration=t.duration||4294967295,e.box(e.types.trak,e.tkhd(t),e.mdia(t))},e.trex=function(t){var r=t.id;return e.box(e.types.trex,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,0,0,0,1,0,0,0,60,0,0,0,0,0,1,0,0]))},e.trun=function(t,r){var n=t.samples||[],i=n.length,o=t.isKeyFrame?4:0,a=12+o+4*i,s=new Uint8Array(a);r+=8+a,s.set([0,0,2,t.isKeyFrame?5:1,i>>>24&255,i>>>16&255,i>>>8&255,255&i,r>>>24&255,r>>>16&255,r>>>8&255,255&r],0),t.isKeyFrame&&s.set([0,0,0,0],12);for(var u=0;u<i;u++){var c=n[u].size;s.set([c>>>24&255,c>>>16&255,c>>>8&255,255&c],12+o+4*u)}return e.box(e.types.trun,s)},e.initSegment=function(t,r,n){e.initalized||e.init();var i=e.moov(t,r,n),o=new Uint8Array(e.FTYP.byteLength+i.byteLength);return o.set(e.FTYP),o.set(i,e.FTYP.byteLength),o},e.fragmentSegment=function(t,r,n,i){var o=e.moof(t,r,n),a=e.mdat(i),s=new Uint8Array(e.STYP.byteLength+o.byteLength+a.byteLength);return s.set(e.STYP),s.set(o,e.STYP.byteLength),s.set(a,e.STYP.byteLength+o.byteLength),s},e.types={},e.initalized=!1,e}();t.default=r},1252:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.data=e,this.nri=(96&e[0])>>5,this.ntype=31&e[0]}return Object.defineProperty(e,"NDR",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(e,"IDR",{get:function(){return 5},enumerable:!0,configurable:!0}),Object.defineProperty(e,"SEI",{get:function(){return 6},enumerable:!0,configurable:!0}),Object.defineProperty(e,"SPS",{get:function(){return 7},enumerable:!0,configurable:!0}),Object.defineProperty(e,"PPS",{get:function(){return 8},enumerable:!0,configurable:!0}),Object.defineProperty(e,"TYPES",{get:function(){var t;return(t={})[e.IDR]="IDR",t[e.SEI]="SEI",t[e.SPS]="SPS",t[e.PPS]="PPS",t[e.NDR]="NDR",t},enumerable:!0,configurable:!0}),e.type=function(t){return t.ntype in e.TYPES?e.TYPES[t.ntype]:"UNKNOWN"},e.prototype.type=function(){return this.ntype},e.prototype.isKeyframe=function(){return this.ntype===e.IDR},e.prototype.getSize=function(){return 4+this.data.byteLength},e.prototype.getData=function(){var e=new Uint8Array(this.getSize());return new DataView(e.buffer).setUint32(0,this.getSize()-4),e.set(this.data,4),e},e}();t.default=r},1539:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.data=e,this.index=0,this.bitLength=8*e.byteLength}return Object.defineProperty(e.prototype,"bitsAvailable",{get:function(){return this.bitLength-this.index},enumerable:!0,configurable:!0}),e.prototype.skipBits=function(e){if(this.bitsAvailable<e)throw new Error("no bytes available");this.index+=e},e.prototype.readBits=function(e){return this.getBits(e,this.index)},e.prototype.getBits=function(e,t,r){if(void 0===r&&(r=!0),this.bitsAvailable<e)throw new Error("no bytes available");var n=t%8,i=this.data[t/8|0]&255>>>n,o=8-n;if(o>=e)return r&&(this.index+=e),i>>o-e;r&&(this.index+=o);var a=e-o;return i<<a|this.getBits(a,t+o,r)},e.prototype.skipLZ=function(){var e;for(e=0;e<this.bitLength-this.index;++e)if(0!==this.getBits(1,this.index+e,!1))return this.index+=e,e;return e},e.prototype.skipUEG=function(){this.skipBits(1+this.skipLZ())},e.prototype.skipEG=function(){this.skipBits(1+this.skipLZ())},e.prototype.readUEG=function(){var e=this.skipLZ();return this.readBits(e+1)-1},e.prototype.readEG=function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)},e.prototype.readBoolean=function(){return 1===this.readBits(1)},e.prototype.readUByte=function(){return this.readBits(8)},e.prototype.readUShort=function(){return this.readBits(16)},e.prototype.readUInt=function(){return this.readBits(32)},e}();t.default=r},8949:(e,t)=>{"use strict";var r,n;Object.defineProperty(t,"__esModule",{value:!0}),t.setLogger=function(e,t){r=e,n=null!=t?t:e},t.isEnable=function(){return null!=r},t.log=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];r&&r.apply(void 0,[e].concat(t))},t.error=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];n&&n.apply(void 0,[e].concat(t))}},3615:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1252),i=function(){function e(){}return e.prototype.clear=function(){this.buffer=void 0},e.prototype.append=function(e){var t,r=[];this.buffer&&1===e[3]&&0===e[2]&&0===e[1]&&0===e[0]&&(r.push(new n.default(this.buffer.subarray(4))),t=Uint8Array.from(e)),null==t&&(t=this.mergeBuffer(e));for(var i=0,o=function(e){var t=3;return function(){for(var r=0;t<e.length;t++)switch(e[t]){case 0:r++;break;case 1:if(3===r)return t-3;default:r=0}}}(t),a=o();null!=a;a=o())r.push(new n.default(t.subarray(i+4,a))),i=a;return this.buffer=t.subarray(i),r},e.prototype.mergeBuffer=function(e){if(null==this.buffer)return Uint8Array.from(e);var t=new Uint8Array(this.buffer.byteLength+e.length);return this.buffer.byteLength>0&&t.set(this.buffer,0),t.set(e,this.buffer.byteLength),t},e}();t.default=i},645:(e,t)=>{t.read=function(e,t,r,n,i){var o,a,s=8*i-n-1,u=(1<<s)-1,c=u>>1,l=-7,d=r?i-1:0,f=r?-1:1,h=e[t+d];for(d+=f,o=h&(1<<-l)-1,h>>=-l,l+=s;l>0;o=256*o+e[t+d],d+=f,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=n;l>0;a=256*a+e[t+d],d+=f,l-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,n),o-=c}return(h?-1:1)*a*Math.pow(2,o-n)},t.write=function(e,t,r,n,i,o){var a,s,u,c=8*o-i-1,l=(1<<c)-1,d=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:o-1,p=n?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),(t+=a+d>=1?f/u:f*Math.pow(2,1-d))*u>=2&&(a++,u/=2),a+d>=l?(s=0,a=l):a+d>=1?(s=(t*u-1)*Math.pow(2,i),a+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,i),a=0));i>=8;e[r+h]=255&s,h+=p,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;e[r+h]=255&a,h+=p,a/=256,c-=8);e[r+h-p]|=128*m}},8507:(e,t,r)=>{"use strict";r.r(t)},5131:(e,t,r)=>{"use strict";r.r(t)},3072:(e,t,r)=>{"use strict";r.r(t)},6363:(e,t,r)=>{"use strict";r.r(t)},9390:(e,t,r)=>{"use strict";r.r(t)},4431:(e,t,r)=>{"use strict";r.r(t)},6470:e=>{"use strict";function t(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function r(e,t){for(var r,n="",i=0,o=-1,a=0,s=0;s<=e.length;++s){if(s<e.length)r=e.charCodeAt(s);else{if(47===r)break;r=47}if(47===r){if(o===s-1||1===a);else if(o!==s-1&&2===a){if(n.length<2||2!==i||46!==n.charCodeAt(n.length-1)||46!==n.charCodeAt(n.length-2))if(n.length>2){var u=n.lastIndexOf("/");if(u!==n.length-1){-1===u?(n="",i=0):i=(n=n.slice(0,u)).length-1-n.lastIndexOf("/"),o=s,a=0;continue}}else if(2===n.length||1===n.length){n="",i=0,o=s,a=0;continue}t&&(n.length>0?n+="/..":n="..",i=2)}else n.length>0?n+="/"+e.slice(o+1,s):n=e.slice(o+1,s),i=s-o-1;o=s,a=0}else 46===r&&-1!==a?++a:a=-1}return n}var n={resolve:function(){for(var e,n="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var a;o>=0?a=arguments[o]:(void 0===e&&(e=process.cwd()),a=e),t(a),0!==a.length&&(n=a+"/"+n,i=47===a.charCodeAt(0))}return n=r(n,!i),i?n.length>0?"/"+n:"/":n.length>0?n:"."},normalize:function(e){if(t(e),0===e.length)return".";var n=47===e.charCodeAt(0),i=47===e.charCodeAt(e.length-1);return 0!==(e=r(e,!n)).length||n||(e="."),e.length>0&&i&&(e+="/"),n?"/"+e:e},isAbsolute:function(e){return t(e),e.length>0&&47===e.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var e,r=0;r<arguments.length;++r){var i=arguments[r];t(i),i.length>0&&(void 0===e?e=i:e+="/"+i)}return void 0===e?".":n.normalize(e)},relative:function(e,r){if(t(e),t(r),e===r)return"";if((e=n.resolve(e))===(r=n.resolve(r)))return"";for(var i=1;i<e.length&&47===e.charCodeAt(i);++i);for(var o=e.length,a=o-i,s=1;s<r.length&&47===r.charCodeAt(s);++s);for(var u=r.length-s,c=a<u?a:u,l=-1,d=0;d<=c;++d){if(d===c){if(u>c){if(47===r.charCodeAt(s+d))return r.slice(s+d+1);if(0===d)return r.slice(s+d)}else a>c&&(47===e.charCodeAt(i+d)?l=d:0===d&&(l=0));break}var f=e.charCodeAt(i+d);if(f!==r.charCodeAt(s+d))break;47===f&&(l=d)}var h="";for(d=i+l+1;d<=o;++d)d!==o&&47!==e.charCodeAt(d)||(0===h.length?h+="..":h+="/..");return h.length>0?h+r.slice(s+l):(s+=l,47===r.charCodeAt(s)&&++s,r.slice(s))},_makeLong:function(e){return e},dirname:function(e){if(t(e),0===e.length)return".";for(var r=e.charCodeAt(0),n=47===r,i=-1,o=!0,a=e.length-1;a>=1;--a)if(47===(r=e.charCodeAt(a))){if(!o){i=a;break}}else o=!1;return-1===i?n?"/":".":n&&1===i?"//":e.slice(0,i)},basename:function(e,r){if(void 0!==r&&"string"!=typeof r)throw new TypeError('"ext" argument must be a string');t(e);var n,i=0,o=-1,a=!0;if(void 0!==r&&r.length>0&&r.length<=e.length){if(r.length===e.length&&r===e)return"";var s=r.length-1,u=-1;for(n=e.length-1;n>=0;--n){var c=e.charCodeAt(n);if(47===c){if(!a){i=n+1;break}}else-1===u&&(a=!1,u=n+1),s>=0&&(c===r.charCodeAt(s)?-1==--s&&(o=n):(s=-1,o=u))}return i===o?o=u:-1===o&&(o=e.length),e.slice(i,o)}for(n=e.length-1;n>=0;--n)if(47===e.charCodeAt(n)){if(!a){i=n+1;break}}else-1===o&&(a=!1,o=n+1);return-1===o?"":e.slice(i,o)},extname:function(e){t(e);for(var r=-1,n=0,i=-1,o=!0,a=0,s=e.length-1;s>=0;--s){var u=e.charCodeAt(s);if(47!==u)-1===i&&(o=!1,i=s+1),46===u?-1===r?r=s:1!==a&&(a=1):-1!==r&&(a=-1);else if(!o){n=s+1;break}}return-1===r||-1===i||0===a||1===a&&r===i-1&&r===n+1?"":e.slice(r,i)},format:function(e){if(null===e||"object"!=typeof e)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return function(e,t){var r=t.dir||t.root,n=t.base||(t.name||"")+(t.ext||"");return r?r===t.root?r+n:r+"/"+n:n}(0,e)},parse:function(e){t(e);var r={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return r;var n,i=e.charCodeAt(0),o=47===i;o?(r.root="/",n=1):n=0;for(var a=-1,s=0,u=-1,c=!0,l=e.length-1,d=0;l>=n;--l)if(47!==(i=e.charCodeAt(l)))-1===u&&(c=!1,u=l+1),46===i?-1===a?a=l:1!==d&&(d=1):-1!==a&&(d=-1);else if(!c){s=l+1;break}return-1===a||-1===u||0===d||1===d&&a===u-1&&a===s+1?-1!==u&&(r.base=r.name=0===s&&o?e.slice(1,u):e.slice(s,u)):(0===s&&o?(r.name=e.slice(1,a),r.base=e.slice(1,u)):(r.name=e.slice(s,a),r.base=e.slice(s,u)),r.ext=e.slice(a,u)),s>0?r.dir=e.slice(0,s-1):o&&(r.dir="/"),r},sep:"/",delimiter:":",win32:null,posix:null};n.posix=n,e.exports=n},3806:e=>{e.exports='<svg fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20,11H7.83l5.59,-5.59L12,4l-8,8 8,8 1.41,-1.41L7.83,13H20v-2z"></path></svg>'},6144:e=>{e.exports='<svg fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12,2C6.47,2 2,6.47 2,12s4.47,10 10,10 10,-4.47 10,-10S17.53,2 12,2zM12,20c-4.41,0 -8,-3.59 -8,-8s3.59,-8 8,-8 8,3.59 8,8 -3.59,8 -8,8zM15.59,7L12,10.59 8.41,7 7,8.41 10.59,12 7,15.59 8.41,17 12,13.41 15.59,17 17,15.59 13.41,12 17,8.41z"></path></svg>'},5563:e=>{e.exports='<svg fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3,18h18v-2L3,16v2zM3,13h18v-2L3,11v2zM3,6v2h18L21,6L3,6z"></path></svg>'},8666:e=>{e.exports='<svg fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12,2.02c-5.51,0 -9.98,4.47 -9.98,9.98s4.47,9.98 9.98,9.98 9.98,-4.47 9.98,-9.98S17.51,2.02 12,2.02zM12,19.98c-4.4,0 -7.98,-3.58 -7.98,-7.98S7.6,4.02 12,4.02 19.98,7.6 19.98,12 16.4,19.98 12,19.98zM12.75,5l-4.5,8.5h3.14L11.39,19l4.36,-8.5h-3z"></path></svg>'},1156:e=>{e.exports='<svg fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17.65,6.35C16.2,4.9 14.21,4 12,4c-4.42,0 -7.99,3.58 -7.99,8s3.57,8 7.99,8c3.73,0 6.84,-2.55 7.73,-6h-2.08c-0.82,2.33 -3.04,4 -5.65,4 -3.31,0 -6,-2.69 -6,-6s2.69,-6 6,-6c1.66,0 3.14,0.69 4.22,1.78L13,11h7V4l-2.35,2.35z"></path></svg>'},3459:e=>{e.exports='<svg fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19.43,12.98c0.04,-0.32 0.07,-0.64 0.07,-0.98 0,-0.34 -0.03,-0.66 -0.07,-0.98l2.11,-1.65c0.19,-0.15 0.24,-0.42 0.12,-0.64l-2,-3.46c-0.09,-0.16 -0.26,-0.25 -0.44,-0.25 -0.06,0 -0.12,0.01 -0.17,0.03l-2.49,1c-0.52,-0.4 -1.08,-0.73 -1.69,-0.98l-0.38,-2.65C14.46,2.18 14.25,2 14,2h-4c-0.25,0 -0.46,0.18 -0.49,0.42l-0.38,2.65c-0.61,0.25 -1.17,0.59 -1.69,0.98l-2.49,-1c-0.06,-0.02 -0.12,-0.03 -0.18,-0.03 -0.17,0 -0.34,0.09 -0.43,0.25l-2,3.46c-0.13,0.22 -0.07,0.49 0.12,0.64l2.11,1.65c-0.04,0.32 -0.07,0.65 -0.07,0.98 0,0.33 0.03,0.66 0.07,0.98l-2.11,1.65c-0.19,0.15 -0.24,0.42 -0.12,0.64l2,3.46c0.09,0.16 0.26,0.25 0.44,0.25 0.06,0 0.12,-0.01 0.17,-0.03l2.49,-1c0.52,0.4 1.08,0.73 1.69,0.98l0.38,2.65c0.03,0.24 0.24,0.42 0.49,0.42h4c0.25,0 0.46,-0.18 0.49,-0.42l0.38,-2.65c0.61,-0.25 1.17,-0.59 1.69,-0.98l2.49,1c0.06,0.02 0.12,0.03 0.18,0.03 0.17,0 0.34,-0.09 0.43,-0.25l2,-3.46c0.12,-0.22 0.07,-0.49 -0.12,-0.64l-2.11,-1.65zM17.45,11.27c0.04,0.31 0.05,0.52 0.05,0.73 0,0.21 -0.02,0.43 -0.05,0.73l-0.14,1.13 0.89,0.7 1.08,0.84 -0.7,1.21 -1.27,-0.51 -1.04,-0.42 -0.9,0.68c-0.43,0.32 -0.84,0.56 -1.25,0.73l-1.06,0.43 -0.16,1.13 -0.2,1.35h-1.4l-0.19,-1.35 -0.16,-1.13 -1.06,-0.43c-0.43,-0.18 -0.83,-0.41 -1.23,-0.71l-0.91,-0.7 -1.06,0.43 -1.27,0.51 -0.7,-1.21 1.08,-0.84 0.89,-0.7 -0.14,-1.13c-0.03,-0.31 -0.05,-0.54 -0.05,-0.74s0.02,-0.43 0.05,-0.73l0.14,-1.13 -0.89,-0.7 -1.08,-0.84 0.7,-1.21 1.27,0.51 1.04,0.42 0.9,-0.68c0.43,-0.32 0.84,-0.56 1.25,-0.73l1.06,-0.43 0.16,-1.13 0.2,-1.35h1.39l0.19,1.35 0.16,1.13 1.06,0.43c0.43,0.18 0.83,0.41 1.23,0.71l0.91,0.7 1.06,-0.43 1.27,-0.51 0.7,1.21 -1.07,0.85 -0.89,0.7 0.14,1.13zM12,8c-2.21,0 -4,1.79 -4,4s1.79,4 4,4 4,-1.79 4,-4 -1.79,-4 -4,-4zM12,14c-1.1,0 -2,-0.9 -2,-2s0.9,-2 2,-2 2,0.9 2,2 -0.9,2 -2,2z"></path></svg>'},6031:e=>{e.exports='<svg fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17,7H7c-2.76,0 -5,2.24 -5,5s2.24,5 5,5h10c2.76,0 5,-2.24 5,-5s-2.24,-5 -5,-5zM7,15c-1.66,0 -3,-1.34 -3,-3s1.34,-3 3,-3 3,1.34 3,3 -1.34,3 -3,3z"></path></svg>'},9842:e=>{e.exports='<svg fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17,7L7,7c-2.76,0 -5,2.24 -5,5s2.24,5 5,5h10c2.76,0 5,-2.24 5,-5s-2.24,-5 -5,-5zM17,15c-1.66,0 -3,-1.34 -3,-3s1.34,-3 3,-3 3,1.34 3,3 -1.34,3 -3,3z"></path></svg>'},1229:e=>{e.exports='<svg viewBox="0 0 48 48" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns"><title>Artboard 1</title><desc>Created with Sketch.</desc><defs></defs><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage"><g id="Artboard-1" sketch:type="MSArtboardGroup"><g id="System_Back" sketch:type="MSLayerGroup"><g id="Page-1" sketch:type="MSShapeGroup"><g id="System_Back"><g id="Rectangle-118-+-back-12-Copy-11"><rect id="Rectangle-118" x="0" y="0" width="48" height="48"></rect><path d="M36.7088473,10.9494765 L36.7088478,37.6349688 C36.7088478,39.4039498 35.4820844,40.0949115 33.9646508,39.1757647 L12.1373795,25.9544497 C10.6218013,25.0364267 10.6199459,23.5491414 12.1373794,22.6299946 L33.9646503,9.40868054 C35.4802284,8.49065763 36.7088473,9.16835511 36.7088473,10.9494765 Z M33.5088482,13.4305237 L33.5088482,35.1305245 L15.5088482,24.2805241 L33.5088482,13.4305237 Z" id="Shape" fill="var(--svg-button-fill)"></path></g></g></g></g></g></g></svg>'},1439:e=>{e.exports='<svg viewBox="0 0 48 48" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns"><title>System_Home</title><desc>Created with Sketch.</desc><defs></defs><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage"><g id="System_Home" sketch:type="MSArtboardGroup"><g id="Rectangle-119-+-home-12-Copy-11" sketch:type="MSLayerGroup"><rect id="Rectangle-119" sketch:type="MSShapeGroup" x="0" y="0" width="48" height="48"></rect><path d="M24,35.2 L24,35.2 C30.1855892,35.2 35.2,30.1855892 35.2,24 C35.2,17.8144108 30.1855892,12.8 24,12.8 C17.8144108,12.8 12.8,17.8144108 12.8,24 C12.8,30.1855892 17.8144108,35.2 24,35.2 L24,35.2 Z M24,38.4 L24,38.4 C16.0470996,38.4 9.6,31.9529004 9.6,24 C9.6,16.0470996 16.0470996,9.6 24,9.6 C31.9529004,9.6 38.4,16.0470996 38.4,24 C38.4,31.9529004 31.9529004,38.4 24,38.4 L24,38.4 Z" id="Shape" fill="var(--svg-button-fill)" sketch:type="MSShapeGroup"></path></g></g></g></svg>'},4166:e=>{e.exports='<svg viewBox="0 0 48 48" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns"><title>System_Overview</title><desc>Created with Sketch.</desc><defs></defs><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage"><g id="System_Overview" sketch:type="MSArtboardGroup"><g id="Rectangle-120-+-recent-12-Copy-11" sketch:type="MSLayerGroup"><rect id="Rectangle-120" sketch:type="MSShapeGroup" x="0" y="0" width="48" height="48"></rect><path d="M12.7921429,12.8 L12.7921429,12.8 C12.7959945,12.8 12.8,12.7959954 12.8,12.7921429 L12.8,35.2078571 C12.8,35.2040055 12.7959954,35.2 12.7921429,35.2 L35.2078571,35.2 C35.2040055,35.2 35.2,35.2040046 35.2,35.2078571 L35.2,12.7921429 C35.2,12.7959945 35.2040046,12.8 35.2078571,12.8 L12.7921429,12.8 Z M12.7921429,9.6 L12.7921429,9.6 L35.2078571,9.6 C36.9718035,9.6 38.4,11.029171 38.4,12.7921429 L38.4,35.2078571 C38.4,36.9718035 36.970829,38.4 35.2078571,38.4 L12.7921429,38.4 C11.0281965,38.4 9.6,36.970829 9.6,35.2078571 L9.6,12.7921429 C9.6,11.0281965 11.029171,9.6 12.7921429,9.6 L12.7921429,9.6 Z" id="Shape" fill="var(--svg-button-fill)" sketch:type="MSShapeGroup"></path></g></g></g></svg>'},6615:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" fill="var(--svg-button-fill)"><path d="M40 10H8c-2.21 0-3.98 1.79-3.98 4L4 34c0 2.21 1.79 4 4 4h32c2.21 0 4-1.79 4-4V14c0-2.21-1.79-4-4-4zm-18 6h4v4h-4v-4zm0 6h4v4h-4v-4zm-6-6h4v4h-4v-4zm0 6h4v4h-4v-4zm-2 4h-4v-4h4v4zm0-6h-4v-4h4v4zm18 14H16v-4h16v4zm0-8h-4v-4h4v4zm0-6h-4v-4h4v4zm6 6h-4v-4h4v4zm0-6h-4v-4h4v4z"></path><path d="M0 0h48v48H0zm0 0h48v48H0z" fill="none"></path></svg>'},7054:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" fill="var(--svg-button-fill)"><path d="M0 0h48v48H0z" fill="none"></path><path d="M12 20c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm24 0c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm-12 0c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4z"></path></svg>'},6676:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" fill="var(--svg-button-fill)"><circle cx="24" cy="24" r="6.4"></circle><path d="M18 4l-3.66 4H8c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h32c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4h-6.34L30 4H18zm6 30c-5.52 0-10-4.48-10-10s4.48-10 10-10 10 4.48 10 10-4.48 10-10 10z"></path><path d="M0 0h48v48H0z" fill="none"></path></svg>'},4996:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><path fill="none" d="M0 0h48v48H0z"></path><path d="M26 6h-4v20h4V6zm9.67 4.33l-2.83 2.83C35.98 15.73 38 19.62 38 24c0 7.73-6.27 14-14 14s-14-6.27-14-14c0-4.38 2.02-8.27 5.16-10.84l-2.83-2.83C8.47 13.63 6 18.52 6 24c0 9.94 8.06 18 18 18s18-8.06 18-18c0-5.48-2.47-10.37-6.33-13.67z" fill="var(--svg-button-fill)" stroke="var(--svg-button-fill)"></path></svg>'},1081:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><path d="M37 24c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zm-27-6v12h8l10 10V8L18 18h-8z" fill="var(--svg-button-fill)" stroke="var(--svg-button-fill)"></path><path d="M0 0h48v48H0z" fill="none"></path></svg>'},849:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><path d="M6 18v12h8l10 10V8L14 18H6zm27 6c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zM28 6.46v4.13c5.78 1.72 10 7.07 10 13.41s-4.22 11.69-10 13.41v4.13c8.01-1.82 14-8.97 14-17.54S36.01 8.28 28 6.46z" fill="var(--svg-button-fill)" stroke="var(--svg-button-fill)"></path><path d="M0 0h48v48H0z" fill="none"></path></svg>'},7438:(e,t,r)=>{var n=Function("return this")();t.Vector=r(4983),n.$V=t.Vector.create,t.Matrix=r(6831),n.$M=t.Matrix.create,t.Line=r(1102),n.$L=t.Line.create,t.Plane=r(4296),n.$P=t.Plane.create,t.Line.Segment=r(2585),t.Sylvester=r(335)},1102:(e,t,r)=>{var n=r(4983),i=r(6831),o=r(4296),a=r(335);function s(){}s.prototype={eql:function(e){return this.isParallelTo(e)&&this.contains(e.anchor)},dup:function(){return s.create(this.anchor,this.direction)},translate:function(e){var t=e.elements||e;return s.create([this.anchor.elements[0]+t[0],this.anchor.elements[1]+t[1],this.anchor.elements[2]+(t[2]||0)],this.direction)},isParallelTo:function(e){if(e.normal||e.start&&e.end)return e.isParallelTo(this);var t=this.direction.angleFrom(e.direction);return Math.abs(t)<=a.precision||Math.abs(t-Math.PI)<=a.precision},distanceFrom:function(e){if(e.normal||e.start&&e.end)return e.distanceFrom(this);if(e.direction){if(this.isParallelTo(e))return this.distanceFrom(e.anchor);var t=this.direction.cross(e.direction).toUnitVector().elements,r=this.anchor.elements,n=e.anchor.elements;return Math.abs((r[0]-n[0])*t[0]+(r[1]-n[1])*t[1]+(r[2]-n[2])*t[2])}var i=e.elements||e,o=(r=this.anchor.elements,this.direction.elements),a=i[0]-r[0],s=i[1]-r[1],u=(i[2]||0)-r[2],c=Math.sqrt(a*a+s*s+u*u);if(0===c)return 0;var l=(a*o[0]+s*o[1]+u*o[2])/c,d=1-l*l;return Math.abs(c*Math.sqrt(d<0?0:d))},contains:function(e){if(e.start&&e.end)return this.contains(e.start)&&this.contains(e.end);var t=this.distanceFrom(e);return null!==t&&t<=a.precision},positionOf:function(e){if(!this.contains(e))return null;var t=e.elements||e,r=this.anchor.elements,n=this.direction.elements;return(t[0]-r[0])*n[0]+(t[1]-r[1])*n[1]+((t[2]||0)-r[2])*n[2]},liesIn:function(e){return e.contains(this)},intersects:function(e){return e.normal?e.intersects(this):!this.isParallelTo(e)&&this.distanceFrom(e)<=a.precision},intersectionWith:function(e){if(e.normal||e.start&&e.end)return e.intersectionWith(this);if(!this.intersects(e))return null;var t=this.anchor.elements,r=this.direction.elements,i=e.anchor.elements,o=e.direction.elements,a=r[0],s=r[1],u=r[2],c=o[0],l=o[1],d=o[2],f=t[0]-i[0],h=t[1]-i[1],p=t[2]-i[2],m=c*c+l*l+d*d,v=a*c+s*l+u*d,E=((-a*f-s*h-u*p)*m/(a*a+s*s+u*u)+v*(c*f+l*h+d*p))/(m-v*v);return n.create([t[0]+E*a,t[1]+E*s,t[2]+E*u])},pointClosestTo:function(e){if(e.start&&e.end)return null===(f=e.pointClosestTo(this))?null:this.pointClosestTo(f);if(e.direction){if(this.intersects(e))return this.intersectionWith(e);if(this.isParallelTo(e))return null;var t=this.direction.elements,r=e.direction.elements,i=t[0],a=t[1],s=t[2],u=r[0],c=r[1],l=r[2],d=[(E=s*u-i*l)*l-(y=i*c-a*u)*c,y*u-(g=a*l-s*c)*l,g*c-E*u];return(f=o.create(e.anchor,d)).intersectionWith(this)}var f=e.elements||e;if(this.contains(f))return n.create(f);var h=this.anchor.elements,p=(i=(t=this.direction.elements)[0],a=t[1],s=t[2],h[0]),m=h[1],v=h[2],E=i*(f[1]-m)-a*(f[0]-p),y=a*((f[2]||0)-v)-s*(f[1]-m),g=s*(f[0]-p)-i*((f[2]||0)-v),_=n.create([a*E-s*g,s*y-i*E,i*g-a*y]),S=this.distanceFrom(f)/_.modulus();return n.create([f[0]+_.elements[0]*S,f[1]+_.elements[1]*S,(f[2]||0)+_.elements[2]*S])},rotate:function(e,t){void 0===t.direction&&(t=s.create(t.to3D(),n.k));var r=i.Rotation(e,t.direction).elements,o=t.pointClosestTo(this.anchor).elements,a=this.anchor.elements,u=this.direction.elements,c=o[0],l=o[1],d=o[2],f=a[0]-c,h=a[1]-l,p=a[2]-d;return s.create([c+r[0][0]*f+r[0][1]*h+r[0][2]*p,l+r[1][0]*f+r[1][1]*h+r[1][2]*p,d+r[2][0]*f+r[2][1]*h+r[2][2]*p],[r[0][0]*u[0]+r[0][1]*u[1]+r[0][2]*u[2],r[1][0]*u[0]+r[1][1]*u[1]+r[1][2]*u[2],r[2][0]*u[0]+r[2][1]*u[1]+r[2][2]*u[2]])},reverse:function(){return s.create(this.anchor,this.direction.x(-1))},reflectionIn:function(e){if(e.normal){var t=this.anchor.elements,r=this.direction.elements,n=t[0],i=t[1],o=t[2],a=r[0],u=r[1],c=r[2],l=this.anchor.reflectionIn(e).elements,d=n+a,f=i+u,h=o+c,p=e.pointClosestTo([d,f,h]).elements,m=[p[0]+(p[0]-d)-l[0],p[1]+(p[1]-f)-l[1],p[2]+(p[2]-h)-l[2]];return s.create(l,m)}if(e.direction)return this.rotate(Math.PI,e);var v=e.elements||e;return s.create(this.anchor.reflectionIn([v[0],v[1],v[2]||0]),this.direction)},setVectors:function(e,t){if(e=n.create(e),t=n.create(t),2==e.elements.length&&e.elements.push(0),2==t.elements.length&&t.elements.push(0),e.elements.length>3||t.elements.length>3)return null;var r=t.modulus();return 0===r?null:(this.anchor=e,this.direction=n.create([t.elements[0]/r,t.elements[1]/r,t.elements[2]/r]),this)}},s.create=function(e,t){return(new s).setVectors(e,t)},s.X=s.create(n.Zero(3),n.i),s.Y=s.create(n.Zero(3),n.j),s.Z=s.create(n.Zero(3),n.k),e.exports=s},2585:(e,t,r)=>{var n=r(1102),i=r(4983);n.Segment=function(){},n.Segment.prototype={eql:function(e){return this.start.eql(e.start)&&this.end.eql(e.end)||this.start.eql(e.end)&&this.end.eql(e.start)},dup:function(){return n.Segment.create(this.start,this.end)},length:function(){var e=this.start.elements,t=this.end.elements,r=t[0]-e[0],n=t[1]-e[1],i=t[2]-e[2];return Math.sqrt(r*r+n*n+i*i)},toVector:function(){var e=this.start.elements,t=this.end.elements;return i.create([t[0]-e[0],t[1]-e[1],t[2]-e[2]])},midpoint:function(){var e=this.start.elements,t=this.end.elements;return i.create([(t[0]+e[0])/2,(t[1]+e[1])/2,(t[2]+e[2])/2])},bisectingPlane:function(){return Plane.create(this.midpoint(),this.toVector())},translate:function(e){var t=e.elements||e,r=this.start.elements,i=this.end.elements;return n.Segment.create([r[0]+t[0],r[1]+t[1],r[2]+(t[2]||0)],[i[0]+t[0],i[1]+t[1],i[2]+(t[2]||0)])},isParallelTo:function(e){return this.line.isParallelTo(e)},distanceFrom:function(e){var t=this.pointClosestTo(e);return null===t?null:t.distanceFrom(e)},contains:function(e){if(e.start&&e.end)return this.contains(e.start)&&this.contains(e.end);var t=(e.elements||e).slice();if(2==t.length&&t.push(0),this.start.eql(t))return!0;var r=this.start.elements,n=i.create([r[0]-t[0],r[1]-t[1],r[2]-(t[2]||0)]),o=this.toVector();return n.isAntiparallelTo(o)&&n.modulus()<=o.modulus()},intersects:function(e){return null!==this.intersectionWith(e)},intersectionWith:function(e){if(!this.line.intersects(e))return null;var t=this.line.intersectionWith(e);return this.contains(t)?t:null},pointClosestTo:function(e){if(e.normal){var t=this.line.intersectionWith(e);return null===t?null:this.pointClosestTo(t)}var r=this.line.pointClosestTo(e);return null===r?null:this.contains(r)?r:(this.line.positionOf(r)<0?this.start:this.end).dup()},setPoints:function(e,t){return e=i.create(e).to3D(),t=i.create(t).to3D(),null===e||null===t?null:(this.line=n.create(e,t.subtract(e)),this.start=e,this.end=t,this)}},n.Segment.create=function(e,t){return(new n.Segment).setPoints(e,t)},e.exports=n.Segment},6831:(e,t,r)=>{var n=r(335);function o(e,t,r,n){for(var i=e.elements,o=n-1;o--;){for(var a=[],s=0;s<r;s++)a.push(s==o?1:0);i.unshift(a)}for(o=n-1;o<t;o++)for(;i[o].length<r;)i[o].unshift(0);return $M(i)}function a(){for(var e=this,t=u.I(e.rows()),r=e.transpose(),n=u.I(e.cols()),i=Number.MAX_VALUE,o=0;i>22737e-17&&o<100;){var a=r.transpose().qrJs();r=a.R,t=t.x(a.Q),a=r.transpose().qrJs(),n=n.x(a.Q);var s=(r=a.R).triu(1).unroll().norm(),c=r.diagonal().norm();0==c&&(c=1),i=s/c,o++}var l=r.diagonal(),d=[];for(o=1;o<=l.cols();o++){var f=l.e(o);if(d.push(Math.abs(f)),f<0)for(var h=0;h<n.rows();h++)t.elements[h][o-1]=-t.elements[h][o-1]}return{U:n,S:$V(d).toDiagonalMatrix(),V:t}}function s(){for(var e=this.rows(),t=this.cols(),r=u.I(e),n=this,i=1;i<Math.min(e,t);i++){for(var a=n.slice(i,0,i,i).col(1),s=[1];s.length<=e-i;)s.push(0);s=$V(s);var c=a.add(s.x(a.norm()*Math.sign(a.e(1)))),l=$M(c),d=o(u.I(e-i+1).subtract(l.x(2).x(l.transpose()).div(l.transpose().x(l).e(1,1))),e,t,i);n=d.x(n),r=r.x(d)}return{Q:r,R:n}}function u(){}function c(){for(var e=this.dup(),t=u.I(e.rows()),r=u.I(e.rows()),n=u.Zeros(e.rows(),e.cols()),i=1,o=1;o<=Math.min(e.cols(),e.rows());o++){r=e.partialPivot(o,i,r,e,t);for(var a=o+1;a<=e.rows();a++){var s=e.e(a,i)/e.e(o,i);t.elements[a-1][o-1]=s;for(var c=o+1;c<=e.cols();c++)e.elements[a-1][c-1]-=e.e(o,c)*s}for(c=o;c<=e.cols();c++)n.elements[o-1][c-1]=e.e(o,c);i<e.cols()&&i++}return{L:t,U:n,P:r}}r(4983),u.prototype={solve:function(e){var t=this.lu();e=t.P.x(e);var r=t.L.forwardSubstitute(e),n=t.U.backSubstitute(r);return t.P.x(n)},pcaProject:function(e,t){var r,n,i=(t=t||(r=this,n=r.transpose().x(r).x(1/r.rows()).svd(),{U:n.U,S:n.S}).U).slice(1,t.rows(),1,e);return{Z:this.x(i),U:t}},pcaRecover:function(e){var t=this.cols(),r=e.slice(1,e.rows(),1,t);return this.x(r.transpose())},triu:function(e){return e||(e=0),this.map((function(t,r,n){return n-r>=e?t:0}))},unroll:function(){for(var e=[],t=1;t<=this.cols();t++)for(var r=1;r<=this.rows();r++)e.push(this.e(r,t));return $V(e)},slice:function(e,t,r,n){var o=[];for(0==t&&(t=this.rows()),0==n&&(n=this.cols()),i=e;i<=t;i++){var a=[];for(j=r;j<=n;j++)a.push(this.e(i,j));o.push(a)}return $M(o)},e:function(e,t){return e<1||e>this.elements.length||t<1||t>this.elements[0].length?null:this.elements[e-1][t-1]},row:function(e){return e>this.elements.length?null:$V(this.elements[e-1])},col:function(e){if(e>this.elements[0].length)return null;for(var t=[],r=this.elements.length,n=0;n<r;n++)t.push(this.elements[n][e-1]);return $V(t)},dimensions:function(){return{rows:this.elements.length,cols:this.elements[0].length}},rows:function(){return this.elements.length},cols:function(){return this.elements[0].length},approxEql:function(e){return this.eql(e,n.approxPrecision)},eql:function(e,t){var r=e.elements||e;if(void 0===r[0][0]&&(r=u.create(r).elements),this.elements.length!=r.length||this.elements[0].length!=r[0].length)return!1;for(var i,o=this.elements.length,a=this.elements[0].length;o--;)for(i=a;i--;)if(Math.abs(this.elements[o][i]-r[o][i])>(t||n.precision))return!1;return!0},dup:function(){return u.create(this.elements)},map:function(e){for(var t,r=[],n=this.elements.length,i=this.elements[0].length;n--;)for(t=i,r[n]=[];t--;)r[n][t]=e(this.elements[n][t],n+1,t+1);return u.create(r)},isSameSizeAs:function(e){var t=e.elements||e;return void 0===t[0][0]&&(t=u.create(t).elements),this.elements.length==t.length&&this.elements[0].length==t[0].length},add:function(e){if("number"==typeof e)return this.map((function(t,r,n){return t+e}));var t=e.elements||e;return void 0===t[0][0]&&(t=u.create(t).elements),this.isSameSizeAs(t)?this.map((function(e,r,n){return e+t[r-1][n-1]})):null},subtract:function(e){if("number"==typeof e)return this.map((function(t,r,n){return t-e}));var t=e.elements||e;return void 0===t[0][0]&&(t=u.create(t).elements),this.isSameSizeAs(t)?this.map((function(e,r,n){return e-t[r-1][n-1]})):null},canMultiplyFromLeft:function(e){var t=e.elements||e;return void 0===t[0][0]&&(t=u.create(t).elements),this.elements[0].length==t.length},mulOp:function(e,t){if(!e.elements)return this.map((function(r){return t(r,e)}));var r=!!e.modulus;if(void 0===(m=e.elements||e)[0][0]&&(m=u.create(m).elements),!this.canMultiplyFromLeft(m))return null;for(var n,i,o,a,s,c=this.elements,l=[],d=c.length,f=m[0].length,h=c[0].length,p=d;p--;){for(i=[],n=c[p],a=f;a--;){for(o=0,s=h;s--;)o+=t(n[s],m[s][a]);i[a]=o}l[p]=i}var m=u.create(l);return r?m.col(1):m},div:function(e){return this.mulOp(e,(function(e,t){return e/t}))},multiply:function(e){return this.mulOp(e,(function(e,t){return e*t}))},x:function(e){return this.multiply(e)},elementMultiply:function(e){return this.map((function(t,r,n){return e.e(r,n)*t}))},sum:function(){var e=0;return this.map((function(t){e+=t})),e},mean:function(){for(var e=this.dimensions(),t=[],r=1;r<=e.cols;r++)t.push(this.col(r).sum()/e.rows);return $V(t)},column:function(e){return this.col(e)},log:function(){return this.map((function(e){return Math.log(e)}))},minor:function(e,t,r,n){for(var i,o,a,s=[],c=r,l=this.elements.length,d=this.elements[0].length;c--;)for(s[i=r-c-1]=[],o=n;o--;)a=n-o-1,s[i][a]=this.elements[(e+i-1)%l][(t+a-1)%d];return u.create(s)},transpose:function(){for(var e,t=this.elements.length,r=[],n=this.elements[0].length;n--;)for(e=t,r[n]=[];e--;)r[n][e]=this.elements[e][n];return u.create(r)},isSquare:function(){return this.elements.length==this.elements[0].length},max:function(){for(var e,t=0,r=this.elements.length,n=this.elements[0].length;r--;)for(e=n;e--;)Math.abs(this.elements[r][e])>Math.abs(t)&&(t=this.elements[r][e]);return t},indexOf:function(e){var t,r,n=this.elements.length,i=this.elements[0].length;for(t=0;t<n;t++)for(r=0;r<i;r++)if(this.elements[t][r]==e)return{i:t+1,j:r+1};return null},diagonal:function(){if(!this.isSquare)return null;for(var e=[],t=this.elements.length,r=0;r<t;r++)e.push(this.elements[r][r]);return $V(e)},toRightTriangular:function(){var e,t,r,n,i=this.dup(),o=this.elements.length,a=this.elements[0].length;for(t=0;t<o;t++){if(0==i.elements[t][t])for(r=t+1;r<o;r++)if(0!=i.elements[r][t]){for(e=[],n=0;n<a;n++)e.push(i.elements[t][n]+i.elements[r][n]);i.elements[t]=e;break}if(0!=i.elements[t][t])for(r=t+1;r<o;r++){var s=i.elements[r][t]/i.elements[t][t];for(e=[],n=0;n<a;n++)e.push(n<=t?0:i.elements[r][n]-i.elements[t][n]*s);i.elements[r]=e}}return i},toUpperTriangular:function(){return this.toRightTriangular()},determinant:function(){if(!this.isSquare())return null;if(1==this.cols&&1==this.rows)return this.row(1);if(0==this.cols&&0==this.rows)return 1;for(var e=this.toRightTriangular(),t=e.elements[0][0],r=e.elements.length,n=1;n<r;n++)t*=e.elements[n][n];return t},det:function(){return this.determinant()},isSingular:function(){return this.isSquare()&&0===this.determinant()},trace:function(){if(!this.isSquare())return null;for(var e=this.elements[0][0],t=this.elements.length,r=1;r<t;r++)e+=this.elements[r][r];return e},tr:function(){return this.trace()},rank:function(){for(var e,t=this.toRightTriangular(),r=0,i=this.elements.length,o=this.elements[0].length;i--;)for(e=o;e--;)if(Math.abs(t.elements[i][e])>n.precision){r++;break}return r},rk:function(){return this.rank()},augment:function(e){var t=e.elements||e;void 0===t[0][0]&&(t=u.create(t).elements);var r,n=this.dup(),i=n.elements[0].length,o=n.elements.length,a=t[0].length;if(o!=t.length)return null;for(;o--;)for(r=a;r--;)n.elements[o][i+r]=t[o][r];return n},inverse:function(){if(!this.isSquare()||this.isSingular())return null;for(var e,t,r,n,i,o=this.elements.length,a=o,s=this.augment(u.I(o)).toRightTriangular(),c=s.elements[0].length,l=[];a--;){for(r=[],l[a]=[],n=s.elements[a][a],t=0;t<c;t++)i=s.elements[a][t]/n,r.push(i),t>=o&&l[a].push(i);for(s.elements[a]=r,e=a;e--;){for(r=[],t=0;t<c;t++)r.push(s.elements[e][t]-s.elements[a][t]*s.elements[e][a]);s.elements[e]=r}}return u.create(l)},inv:function(){return this.inverse()},round:function(){return this.map((function(e){return Math.round(e)}))},snapTo:function(e){return this.map((function(t){return Math.abs(t-e)<=n.precision?e:t}))},inspect:function(){for(var e=[],t=this.elements.length,r=0;r<t;r++)e.push($V(this.elements[r]).inspect());return e.join("\n")},toArray:function(){for(var e=[],t=this.elements.length,r=0;r<t;r++)e.push(this.elements[r]);return e},setElements:function(e){var t,r,n=e.elements||e;if(void 0!==n[0][0]){for(t=n.length,this.elements=[];t--;)for(r=n[t].length,this.elements[t]=[];r--;)this.elements[t][r]=n[t][r];return this}var i=n.length;for(this.elements=[],t=0;t<i;t++)this.elements.push([n[t]]);return this},maxColumnIndexes:function(){for(var e=[],t=1;t<=this.rows();t++){for(var r=null,n=-1,i=1;i<=this.cols();i++)(null===r||this.e(t,i)>r)&&(r=this.e(t,i),n=i);e.push(n)}return $V(e)},maxColumns:function(){for(var e=[],t=1;t<=this.rows();t++){for(var r=null,n=1;n<=this.cols();n++)(null===r||this.e(t,n)>r)&&(r=this.e(t,n));e.push(r)}return $V(e)},minColumnIndexes:function(){for(var e=[],t=1;t<=this.rows();t++){for(var r=null,n=-1,i=1;i<=this.cols();i++)(null===r||this.e(t,i)<r)&&(r=this.e(t,i),n=i);e.push(n)}return $V(e)},minColumns:function(){for(var e=[],t=1;t<=this.rows();t++){for(var r=null,n=1;n<=this.cols();n++)(null===r||this.e(t,n)<r)&&(r=this.e(t,n));e.push(r)}return $V(e)},partialPivot:function(e,t,r,n,i){for(var o=0,a=0,s=e;s<=n.rows();s++)Math.abs(n.e(s,t))>a&&(a=Math.abs(n.e(e,t)),o=s);if(o!=e){var u=n.elements[e-1];n.elements[e-1]=n.elements[o-1],n.elements[o-1]=u,r.elements[e-1][e-1]=0,r.elements[e-1][o-1]=1,r.elements[o-1][o-1]=0,r.elements[o-1][e-1]=1}return r},forwardSubstitute:function(e){for(var t=[],r=1;r<=this.rows();r++){for(var n=0,i=1;i<r;i++)n+=this.e(r,i)*t[i-1];t.push((e.e(r)-n)/this.e(r,r))}return $V(t)},backSubstitute:function(e){for(var t=[],r=this.rows();r>0;r--){for(var n=0,i=this.cols();i>r;i--)n+=this.e(r,i)*t[this.rows()-i];t.push((e.e(r)-n)/this.e(r,r))}return $V(t.reverse())},luJs:c,svdJs:a,qrJs:s},u.prototype.svd=a,u.prototype.qr=s,u.prototype.lu=c,u.create=function(e){return(new u).setElements(e)},u.I=function(e){for(var t,r=[],n=e;n--;)for(t=e,r[n]=[];t--;)r[n][t]=n==t?1:0;return u.create(r)},u.loadFile=function(e){for(var t=[],n=r(4565).readFileSync(e,"utf-8").split("\n"),i=0;i<n.length;i++){var o=n[i].split(",");o.length>1&&t.push(o)}return(new u).setElements(t)},u.Diagonal=function(e){for(var t=e.length,r=u.I(t);t--;)r.elements[t][t]=e[t];return r},u.Rotation=function(e,t){if(!t)return u.create([[Math.cos(e),-Math.sin(e)],[Math.sin(e),Math.cos(e)]]);var r=t.dup();if(3!=r.elements.length)return null;var n=r.modulus(),i=r.elements[0]/n,o=r.elements[1]/n,a=r.elements[2]/n,s=Math.sin(e),c=Math.cos(e),l=1-c;return u.create([[l*i*i+c,l*i*o-s*a,l*i*a+s*o],[l*i*o+s*a,l*o*o+c,l*o*a-s*i],[l*i*a-s*o,l*o*a+s*i,l*a*a+c]])},u.RotationX=function(e){var t=Math.cos(e),r=Math.sin(e);return u.create([[1,0,0],[0,t,-r],[0,r,t]])},u.RotationY=function(e){var t=Math.cos(e),r=Math.sin(e);return u.create([[t,0,r],[0,1,0],[-r,0,t]])},u.RotationZ=function(e){var t=Math.cos(e),r=Math.sin(e);return u.create([[t,-r,0],[r,t,0],[0,0,1]])},u.Random=function(e,t){return 1===arguments.length&&(t=e),u.Zero(e,t).map((function(){return Math.random()}))},u.Fill=function(e,t,r){2===arguments.length&&(r=t,t=e);for(var n,i=[],o=e;o--;)for(n=t,i[o]=[];n--;)i[o][n]=r;return u.create(i)},u.Zero=function(e,t){return u.Fill(e,t,0)},u.Zeros=function(e,t){return u.Zero(e,t)},u.One=function(e,t){return u.Fill(e,t,1)},u.Ones=function(e,t){return u.One(e,t)},e.exports=u},4296:(e,t,r)=>{var n=r(4983),i=r(6831),o=r(1102),a=r(335);function s(){}s.prototype={eql:function(e){return this.contains(e.anchor)&&this.isParallelTo(e)},dup:function(){return s.create(this.anchor,this.normal)},translate:function(e){var t=e.elements||e;return s.create([this.anchor.elements[0]+t[0],this.anchor.elements[1]+t[1],this.anchor.elements[2]+(t[2]||0)],this.normal)},isParallelTo:function(e){var t;return e.normal?(t=this.normal.angleFrom(e.normal),Math.abs(t)<=a.precision||Math.abs(Math.PI-t)<=a.precision):e.direction?this.normal.isPerpendicularTo(e.direction):null},isPerpendicularTo:function(e){var t=this.normal.angleFrom(e.normal);return Math.abs(Math.PI/2-t)<=a.precision},distanceFrom:function(e){if(this.intersects(e)||this.contains(e))return 0;if(e.anchor){var t=this.anchor.elements,r=e.anchor.elements,n=this.normal.elements;return Math.abs((t[0]-r[0])*n[0]+(t[1]-r[1])*n[1]+(t[2]-r[2])*n[2])}var i=e.elements||e;return t=this.anchor.elements,n=this.normal.elements,Math.abs((t[0]-i[0])*n[0]+(t[1]-i[1])*n[1]+(t[2]-(i[2]||0))*n[2])},contains:function(e){if(e.normal)return null;if(e.direction)return this.contains(e.anchor)&&this.contains(e.anchor.add(e.direction));var t=e.elements||e,r=this.anchor.elements,n=this.normal.elements;return Math.abs(n[0]*(r[0]-t[0])+n[1]*(r[1]-t[1])+n[2]*(r[2]-(t[2]||0)))<=a.precision},intersects:function(e){return void 0===e.direction&&void 0===e.normal?null:!this.isParallelTo(e)},intersectionWith:function(e){if(!this.intersects(e))return null;if(e.direction){var t=e.anchor.elements,r=e.direction.elements,a=this.anchor.elements,s=((c=this.normal.elements)[0]*(a[0]-t[0])+c[1]*(a[1]-t[1])+c[2]*(a[2]-t[2]))/(c[0]*r[0]+c[1]*r[1]+c[2]*r[2]);return n.create([t[0]+r[0]*s,t[1]+r[1]*s,t[2]+r[2]*s])}if(e.normal){for(var u=this.normal.cross(e.normal).toUnitVector(),c=this.normal.elements,l=(t=this.anchor.elements,e.normal.elements),d=e.anchor.elements,f=i.Zero(2,2),h=0;f.isSingular();)h++,f=i.create([[c[h%3],c[(h+1)%3]],[l[h%3],l[(h+1)%3]]]);for(var p=f.inverse().elements,m=c[0]*t[0]+c[1]*t[1]+c[2]*t[2],v=l[0]*d[0]+l[1]*d[1]+l[2]*d[2],E=[p[0][0]*m+p[0][1]*v,p[1][0]*m+p[1][1]*v],y=[],g=1;g<=3;g++)y.push(h==g?0:E[(g+(5-h)%3)%3]);return o.create(y,u)}},pointClosestTo:function(e){var t=e.elements||e,r=this.anchor.elements,i=this.normal.elements,o=(r[0]-t[0])*i[0]+(r[1]-t[1])*i[1]+(r[2]-(t[2]||0))*i[2];return n.create([t[0]+i[0]*o,t[1]+i[1]*o,(t[2]||0)+i[2]*o])},rotate:function(e,t){var r=e.determinant?e.elements:i.Rotation(e,t.direction).elements,n=t.pointClosestTo(this.anchor).elements,o=this.anchor.elements,a=this.normal.elements,u=n[0],c=n[1],l=n[2],d=o[0]-u,f=o[1]-c,h=o[2]-l;return s.create([u+r[0][0]*d+r[0][1]*f+r[0][2]*h,c+r[1][0]*d+r[1][1]*f+r[1][2]*h,l+r[2][0]*d+r[2][1]*f+r[2][2]*h],[r[0][0]*a[0]+r[0][1]*a[1]+r[0][2]*a[2],r[1][0]*a[0]+r[1][1]*a[1]+r[1][2]*a[2],r[2][0]*a[0]+r[2][1]*a[1]+r[2][2]*a[2]])},reflectionIn:function(e){if(e.normal){var t=this.anchor.elements,r=this.normal.elements,n=t[0],i=t[1],o=t[2],a=r[0],u=r[1],c=r[2],l=this.anchor.reflectionIn(e).elements,d=n+a,f=i+u,h=o+c,p=e.pointClosestTo([d,f,h]).elements,m=[p[0]+(p[0]-d)-l[0],p[1]+(p[1]-f)-l[1],p[2]+(p[2]-h)-l[2]];return s.create(l,m)}if(e.direction)return this.rotate(Math.PI,e);var v=e.elements||e;return s.create(this.anchor.reflectionIn([v[0],v[1],v[2]||0]),this.normal)},setVectors:function(e,t,r){if(null===(e=(e=n.create(e)).to3D()))return null;if(null===(t=(t=n.create(t)).to3D()))return null;if(void 0===r)r=null;else if(null===(r=(r=n.create(r)).to3D()))return null;var i,o,a=e.elements[0],s=e.elements[1],u=e.elements[2],c=t.elements[0],l=t.elements[1],d=t.elements[2];if(null!==r){var f=r.elements[0],h=r.elements[1],p=r.elements[2];if(0===(o=(i=n.create([(l-s)*(p-u)-(d-u)*(h-s),(d-u)*(f-a)-(c-a)*(p-u),(c-a)*(h-s)-(l-s)*(f-a)])).modulus()))return null;i=n.create([i.elements[0]/o,i.elements[1]/o,i.elements[2]/o])}else{if(0===(o=Math.sqrt(c*c+l*l+d*d)))return null;i=n.create([t.elements[0]/o,t.elements[1]/o,t.elements[2]/o])}return this.anchor=e,this.normal=i,this}},s.create=function(e,t,r){return(new s).setVectors(e,t,r)},s.XY=s.create(n.Zero(3),n.k),s.YZ=s.create(n.Zero(3),n.i),s.ZX=s.create(n.Zero(3),n.j),s.YX=s.XY,s.ZY=s.YZ,s.XZ=s.ZX,s.fromPoints=function(e){var t,r,i,o,u,c,l,d,f,h,p=e.length,m=[],v=n.Zero(3);for(t=0;t<p;t++){if(null===(r=n.create(e[t]).to3D()))return null;if(m.push(r),(i=m.length)>2){if(u=m[i-1].elements,c=m[i-2].elements,l=m[i-3].elements,o=n.create([(u[1]-c[1])*(l[2]-c[2])-(u[2]-c[2])*(l[1]-c[1]),(u[2]-c[2])*(l[0]-c[0])-(u[0]-c[0])*(l[2]-c[2]),(u[0]-c[0])*(l[1]-c[1])-(u[1]-c[1])*(l[0]-c[0])]).toUnitVector(),i>3&&null!==(f=o.angleFrom(h))&&!(Math.abs(f)<=a.precision||Math.abs(f-Math.PI)<=a.precision))return null;v=v.add(o),h=o}}return u=m[1].elements,c=m[0].elements,l=m[i-1].elements,d=m[i-2].elements,v=v.add(n.create([(u[1]-c[1])*(l[2]-c[2])-(u[2]-c[2])*(l[1]-c[1]),(u[2]-c[2])*(l[0]-c[0])-(u[0]-c[0])*(l[2]-c[2]),(u[0]-c[0])*(l[1]-c[1])-(u[1]-c[1])*(l[0]-c[0])]).toUnitVector()).add(n.create([(c[1]-l[1])*(d[2]-l[2])-(c[2]-l[2])*(d[1]-l[1]),(c[2]-l[2])*(d[0]-l[0])-(c[0]-l[0])*(d[2]-l[2]),(c[0]-l[0])*(d[1]-l[1])-(c[1]-l[1])*(d[0]-l[0])]).toUnitVector()),s.create(m[0],v)},e.exports=s},335:e=>{Math.sign=function(e){return e<0?-1:1},e.exports={precision:1e-6,approxPrecision:1e-5}},4983:(e,t,r)=>{var n=r(335),i=r(6831);function o(){}o.prototype={norm:function(){for(var e=this.elements.length,t=0;e--;)t+=Math.pow(this.elements[e],2);return Math.sqrt(t)},e:function(e){return e<1||e>this.elements.length?null:this.elements[e-1]},dimensions:function(){return{rows:1,cols:this.elements.length}},rows:function(){return 1},cols:function(){return this.elements.length},modulus:function(){return Math.sqrt(this.dot(this))},eql:function(e){var t=this.elements.length,r=e.elements||e;if(t!=r.length)return!1;for(;t--;)if(Math.abs(this.elements[t]-r[t])>n.precision)return!1;return!0},dup:function(){return o.create(this.elements)},map:function(e){var t=[];return this.each((function(r,n){t.push(e(r,n))})),o.create(t)},each:function(e){for(var t=this.elements.length,r=0;r<t;r++)e(this.elements[r],r+1)},toUnitVector:function(){var e=this.modulus();return 0===e?this.dup():this.map((function(t){return t/e}))},angleFrom:function(e){var t=e.elements||e;if(this.elements.length!=t.length)return null;var r=0,n=0,i=0;if(this.each((function(e,o){r+=e*t[o-1],n+=e*e,i+=t[o-1]*t[o-1]})),n=Math.sqrt(n),i=Math.sqrt(i),n*i==0)return null;var o=r/(n*i);return o<-1&&(o=-1),o>1&&(o=1),Math.acos(o)},isParallelTo:function(e){var t=this.angleFrom(e);return null===t?null:t<=n.precision},isAntiparallelTo:function(e){var t=this.angleFrom(e);return null===t?null:Math.abs(t-Math.PI)<=n.precision},isPerpendicularTo:function(e){var t=this.dot(e);return null===t?null:Math.abs(t)<=n.precision},add:function(e){var t=e.elements||e;return this.elements.length!=t.length?this.map((function(t){return t+e})):this.map((function(e,r){return e+t[r-1]}))},subtract:function(e){if("number"==typeof e)return this.map((function(t){return t-e}));var t=e.elements||e;return this.elements.length!=t.length?null:this.map((function(e,r){return e-t[r-1]}))},multiply:function(e){return this.map((function(t){return t*e}))},elementMultiply:function(e){return this.map((function(t,r){return e.e(r)*t}))},sum:function(){var e=0;return this.map((function(t){e+=t})),e},chomp:function(e){for(var t=[],r=e;r<this.elements.length;r++)t.push(this.elements[r]);return o.create(t)},top:function(e){for(var t=[],r=0;r<e;r++)t.push(this.elements[r]);return o.create(t)},augment:function(e){for(var t=this.elements,r=0;r<e.length;r++)t.push(e[r]);return o.create(t)},x:function(e){return this.multiply(e)},log:function(){return o.log(this)},elementDivide:function(e){return this.map((function(t,r){return t/e.e(r)}))},product:function(){var e=1;return this.map((function(t){e*=t})),e},dot:function(e){var t=e.elements||e,r=0,n=this.elements.length;if(n!=t.length)return null;for(;n--;)r+=this.elements[n]*t[n];return r},cross:function(e){var t=e.elements||e;if(3!=this.elements.length||3!=t.length)return null;var r=this.elements;return o.create([r[1]*t[2]-r[2]*t[1],r[2]*t[0]-r[0]*t[2],r[0]*t[1]-r[1]*t[0]])},max:function(){for(var e=0,t=this.elements.length;t--;)Math.abs(this.elements[t])>Math.abs(e)&&(e=this.elements[t]);return e},maxIndex:function(){for(var e=0,t=this.elements.length,r=-1;t--;)Math.abs(this.elements[t])>Math.abs(e)&&(e=this.elements[t],r=t+1);return r},indexOf:function(e){for(var t=null,r=this.elements.length,n=0;n<r;n++)null===t&&this.elements[n]==e&&(t=n+1);return t},toDiagonalMatrix:function(){return i.Diagonal(this.elements)},round:function(){return this.map((function(e){return Math.round(e)}))},transpose:function(){for(var e=this.elements.length,t=[],r=0;r<e;r++)t.push([this.elements[r]]);return i.create(t)},snapTo:function(e){return this.map((function(t){return Math.abs(t-e)<=n.precision?e:t}))},distanceFrom:function(e){if(e.anchor||e.start&&e.end)return e.distanceFrom(this);var t=e.elements||e;if(t.length!=this.elements.length)return null;var r,n=0;return this.each((function(e,i){r=e-t[i-1],n+=r*r})),Math.sqrt(n)},liesOn:function(e){return e.contains(this)},liesIn:function(e){return e.contains(this)},rotate:function(e,t){var r,n,a,s,u=null;switch(e.determinant&&(u=e.elements),this.elements.length){case 2:return 2!=(r=t.elements||t).length?null:(u||(u=i.Rotation(e).elements),n=this.elements[0]-r[0],a=this.elements[1]-r[1],o.create([r[0]+u[0][0]*n+u[0][1]*a,r[1]+u[1][0]*n+u[1][1]*a]));case 3:if(!t.direction)return null;var c=t.pointClosestTo(this).elements;return u||(u=i.Rotation(e,t.direction).elements),n=this.elements[0]-c[0],a=this.elements[1]-c[1],s=this.elements[2]-c[2],o.create([c[0]+u[0][0]*n+u[0][1]*a+u[0][2]*s,c[1]+u[1][0]*n+u[1][1]*a+u[1][2]*s,c[2]+u[2][0]*n+u[2][1]*a+u[2][2]*s]);default:return null}},reflectionIn:function(e){if(e.anchor){var t=this.elements.slice(),r=e.pointClosestTo(t).elements;return o.create([r[0]+(r[0]-t[0]),r[1]+(r[1]-t[1]),r[2]+(r[2]-(t[2]||0))])}var n=e.elements||e;return this.elements.length!=n.length?null:this.map((function(e,t){return n[t-1]+(n[t-1]-e)}))},to3D:function(){var e=this.dup();switch(e.elements.length){case 3:break;case 2:e.elements.push(0);break;default:return null}return e},inspect:function(){return"["+this.elements.join(", ")+"]"},setElements:function(e){return this.elements=(e.elements||e).slice(),this}},o.create=function(e){return(new o).setElements(e)},o.i=o.create([1,0,0]),o.j=o.create([0,1,0]),o.k=o.create([0,0,1]),o.Random=function(e){for(var t=[];e--;)t.push(Math.random());return o.create(t)},o.Fill=function(e,t){for(var r=[];e--;)r.push(t);return o.create(r)},o.Zero=function(e){return o.Fill(e,0)},o.One=function(e){return o.Fill(e,1)},o.log=function(e){return e.map((function(e){return Math.log(e)}))},e.exports=o},58:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Attribute=void 0,t.Attribute={COMMAND:"data-command",FULL_NAME:"data-full-name",NAME:"data-name",PID:"data-pid",UDID:"data-udid",URL:"data-url",USE_PROXY:"data-use-proxy",SECURE:"data-secure",HOSTNAME:"data-hostname",PORT:"data-port",VALUE:"data-value"}},8535:(e,t,r)=>{"use strict";var n=r(8764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.DisplayInfo=void 0;var i=r(655).__importDefault(r(8626)),o=function(){function e(e,t,r,n,i){this.displayId=e,this.size=t,this.rotation=r,this.layerStack=n,this.flags=i}return e.prototype.toBuffer=function(){var t=n.alloc(e.BUFFER_LENGTH),r=0;return r=t.writeInt32BE(this.displayId,r),r=t.writeInt32BE(this.size.width,r),r=t.writeInt32BE(this.size.height,r),r=t.writeInt32BE(this.rotation,r),r=t.writeInt32BE(this.layerStack,r),t.writeInt32BE(this.flags,r),t},e.prototype.toString=function(){return"DisplayInfo{displayId=".concat(this.displayId,", size=").concat(this.size,", rotation=").concat(this.rotation,", layerStack=").concat(this.layerStack,", flags=").concat(this.flags,"}")},e.fromBuffer=function(t){if(t.length!==e.BUFFER_LENGTH)throw Error("Incorrect buffer length. Expected: ".concat(e.BUFFER_LENGTH,", received: ").concat(t.length));var r=0,n=t.readInt32BE(r);r+=4;var o=t.readInt32BE(r);r+=4;var a=t.readInt32BE(r);r+=4;var s=t.readInt32BE(r);r+=4;var u=t.readInt32BE(r);r+=4;var c=t.readInt32BE(r);return new e(n,new i.default(o,a),s,u,c)},e.DEFAULT_DISPLAY=0,e.FLAG_ROUND=16,e.FLAG_PRESENTATION=8,e.FLAG_PRIVATE=4,e.FLAG_SECURE=2,e.FLAG_SUPPORTS_PROTECTED_BUFFERS=1,e.INVALID_DISPLAY=-1,e.BUFFER_LENGTH=24,e}();t.DisplayInfo=o},8207:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.ACTION_DOWN=0,e.ACTION_UP=1,e.ACTION_MOVE=2,e.BUTTON_PRIMARY=1,e.BUTTON_SECONDARY=2,e.BUTTON_TERTIARY=4,e}();t.default=r},7306:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){this.x=Math.round(e),this.y=Math.round(t)}return e.prototype.equals=function(e){return this===e||null!==e&&this.x===e.x&&this.y===e.y},e.prototype.distance=function(e){var t=this.x-e.x,r=this.y-e.y;return Math.sqrt(t*t+r*r)},e.prototype.toString=function(){return"Point{x=".concat(this.x,", y=").concat(this.y,"}")},e.prototype.toJSON=function(){return{x:this.x,y:this.y}},e}();t.default=r},4186:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(655).__importDefault(r(7306)),i=function(){function e(e,t){this.point=e,this.screenSize=t}return e.prototype.equals=function(e){return this===e||null!==e&&this.point.equals(e.point)&&this.screenSize.equals(e.screenSize)},e.prototype.rotate=function(t){switch(t){case 1:return new e(new n.default(this.screenSize.height-this.point.y,this.point.x),this.screenSize.rotate());case 2:return new e(new n.default(this.screenSize.width-this.point.x,this.screenSize.height-this.point.y),this.screenSize);case 3:return new e(new n.default(this.point.y,this.screenSize.width-this.point.x),this.screenSize.rotate());default:return this}},e.prototype.toString=function(){return"Position{point=".concat(this.point,", screenSize=").concat(this.screenSize,"}")},e.prototype.toJSON=function(){return{point:this.point.toJSON(),screenSize:this.screenSize.toJSON()}},e}();t.default=i},4748:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t,r,n){this.left=e,this.top=t,this.right=r,this.bottom=n,this.left=e,this.top=t,this.right=r,this.bottom=n}return e.equals=function(e,t){return!e&&!t||!!e&&!!t&&e.equals(t)},e.copy=function(t){return t?new e(t.left,t.top,t.right,t.bottom):null},e.prototype.equals=function(e){return this===e||!!e&&this.left===e.left&&this.top===e.top&&this.right===e.right&&this.bottom===e.bottom},e.prototype.getWidth=function(){return this.right-this.left},e.prototype.getHeight=function(){return this.bottom-this.top},e.prototype.toString=function(){return"Rect{left=".concat(this.left,", top=").concat(this.top,", right=").concat(this.right,", bottom=").concat(this.bottom,"}")},e.prototype.toJSON=function(){return{left:this.left,right:this.right,top:this.top,bottom:this.bottom}},e}();t.default=r},7197:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(655),i=n.__importDefault(r(4748)),o=n.__importDefault(r(8626)),a=function(){function e(e,t,r){this.contentRect=e,this.videoSize=t,this.deviceRotation=r}return e.fromBuffer=function(t){var r=t.readInt32BE(0),n=t.readInt32BE(4),a=t.readInt32BE(8),s=t.readInt32BE(12),u=t.readInt32BE(16),c=t.readInt32BE(20),l=t.readUInt8(24);return new e(new i.default(r,n,a,s),new o.default(u,c),l)},e.prototype.equals=function(e){return!!e&&this.contentRect.equals(e.contentRect)&&this.videoSize.equals(e.videoSize)&&this.deviceRotation===e.deviceRotation},e.prototype.toString=function(){return"ScreenInfo{contentRect=".concat(this.contentRect,", videoSize=").concat(this.videoSize,", deviceRotation=").concat(this.deviceRotation,"}")},e.BUFFER_LENGTH=25,e}();t.default=a},8626:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){this.width=e,this.height=t,this.w=e,this.h=t}return e.equals=function(e,t){return!e&&!t||!!e&&!!t&&e.equals(t)},e.copy=function(t){return t?new e(t.width,t.height):null},e.prototype.length=function(){return this.w*this.h},e.prototype.rotate=function(){return new e(this.height,this.width)},e.prototype.equals=function(e){return this===e||!!e&&this.width===e.width&&this.height===e.height},e.prototype.intersect=function(t){if(!t)return this;var r=Math.min(this.height,t.height);return new e(Math.min(this.width,t.width),r)},e.prototype.getHalfSize=function(){return new e(this.width>>>1,this.height>>>1)},e.prototype.toString=function(){return"Size{width=".concat(this.width,", height=").concat(this.height,"}")},e.prototype.toJSON=function(){return{width:this.width,height:this.height}},e}();t.default=r},2886:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.Backquote="Backquote",e.Backslash="Backslash",e.BracketLeft="BracketLeft",e.BracketRight="BracketRight",e.Comma="Comma",e.Digit0="Digit0",e.Digit1="Digit1",e.Digit2="Digit2",e.Digit3="Digit3",e.Digit4="Digit4",e.Digit5="Digit5",e.Digit6="Digit6",e.Digit7="Digit7",e.Digit8="Digit8",e.Digit9="Digit9",e.Equal="Equal",e.IntlBackslash="IntlBackslash",e.IntlRo="IntlRo",e.IntlYen="IntlYen",e.KeyA="KeyA",e.KeyB="KeyB",e.KeyC="KeyC",e.KeyD="KeyD",e.KeyE="KeyE",e.KeyF="KeyF",e.KeyG="KeyG",e.KeyH="KeyH",e.KeyI="KeyI",e.KeyJ="KeyJ",e.KeyK="KeyK",e.KeyL="KeyL",e.KeyM="KeyM",e.KeyN="KeyN",e.KeyO="KeyO",e.KeyP="KeyP",e.KeyQ="KeyQ",e.KeyR="KeyR",e.KeyS="KeyS",e.KeyT="KeyT",e.KeyU="KeyU",e.KeyV="KeyV",e.KeyW="KeyW",e.KeyX="KeyX",e.KeyY="KeyY",e.KeyZ="KeyZ",e.Minus="Minus",e.Period="Period",e.Quote="Quote",e.Semicolon="Semicolon",e.Slash="Slash",e.AltLeft="AltLeft",e.AltRight="AltRight",e.Backspace="Backspace",e.CapsLock="CapsLock",e.ContextMenu="ContextMenu",e.ControlLeft="ControlLeft",e.ControlRight="ControlRight",e.Enter="Enter",e.MetaLeft="MetaLeft",e.MetaRight="MetaRight",e.ShiftLeft="ShiftLeft",e.ShiftRight="ShiftRight",e.Space="Space",e.Tab="Tab",e.Convert="Convert",e.KanaMode="KanaMode",e.Lang1="Lang1",e.Lang2="Lang2",e.Lang3="Lang3",e.Lang4="Lang4",e.Lang5="Lang5",e.NonConvert="NonConvert",e.Delete="Delete",e.End="End",e.Help="Help",e.Home="Home",e.Insert="Insert",e.PageDown="PageDown",e.PageUp="PageUp",e.ArrowDown="ArrowDown",e.ArrowLeft="ArrowLeft",e.ArrowRight="ArrowRight",e.ArrowUp="ArrowUp",e.NumLock="NumLock",e.Numpad0="Numpad0",e.Numpad1="Numpad1",e.Numpad2="Numpad2",e.Numpad3="Numpad3",e.Numpad4="Numpad4",e.Numpad5="Numpad5",e.Numpad6="Numpad6",e.Numpad7="Numpad7",e.Numpad8="Numpad8",e.Numpad9="Numpad9",e.NumpadAdd="NumpadAdd",e.NumpadBackspace="NumpadBackspace",e.NumpadClear="NumpadClear",e.NumpadClearEntry="NumpadClearEntry",e.NumpadComma="NumpadComma",e.NumpadDecimal="NumpadDecimal",e.NumpadDivide="NumpadDivide",e.NumpadEnter="NumpadEnter",e.NumpadEqual="NumpadEqual",e.NumpadHash="NumpadHash",e.NumpadMemoryAdd="NumpadMemoryAdd",e.NumpadMemoryClear="NumpadMemoryClear",e.NumpadMemoryRecall="NumpadMemoryRecall",e.NumpadMemoryStore="NumpadMemoryStore",e.NumpadMemorySubtract="NumpadMemorySubtract",e.NumpadMultiply="NumpadMultiply",e.NumpadParenLeft="NumpadParenLeft",e.NumpadParenRight="NumpadParenRight",e.NumpadStar="NumpadStar",e.NumpadSubtract="NumpadSubtract",e.Escape="Escape",e.F1="F1",e.F2="F2",e.F3="F3",e.F4="F4",e.F5="F5",e.F6="F6",e.F7="F7",e.F8="F8",e.F9="F9",e.F10="F10",e.F11="F11",e.F12="F12",e.Fn="Fn",e.FnLock="FnLock",e.PrintScreen="PrintScreen",e.ScrollLock="ScrollLock",e.Pause="Pause",e.BrowserBack="BrowserBack",e.BrowserFavorites="BrowserFavorites",e.BrowserForward="BrowserForward",e.BrowserHome="BrowserHome",e.BrowserRefresh="BrowserRefresh",e.BrowserSearch="BrowserSearch",e.BrowserStop="BrowserStop",e.Eject="Eject",e.LaunchApp1="LaunchApp1",e.LaunchApp2="LaunchApp2",e.LaunchMail="LaunchMail",e.MediaPlayPause="MediaPlayPause",e.MediaSelect="MediaSelect",e.MediaStop="MediaStop",e.MediaTrackNext="MediaTrackNext",e.MediaTrackPrevious="MediaTrackPrevious",e.Power="Power",e.Sleep="Sleep",e.AudioVolumeDown="AudioVolumeDown",e.AudioVolumeMute="AudioVolumeMute",e.AudioVolumeUp="AudioVolumeUp",e.WakeUp="WakeUp",e.Hyper="Hyper",e.Super="Super",e.Turbo="Turbo",e.Abort="Abort",e.Resume="Resume",e.Suspend="Suspend",e.Again="Again",e.Copy="Copy",e.Cut="Cut",e.Find="Find",e.Open="Open",e.Paste="Paste",e.Props="Props",e.Select="Select",e.Undo="Undo",e.Hiragana="Hiragana",e.Katakana="Katakana",e.Unidentified="Unidentified",e}();t.default=r},8281:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.filterTrailingZeroes=function(e){var t=0;return e.reverse().filter((function(e){return t||(t=e)})).reverse()},e.prettyBytes=function(t){for(var r=0;t>=512;)r++,t/=1024;return"".concat(t.toFixed(r?1:0)).concat(e.SUFFIX[r])},e.escapeUdid=function(e){return"udid_"+e.replace(/[. :]/g,"_")},e.parse=function(e,t,r){var n=e.get(t);if(r&&null===n)throw TypeError('Missing required parameter "'.concat(t,'"'));return n},e.parseString=function(e,t,r){var n=e.get(t);if(r&&null===n)throw TypeError('Missing required parameter "'.concat(t,'"'));return n||""},e.parseBoolean=function(e,t,r){var n=this.parse(e,t,r);return"1"===n||!!n&&"true"===n.toString()},e.parseInt=function(e,t,r){var n=this.parse(e,t,r);if(null===n)return 0;var i=parseInt(n,10);return isNaN(i)?0:i},e.parseBooleanEnv=function(e){return"boolean"==typeof e?e:null!=e?(Array.isArray(e)&&(e=e[e.length-1]),"1"===e||"true"===e.toLowerCase()):void 0},e.parseStringEnv=function(e){if(null!=e)return Array.isArray(e)&&(e=e[e.length-1]),e},e.parseIntEnv=function(e){if("number"==typeof e)return e;if(null!=e){Array.isArray(e)&&(e=e[e.length-1]);var t=parseInt(e,10);if(!isNaN(t))return t}},e.utf8ByteArrayToString=function(e){for(var t=[],r=0,n=0;r<e.length;){var i=e[r++];if(i<128)t[n++]=String.fromCharCode(i);else if(i>191&&i<224){var o=e[r++];t[n++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&(o=e[r++]))<<12|(63&(s=e[r++]))<<6|63&e[r++])-65536;t[n++]=String.fromCharCode(55296+(a>>10)),t[n++]=String.fromCharCode(56320+(1023&a))}else{o=e[r++];var s=e[r++];t[n++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return t.join("")},e.supportsPassive=function(){if("boolean"==typeof e.supportsPassiveValue)return e.supportsPassiveValue;var t=!1;try{var r=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassive",null,r),window.removeEventListener("testPassive",null,r)}catch(e){}return e.supportsPassiveValue=t},e.setImmediate=function(e){Promise.resolve().then(e)},e.SUFFIX={0:"B",1:"KiB",2:"MiB",3:"GiB",4:"TiB"},e.stringToUtf8ByteArray=function(e){for(var t=[],r=0,n=0;n<e.length;n++){var i=e.charCodeAt(n);i<128?t[r++]=i:i<2048?(t[r++]=i>>6|192,t[r++]=63&i|128):55296==(64512&i)&&n+1<e.length&&56320==(64512&e.charCodeAt(n+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++n)),t[r++]=i>>18|240,t[r++]=i>>12&63|128,t[r++]=i>>6&63|128,t[r++]=63&i|128):(t[r++]=i>>12|224,t[r++]=i>>6&63|128,t[r++]=63&i|128)}return Uint8Array.from(t)},e}();t.default=r},8442:(e,t,r)=>{"use strict";var n=r(8764).Buffer;Object.defineProperty(t,"__esModule",{value:!0});var i=r(655),o=i.__importDefault(r(4748)),a=i.__importDefault(r(8626)),s=i.__importDefault(r(8281)),u=function(){function e(t,r){void 0===r&&(r=e.BASE_BUFFER_LENGTH),this.bytesLength=r,this.crop=null,this.bitrate=0,this.bounds=null,this.maxFps=0,this.iFrameInterval=0,this.sendFrameMeta=!1,this.lockedVideoOrientation=-1,this.displayId=0,t&&(this.crop=t.crop,this.bitrate=t.bitrate,this.bounds=t.bounds,this.maxFps=t.maxFps,this.iFrameInterval=t.iFrameInterval,this.sendFrameMeta=t.sendFrameMeta||!1,this.lockedVideoOrientation=t.lockedVideoOrientation||-1,"number"==typeof t.displayId&&!isNaN(t.displayId)&&t.displayId>=0&&(this.displayId=t.displayId),t.codecOptions&&(this.codecOptions=t.codecOptions.trim()),t.encoderName&&(this.encoderName=t.encoderName.trim()))}return e.fromBuffer=function(t){var r=0,n=t.readInt32BE(r);r+=4;var i=t.readInt32BE(r);r+=4;var u=t.readInt8(r);r+=1;var c=t.readInt16BE(r);r+=2;var l=t.readInt16BE(r);r+=2;var d=t.readInt16BE(r);r+=2;var f=t.readInt16BE(r);r+=2;var h=t.readInt16BE(r);r+=2;var p=t.readInt16BE(r);r+=2;var m=!!t.readInt8(r);r+=1;var v=t.readInt8(r);r+=1;var E=t.readInt32BE(r);r+=4;var y,g,_=null,S=null;0!==c&&0!==l&&(_=new a.default(c,l)),(d||f||h||p)&&(S=new o.default(d,f,h,p));var C=t.readInt32BE(r);if(r+=4,C){var T=t.slice(r,r+C);r+=C,y=s.default.utf8ByteArrayToString(T)}var b=t.readInt32BE(r);if(r+=4,b){var w=t.slice(r,r+b);r+=b,g=s.default.utf8ByteArrayToString(w)}return new e({crop:S,bitrate:n,bounds:_,maxFps:i,iFrameInterval:u,lockedVideoOrientation:v,displayId:E,sendFrameMeta:m,codecOptions:y,encoderName:g},r)},e.copy=function(t){return new e({bitrate:t.bitrate,crop:o.default.copy(t.crop),bounds:a.default.copy(t.bounds),maxFps:t.maxFps,iFrameInterval:t.iFrameInterval,lockedVideoOrientation:t.lockedVideoOrientation,displayId:t.displayId,sendFrameMeta:t.sendFrameMeta,codecOptions:t.codecOptions,encoderName:t.encoderName},t.bytesLength)},e.prototype.equals=function(e){return!!e&&this.encoderName===e.encoderName&&this.codecOptions===e.codecOptions&&o.default.equals(this.crop,e.crop)&&this.lockedVideoOrientation===e.lockedVideoOrientation&&this.displayId===e.displayId&&a.default.equals(this.bounds,e.bounds)&&this.bitrate===e.bitrate&&this.maxFps===e.maxFps&&this.iFrameInterval===e.iFrameInterval},e.prototype.toBuffer=function(){var t,r,i=0;this.codecOptions&&(i+=(t=s.default.stringToUtf8ByteArray(this.codecOptions)).length),this.encoderName&&(i+=(r=s.default.stringToUtf8ByteArray(this.encoderName)).length);var o=n.alloc(e.BASE_BUFFER_LENGTH+i),a=this.bounds||{},u=a.width,c=void 0===u?0:u,l=a.height,d=void 0===l?0:l,f=this.crop||{},h=f.left,p=void 0===h?0:h,m=f.top,v=void 0===m?0:m,E=f.right,y=void 0===E?0:E,g=f.bottom,_=void 0===g?0:g,S=0;return S=o.writeInt32BE(this.bitrate,S),S=o.writeInt32BE(this.maxFps,S),S=o.writeInt8(this.iFrameInterval,S),S=o.writeInt16BE(c,S),S=o.writeInt16BE(d,S),S=o.writeInt16BE(p,S),S=o.writeInt16BE(v,S),S=o.writeInt16BE(y,S),S=o.writeInt16BE(_,S),S=o.writeInt8(this.sendFrameMeta?1:0,S),S=o.writeInt8(this.lockedVideoOrientation,S),S=o.writeInt32BE(this.displayId,S),t?(S=o.writeInt32BE(t.length,S),o.fill(t,S),S+=t.length):S=o.writeInt32BE(0,S),r?(S=o.writeInt32BE(r.length,S),o.fill(r,S),S+=r.length):o.writeInt32BE(0,S),o},e.prototype.toString=function(){return"VideoSettings{bitrate=".concat(this.bitrate,", maxFps=").concat(this.maxFps,", iFrameInterval=").concat(this.iFrameInterval,", bounds=").concat(this.bounds,", crop=").concat(this.crop,", metaFrame=").concat(this.sendFrameMeta,", lockedVideoOrientation=").concat(this.lockedVideoOrientation,", displayId=").concat(this.displayId,", codecOptions=").concat(this.codecOptions,", encoderName=").concat(this.encoderName,"}")},e.prototype.toJSON=function(){return{bitrate:this.bitrate,maxFps:this.maxFps,iFrameInterval:this.iFrameInterval,bounds:this.bounds,crop:this.crop,sendFrameMeta:this.sendFrameMeta,lockedVideoOrientation:this.lockedVideoOrientation,displayId:this.displayId,codecOptions:this.codecOptions,encoderName:this.encoderName}},e.BASE_BUFFER_LENGTH=35,e}();t.default=u},8082:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DeviceTracker=void 0;var n,i=r(655),o=r(1286),a=r(483),s=i.__importDefault(r(8281)),u=r(9416),c=r(6417),l=r(6222),d=function(e){function t(r,n){var o=e.call(this,i.__assign(i.__assign({},r),{action:t.ACTION}),n)||this;return o.tableId="appl_devices_list",t.instancesByUrl.set(n,o),o.buildDeviceTable(),o.openNewConnection(),o}return i.__extends(t,e),t.start=function(e){var r=this.buildUrlForTracker(e).toString(),n=this.instancesByUrl.get(r);return n||(n=new t(e,r)),n},t.getInstance=function(e){return this.start(e)},t.prototype.onSocketOpen=function(){},t.prototype.buildDeviceRow=function(e,r){var o=this,a="".concat(this.id,"_").concat(s.default.escapeUdid(r.udid)),l=r.state===c.DeviceState.CONNECTED,d="device_services_".concat(a),f=(0,u.html)(n||(n=i.__makeTemplateObject(['<div class="device ','">\n            <div class="device-header">\n                <div class="device-name">"','"</div>\n                <div class="device-model">','</div>\n                <div class="device-serial">','</div>\n                <div class="device-version">\n                    <div class="release-version">','</div>\n                </div>\n                <div class="device-state" title="State: ','"></div>\n            </div>\n            <div id="','" class="services"></div>\n        </div>'],['<div class="device ','">\n            <div class="device-header">\n                <div class="device-name">"','"</div>\n                <div class="device-model">','</div>\n                <div class="device-serial">','</div>\n                <div class="device-version">\n                    <div class="release-version">','</div>\n                </div>\n                <div class="device-state" title="State: ','"></div>\n            </div>\n            <div id="','" class="services"></div>\n        </div>'])),l?"active":"not-active",r.name,r.model,r.udid,r.version,r.state,d).content,h=f.getElementById(d);h&&(t.tools.forEach((function(e){var t=e.createEntryForDeviceList(r,"desc-block",o.params);t&&(Array.isArray(t)?t.forEach((function(e){e&&h.appendChild(e)})):h.appendChild(t))})),e.appendChild(f))},t.prototype.getChannelCode=function(){return l.ChannelCode.ATRC},t.ACTION=a.ACTION.APPL_DEVICE_LIST,t.tools=new Set,t.instancesByUrl=new Map,t}(o.BaseDeviceTracker);t.DeviceTracker=d},6257:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseClient=void 0;var n=r(655),i=r(1069),o=n.__importDefault(r(8281)),a=function(e){function t(t){var r=e.call(this)||this;return r.title="BaseClient",r.params=t,r}return n.__extends(t,e),t.parseParameters=function(e){var t=o.default.parseStringEnv(e.get("action"));if(!t)throw TypeError("Invalid action");return{action:t,useProxy:o.default.parseBooleanEnv(e.get("useProxy")),secure:o.default.parseBooleanEnv(e.get("secure")),hostname:o.default.parseStringEnv(e.get("hostname")),port:o.default.parseIntEnv(e.get("port"))}},t.prototype.setTitle=function(e){void 0===e&&(e=this.title);var t=document.querySelector("head > title");t||(t=document.createElement("title")),t.innerText=e},t.prototype.setBodyClass=function(e){document.body.className=e},t}(i.TypedEmitter);t.BaseClient=a},1286:(e,t,r)=>{"use strict";var n=r(8764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.BaseDeviceTracker=void 0;var i,o=r(655),a=r(1342),s=r(9416),u=o.__importDefault(r(8281)),c="[BaseDeviceTracker]",l=function(e){function t(r,n){var i=e.call(this,r)||this;return i.directUrl=n,i.title="Device list",i.tableId="base_device_list",i.descriptors=[],i.trackerName="",i.id="",i.created=!1,i.messageId=0,i.elementId="tracker_instance".concat(++t.instanceId),i.trackerName="Unavailable. Host: ".concat(r.hostname,", type: ").concat(r.type),i.setBodyClass("list"),i.setTitle(),i}return o.__extends(t,e),t.registerTool=function(e){this.tools.add(e)},t.buildUrl=function(e){var t=e.secure,r=e.port,n=e.hostname,i=new URL("".concat(t?"wss:":"ws:","//").concat(n));return r&&(i.port=r.toString()),i},t.buildUrlForTracker=function(e){var t=this.buildUrl(e);return t.searchParams.set("action",this.ACTION),t},t.buildLink=function(e,t,r){var n=r.hostname,i=r.port,o=r.secure?"https:":"http:";r.useProxy&&(e.hostname=n,e.port=i,e.secure=r.secure,e.useProxy=!0,o=location.protocol,n=location.hostname,i=location.port);var a="#!".concat(new URLSearchParams(e).toString()),s=document.createElement("a");return s.setAttribute("href","".concat(o,"//").concat(n,":").concat(i,"/").concat(a)),s.setAttribute("rel","noopener noreferrer"),s.setAttribute("target","_blank"),s.classList.add("link-".concat(e.action)),s.innerText=t,s},t.parseParameters=function(t){var r=e.parseParameters.call(this,t),n=u.default.parseString(t,"type",!0);if("android"!==n&&"ios"!==n)throw Error("Incorrect type");return o.__assign(o.__assign({},r),{type:n})},t.prototype.getNextId=function(){return++this.messageId},t.prototype.buildDeviceTable=function(){var e=this,t=this.descriptors,r=this.getOrCreateTableHolder(),n=this.getOrBuildTableBody(r),i=this.getOrCreateTrackerBlock(n,this.trackerName);t.forEach((function(t){e.buildDeviceRow(i,t)}))},t.prototype.setNameValue=function(e,t){if(e){var r="".concat(this.elementId,"_name"),n=document.getElementById(r);n||((n=document.createElement("div")).id=r,n.className="tracker-name"),n.innerText=t,e.insertBefore(n,e.firstChild)}},t.prototype.getOrCreateTrackerBlock=function(e,t){var r=document.getElementById(this.elementId);if(r)for(;r.children.length;)r.removeChild(r.children[0]);else(r=document.createElement("div")).id=this.elementId,e.appendChild(r),this.created=!0;return this.setNameValue(r,t),r},t.prototype.onSocketClose=function(e){var t=this;this.destroyed||(console.log(c,"Connection closed: ".concat(e.reason)),setTimeout((function(){t.openNewConnection()}),2e3))},t.prototype.onSocketMessage=function(e){var r;try{r=JSON.parse(e.data)}catch(e){return console.error(c,e.message),void console.log(c,e.data)}switch(r.type){case t.ACTION_LIST:var n=r.data;this.descriptors=n.list,this.setIdAndHostName(n.id,n.name),this.buildDeviceTable();break;case t.ACTION_DEVICE:var i=r.data;this.setIdAndHostName(i.id,i.name),this.updateDescriptor(i.device),this.buildDeviceTable();break;default:console.log(c,"Unknown message type: ".concat(r.type))}},t.prototype.setIdAndHostName=function(e,t){this.id===e&&this.trackerName===t||(this.id=e,this.trackerName=t,this.setNameValue(document.getElementById(this.elementId),t))},t.prototype.getOrCreateTableHolder=function(){var e=t.HOLDER_ELEMENT_ID,r=document.getElementById(e);return r||((r=document.createElement("div")).id=e,r.className="table-wrapper",document.body.appendChild(r)),r},t.prototype.updateDescriptor=function(e){var t=this.descriptors.findIndex((function(t){return t.udid===e.udid}));-1!==t?this.descriptors[t]=e:this.descriptors.push(e)},t.prototype.getOrBuildTableBody=function(e){var r="device-list",n=document.querySelector("#".concat(t.HOLDER_ELEMENT_ID," #").concat(this.tableId,".").concat(r));if(!n){var a=(0,s.html)(i||(i=o.__makeTemplateObject(['<div id="','" class="','"></div>'],['<div id="','" class="','"></div>'])),this.tableId,r).content;e.appendChild(a);var u=e.children.item(e.children.length-1);u&&(n=u)}return n},t.prototype.getDescriptorByUdid=function(e){if(this.descriptors.length)return this.descriptors.find((function(t){return t.udid===e}))},t.prototype.destroy=function(){if(e.prototype.destroy.call(this),this.created){var r=document.getElementById(this.elementId);if(r){var n=r.parentElement;r.remove(),n&&!n.children.length&&n.remove()}}var i=document.getElementById(t.HOLDER_ELEMENT_ID);i&&!i.children.length&&i.remove()},t.prototype.supportMultiplexing=function(){return!0},t.prototype.getChannelCode=function(){throw Error("Not implemented. Must override")},t.prototype.getChannelInitData=function(){var e=this.getChannelCode(),t=n.alloc(e.length);return t.write(e,"ascii"),t},t.ACTION_LIST="devicelist",t.ACTION_DEVICE="device",t.HOLDER_ELEMENT_ID="devices",t.AttributePrefixInterfaceSelectFor="interface_select_for_",t.AttributePlayerFullName="data-player-full-name",t.AttributePlayerCodeName="data-player-code-name",t.AttributePrefixPlayerFor="player_for_",t.tools=new Set,t.instanceId=0,t}(a.ManagerClient);t.BaseDeviceTracker=l},3560:(e,t,r)=>{"use strict";var n=r(8764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.HostTracker=void 0;var i=r(655),o=r(1342),a=r(1360),s=r(483),u=r(8930),c=r(8082),l=r(6222),d="[HostTracker]",f=function(e){function t(){var t=e.call(this,{action:s.ACTION.LIST_HOSTS})||this;return t.trackers=[],t.openNewConnection(),t.ws&&(t.ws.binaryType="arraybuffer"),t}return i.__extends(t,e),t.start=function(){this.getInstance()},t.getInstance=function(){return this.instance||(this.instance=new t),this.instance},t.prototype.onSocketClose=function(e){console.log(d,"WS closed"),this.emit("disconnected",e)},t.prototype.onSocketMessage=function(e){var t,r=this;try{t=JSON.parse(e.data)}catch(e){return console.error(d,e.message),void console.log(d,e.data)}switch(t.type){case a.MessageType.ERROR:var n=t;console.error(d,n.data),this.emit("error",n.data);break;case a.MessageType.HOSTS:(n=t).data.local&&n.data.local.forEach((function(e){var t=e.type,n="https:"===location.protocol,i=location.port?parseInt(location.port,10):n?443:80,o=location.hostname;if("android"===t||"ios"===t){var a={useProxy:!1,secure:n,port:i,hostname:o,type:t};r.startTracker(a)}else console.warn(d,'Unsupported host type: "'.concat(t,'"'))})),n.data.remote&&n.data.remote.forEach((function(e){return r.startTracker(e)}));break;default:console.log(d,"Unknown message type: ".concat(t.type))}},t.prototype.startTracker=function(e){switch(e.type){case"android":this.trackers.push(u.DeviceTracker.start(e));break;case"ios":this.trackers.push(c.DeviceTracker.start(e));break;default:console.warn(d,'Unsupported host type: "'.concat(e.type,'"'))}},t.prototype.onSocketOpen=function(){},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.trackers.forEach((function(e){e.destroy()})),this.trackers.length=0},t.prototype.supportMultiplexing=function(){return!0},t.prototype.getChannelInitData=function(){var e=n.alloc(4);return e.write(l.ChannelCode.HSTS,"ascii"),e},t}(o.ManagerClient);t.HostTracker=f},1342:(e,t,r)=>{"use strict";var n=r(8764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.ManagerClient=void 0;var i=r(655),o=r(6257),a=r(483),s=i.__importDefault(r(8281)),u=r(6572),c=function(e){function t(t){var r=e.call(this,t)||this;return r.destroyed=!1,r.action=s.default.parseStringEnv(t.action),r.url=r.buildWebSocketUrl(),r}return i.__extends(t,e),t.start=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];throw Error("Not implemented")},t.prototype.hasConnection=function(){return!(!this.ws||this.ws.readyState!==this.ws.OPEN)},t.prototype.openNewConnection=function(){this.ws&&this.ws.readyState===this.ws.OPEN&&(this.ws.close(),delete this.ws);var e=this.url.toString();if(this.supportMultiplexing()){var r=t.sockets.get(e);if(!r){var n=new WebSocket(e);n.addEventListener("close",(function(){t.sockets.delete(e)}));var i=u.Multiplexer.wrap(n);i.on("empty",(function(){i.close()})),t.sockets.set(e,i),r=i}(o=r.createChannel(this.getChannelInitData())).addEventListener("open",this.onSocketOpen.bind(this)),o.addEventListener("message",this.onSocketMessage.bind(this)),o.addEventListener("close",this.onSocketClose.bind(this)),this.ws=o}else{var o;(o=new WebSocket(e)).addEventListener("open",this.onSocketOpen.bind(this)),o.addEventListener("message",this.onSocketMessage.bind(this)),o.addEventListener("close",this.onSocketClose.bind(this)),this.ws=o}return this.ws},t.prototype.destroy=function(){this.destroyed?console.error(new Error("Already disposed")):(this.destroyed=!0,this.ws&&this.ws.readyState===this.ws.OPEN&&this.ws.close())},t.prototype.buildWebSocketUrl=function(){var e=this.buildDirectWebSocketUrl();return this.params.useProxy&&!this.supportMultiplexing()?this.wrapInProxy(e):e},t.prototype.buildDirectWebSocketUrl=function(){var e,t=this.params,r=t.hostname,n=t.port,i=t.secure,o=t.action;if("string"==typeof r&&"number"==typeof n)e="".concat(s=i?"wss:":"ws:","//").concat(r,":").concat(n);else{var s="https:"===location.protocol?"wss:":"ws:";e="".concat(s).concat(location.host)}var u=new URL(e);return this.supportMultiplexing()?u.searchParams.set("action",a.ACTION.MULTIPLEX):o&&u.searchParams.set("action",o),u},t.prototype.wrapInProxy=function(e){var t="https:"===location.protocol?"wss:":"ws:",r=new URL("".concat(t,"//").concat(location.host));return r.searchParams.set("action",a.ACTION.PROXY_WS),r.searchParams.set("ws",e.toString()),r},t.prototype.supportMultiplexing=function(){return!1},t.prototype.getChannelInitData=function(){return n.from(t.CODE)},t.ACTION="unknown",t.CODE="NONE",t.sockets=new Map,t}(o.BaseClient);t.ManagerClient=c},3146:(e,t,r)=>{"use strict";var n=r(8764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.StreamReceiver=void 0;var i=r(655),o=r(1342),a=i.__importDefault(r(5268)),s=i.__importDefault(r(8442)),u=i.__importDefault(r(7197)),c=i.__importDefault(r(8281)),l=r(8535),d=c.default.stringToUtf8ByteArray("scrcpy_initial"),f=function(e){function t(t){var r=e.call(this,t)||this;return r.events=[],r.encodersSet=new Set,r.clientId=-1,r.deviceName="",r.displayInfoMap=new Map,r.connectionCountMap=new Map,r.screenInfoMap=new Map,r.videoSettingsMap=new Map,r.hasInitialInfo=!1,r.openNewConnection(),r.ws&&(r.ws.binaryType="arraybuffer"),r}return i.__extends(t,e),t.prototype.handleInitialInfo=function(e){var t=d.length,r=new Uint8Array(e,t,64);t+=64;var i=n.from(new Uint8Array(e,t)),o=i.readInt32BE(0);this.displayInfoMap.clear(),this.connectionCountMap.clear(),this.screenInfoMap.clear(),this.videoSettingsMap.clear(),i=i.slice(4);for(var a=0;a<o;a++){var f=i.slice(0,l.DisplayInfo.BUFFER_LENGTH),h=l.DisplayInfo.fromBuffer(f),p=h.displayId;this.displayInfoMap.set(p,h),i=i.slice(l.DisplayInfo.BUFFER_LENGTH),this.connectionCountMap.set(p,i.readInt32BE(0));var m=(i=i.slice(4)).readInt32BE(0);i=i.slice(4),m&&(this.screenInfoMap.set(p,u.default.fromBuffer(i.slice(0,m))),i=i.slice(m));var v=i.readInt32BE(0);i=i.slice(4),v&&(this.videoSettingsMap.set(p,s.default.fromBuffer(i.slice(0,v))),i=i.slice(v))}this.encodersSet.clear();var E=i.readInt32BE(0);for(i=i.slice(4),a=0;a<E;a++){var y=i.readInt32BE(0),g=(i=i.slice(4)).slice(0,y);i=i.slice(y);var _=c.default.utf8ByteArrayToString(g);this.encodersSet.add(_)}this.clientId=i.readInt32BE(0),r=c.default.filterTrailingZeroes(r),this.deviceName=c.default.utf8ByteArrayToString(r),this.hasInitialInfo=!0,this.triggerInitialInfoEvents()},t.EqualArrays=function(e,t){if(e.length!==t.length)return!1;for(var r=0,n=e.length;r<n;r++)if(e[r]!==t[r])return!1;return!0},t.prototype.buildDirectWebSocketUrl=function(){var t=e.prototype.buildDirectWebSocketUrl.call(this);return this.supportMultiplexing()||t.searchParams.set("udid",this.params.udid),t},t.prototype.onSocketClose=function(e){console.log("".concat("[StreamReceiver]",". WS closed: ").concat(e.reason)),this.emit("disconnected",e)},t.prototype.onSocketMessage=function(e){if(e.data instanceof ArrayBuffer){if(e.data.byteLength>d.length){var r=new Uint8Array(e.data,0,d.length);if(t.EqualArrays(r,d))return void this.handleInitialInfo(e.data);if(t.EqualArrays(r,a.default.MAGIC_BYTES_MESSAGE)){var n=a.default.fromBuffer(e.data);return void this.emit("deviceMessage",n)}}this.emit("video",new Uint8Array(e.data))}},t.prototype.onSocketOpen=function(){this.emit("connected",void 0);for(var e=this.events.shift();e;)this.sendEvent(e),e=this.events.shift()},t.prototype.sendEvent=function(e){this.ws&&this.ws.readyState===this.ws.OPEN?this.ws.send(e.toBuffer()):this.events.push(e)},t.prototype.stop=function(){this.ws&&this.ws.readyState===this.ws.OPEN&&this.ws.close(),this.events.length=0},t.prototype.getEncoders=function(){return Array.from(this.encodersSet.values())},t.prototype.getDeviceName=function(){return this.deviceName},t.prototype.triggerInitialInfoEvents=function(){var e=this;if(this.hasInitialInfo){var t=this.getEncoders();this.emit("encoders",t);var r=this.clientId,n=this.deviceName;this.emit("clientsStats",{clientId:r,deviceName:n});var i=[];this.displayInfoMap.forEach((function(t,r){var n=e.connectionCountMap.get(r)||0;i.push({displayInfo:t,videoSettings:e.videoSettingsMap.get(r),screenInfo:e.screenInfoMap.get(r),connectionCount:n})})),this.emit("displayInfo",i)}},t.prototype.getDisplayInfo=function(e){return this.displayInfoMap.get(e)},t}(o.ManagerClient);t.StreamReceiver=f},2268:(e,t,r)=>{"use strict";var n=r(8764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.CommandControlMessage=t.FilePushState=void 0;var i,o=r(655),a=r(6368),s=o.__importDefault(r(8281));!function(e){e[e.NEW=0]="NEW",e[e.START=1]="START",e[e.APPEND=2]="APPEND",e[e.FINISH=3]="FINISH",e[e.CANCEL=4]="CANCEL"}(i=t.FilePushState||(t.FilePushState={}));var u=function(e){function t(t){var r=e.call(this,t)||this;return r.type=t,r}return o.__extends(t,e),t.createSetVideoSettingsCommand=function(e){var r=e.toBuffer(),i=new t(a.ControlMessage.TYPE_CHANGE_STREAM_PARAMETERS),o=t.PAYLOAD_LENGTH+1,s=n.alloc(o+r.length);return s.writeUInt8(i.type,0),r.forEach((function(e,t){s.writeUInt8(e,t+o)})),i.buffer=s,i},t.createSetClipboardCommand=function(e,r){void 0===r&&(r=!1);var i=new t(a.ControlMessage.TYPE_SET_CLIPBOARD),o=e?s.default.stringToUtf8ByteArray(e):null,u=o?o.length:0,c=0,l=n.alloc(6+u);return c=l.writeInt8(i.type,c),c=l.writeInt8(r?1:0,c),c=l.writeInt32BE(u,c),o&&o.forEach((function(e,t){l.writeUInt8(e,t+c)})),i.buffer=l,i},t.createSetScreenPowerModeCommand=function(e){var r=new t(a.ControlMessage.TYPE_SET_SCREEN_POWER_MODE),i=0,o=n.alloc(2);return i=o.writeInt8(r.type,i),o.writeUInt8(e?1:0,i),r.buffer=o,r},t.createPushFileCommand=function(e){var t=e.id,r=e.fileName,n=e.fileSize,o=e.chunk,a=e.state;if(a===i.START)return this.createPushFileStartCommand(t,r,n);if(a===i.APPEND){if(!o)throw TypeError("Invalid type");return this.createPushFileChunkCommand(t,o)}if(a===i.CANCEL||a===i.FINISH||a===i.NEW)return this.createPushFileOtherCommand(t,a);throw TypeError('Unsupported state: "'.concat(a,'"'))},t.createPushFileStartCommand=function(e,r,o){var u=new t(a.ControlMessage.TYPE_PUSH_FILE),c=s.default.stringToUtf8ByteArray(r),l=c.length,d=t.PAYLOAD_LENGTH,f=n.alloc(d+1+2+1+4+2+l);return f.writeUInt8(u.type,d),d+=1,f.writeInt16BE(e,d),d+=2,f.writeInt8(i.START,d),d+=1,f.writeUInt32BE(o,d),d+=4,f.writeUInt16BE(l,d),d+=2,c.forEach((function(e,t){f.writeUInt8(e,t+d)})),u.buffer=f,u},t.createPushFileChunkCommand=function(e,r){var o=new t(a.ControlMessage.TYPE_PUSH_FILE),s=r.byteLength,u=t.PAYLOAD_LENGTH,c=n.alloc(u+1+2+1+4+s);return c.writeUInt8(o.type,u),u+=1,c.writeInt16BE(e,u),u+=2,c.writeInt8(i.APPEND,u),u+=1,c.writeUInt32BE(s,u),u+=4,Array.from(r).forEach((function(e,t){c.writeUInt8(e,t+u)})),o.buffer=c,o},t.createPushFileOtherCommand=function(e,r){var i=new t(a.ControlMessage.TYPE_PUSH_FILE),o=t.PAYLOAD_LENGTH,s=n.alloc(o+1+2+1);return s.writeUInt8(i.type,o),o+=1,s.writeInt16BE(e,o),o+=2,s.writeInt8(r,o),i.buffer=s,i},t.pushFileCommandFromBuffer=function(e){var r=0,n=e.readUInt8(r);if(r+=1,n!==t.TYPE_PUSH_FILE)throw TypeError('Incorrect type: "'.concat(n,'"'));var o=e.readInt16BE(r);r+=2;var a,u,c,l=e.readInt8(r);if(r+=1,l===i.APPEND){var d=e.readUInt32BE(r);r+=4,a=e.slice(r,r+d)}else if(l===i.START){u=e.readUInt32BE(r),r+=4;var f=e.readUInt16BE(r);r+=2,c=s.default.utf8ByteArrayToString(e.slice(r,r+f))}return{id:o,state:l,chunk:a,fileName:c,fileSize:u}},t.prototype.toBuffer=function(){if(!this.buffer){var e=n.alloc(t.PAYLOAD_LENGTH+1);e.writeUInt8(this.type,0),this.buffer=e}return this.buffer},t.prototype.toString=function(){var e=this.buffer?", buffer=[".concat(this.buffer.join(","),"]"):"";return"CommandControlMessage{action=".concat(this.type).concat(e,"}")},t.PAYLOAD_LENGTH=0,t.Commands=new Map([[a.ControlMessage.TYPE_EXPAND_NOTIFICATION_PANEL,"Expand notifications"],[a.ControlMessage.TYPE_EXPAND_SETTINGS_PANEL,"Expand settings"],[a.ControlMessage.TYPE_COLLAPSE_PANELS,"Collapse panels"],[a.ControlMessage.TYPE_GET_CLIPBOARD,"Get clipboard"],[a.ControlMessage.TYPE_SET_CLIPBOARD,"Set clipboard"],[a.ControlMessage.TYPE_ROTATE_DEVICE,"Rotate device"],[a.ControlMessage.TYPE_CHANGE_STREAM_PARAMETERS,"Change video settings"]]),t}(a.ControlMessage);t.CommandControlMessage=u},6368:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ControlMessage=void 0;var r=function(){function e(e){this.type=e}return e.prototype.toBuffer=function(){throw Error("Not implemented")},e.prototype.toString=function(){return"ControlMessage"},e.prototype.toJSON=function(){return{type:this.type}},e.TYPE_KEYCODE=0,e.TYPE_TEXT=1,e.TYPE_TOUCH=2,e.TYPE_SCROLL=3,e.TYPE_BACK_OR_SCREEN_ON=4,e.TYPE_EXPAND_NOTIFICATION_PANEL=5,e.TYPE_EXPAND_SETTINGS_PANEL=6,e.TYPE_COLLAPSE_PANELS=7,e.TYPE_GET_CLIPBOARD=8,e.TYPE_SET_CLIPBOARD=9,e.TYPE_SET_SCREEN_POWER_MODE=10,e.TYPE_ROTATE_DEVICE=11,e.TYPE_CHANGE_STREAM_PARAMETERS=101,e.TYPE_PUSH_FILE=102,e}();t.ControlMessage=r},3153:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KeyCodeControlMessage=void 0;var n=r(655),i=r(8764),o=r(6368),a=function(e){function t(t,r,n,i){var a=e.call(this,o.ControlMessage.TYPE_KEYCODE)||this;return a.action=t,a.keycode=r,a.repeat=n,a.metaState=i,a}return n.__extends(t,e),t.prototype.toBuffer=function(){var e=i.Buffer.alloc(t.PAYLOAD_LENGTH+1),r=0;return r=e.writeInt8(this.type,r),r=e.writeInt8(this.action,r),r=e.writeInt32BE(this.keycode,r),r=e.writeInt32BE(this.repeat,r),e.writeInt32BE(this.metaState,r),e},t.prototype.toString=function(){return"KeyCodeControlMessage{action=".concat(this.action,", keycode=").concat(this.keycode,", metaState=").concat(this.metaState,"}")},t.prototype.toJSON=function(){return{type:this.type,action:this.action,keycode:this.keycode,metaState:this.metaState,repeat:this.repeat}},t.PAYLOAD_LENGTH=13,t}(o.ControlMessage);t.KeyCodeControlMessage=a},9300:(e,t,r)=>{"use strict";var n=r(8764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.ScrollControlMessage=void 0;var i=r(655),o=r(6368),a=function(e){function t(t,r,n){var i=e.call(this,o.ControlMessage.TYPE_SCROLL)||this;return i.position=t,i.hScroll=r,i.vScroll=n,i}return i.__extends(t,e),t.prototype.toBuffer=function(){var e=n.alloc(t.PAYLOAD_LENGTH+1),r=0;return r=e.writeUInt8(this.type,r),r=e.writeUInt32BE(this.position.point.x,r),r=e.writeUInt32BE(this.position.point.y,r),r=e.writeUInt16BE(this.position.screenSize.width,r),r=e.writeUInt16BE(this.position.screenSize.height,r),r=e.writeInt32BE(this.hScroll,r),e.writeInt32BE(this.vScroll,r),e},t.prototype.toString=function(){return"ScrollControlMessage{hScroll=".concat(this.hScroll,", vScroll=").concat(this.vScroll,", position=").concat(this.position,"}")},t.prototype.toJSON=function(){return{type:this.type,position:this.position.toJSON(),hScroll:this.hScroll,vScroll:this.vScroll}},t.PAYLOAD_LENGTH=20,t}(o.ControlMessage);t.ScrollControlMessage=a},1503:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextControlMessage=void 0;var n=r(655),i=r(8764),o=r(6368),a=function(e){function t(t){var r=e.call(this,o.ControlMessage.TYPE_TEXT)||this;return r.text=t,r}return n.__extends(t,e),t.prototype.getText=function(){return this.text},t.prototype.toBuffer=function(){var e=this.text.length,r=i.Buffer.alloc(e+1+t.TEXT_SIZE_FIELD_LENGTH),n=0;return n=r.writeUInt8(this.type,n),n=r.writeUInt32BE(e,n),r.write(this.text,n),r},t.prototype.toString=function(){return"TextControlMessage{text=".concat(this.text,"}")},t.prototype.toJSON=function(){return{type:this.type,text:this.text}},t.TEXT_SIZE_FIELD_LENGTH=4,t}(o.ControlMessage);t.TextControlMessage=a},7257:(e,t,r)=>{"use strict";var n=r(8764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.TouchControlMessage=void 0;var i=r(655),o=r(6368),a=function(e){function t(t,r,n,i,a){var s=e.call(this,o.ControlMessage.TYPE_TOUCH)||this;return s.action=t,s.pointerId=r,s.position=n,s.pressure=i,s.buttons=a,s}return i.__extends(t,e),t.prototype.toBuffer=function(){var e=n.alloc(t.PAYLOAD_LENGTH+1),r=0;return r=e.writeUInt8(this.type,r),r=e.writeUInt8(this.action,r),r=e.writeUInt32BE(0,r),r=e.writeUInt32BE(this.pointerId,r),r=e.writeUInt32BE(this.position.point.x,r),r=e.writeUInt32BE(this.position.point.y,r),r=e.writeUInt16BE(this.position.screenSize.width,r),r=e.writeUInt16BE(this.position.screenSize.height,r),r=e.writeUInt16BE(this.pressure*t.MAX_PRESSURE_VALUE,r),e.writeUInt32BE(this.buttons,r),e},t.prototype.toString=function(){return"TouchControlMessage{action=".concat(this.action,", pointerId=").concat(this.pointerId,", position=").concat(this.position,", pressure=").concat(this.pressure,", buttons=").concat(this.buttons,"}")},t.prototype.toJSON=function(){return{type:this.type,action:this.action,pointerId:this.pointerId,position:this.position.toJSON(),pressure:this.pressure,buttons:this.buttons}},t.PAYLOAD_LENGTH=28,t.MAX_PRESSURE_VALUE=65535,t}(o.ControlMessage);t.TouchControlMessage=a},5268:(e,t,r)=>{"use strict";var n=r(8764).Buffer;Object.defineProperty(t,"__esModule",{value:!0});var i=r(655).__importDefault(r(8281)),o=function(){function e(e,t){this.type=e,this.buffer=t}return e.fromBuffer=function(t){var r=this.MAGIC_BYTES_MESSAGE.length,i=n.from(t,r,t.byteLength-r);return new e(i.readUInt8(0),i)},e.prototype.getText=function(){if(this.type!==e.TYPE_CLIPBOARD)throw TypeError("Wrong message type: ".concat(this.type));if(!this.buffer)throw Error("Empty buffer");var t=1,r=this.buffer.readInt32BE(t);t+=4;var n=this.buffer.slice(t,t+r);return i.default.utf8ByteArrayToString(n)},e.prototype.getPushStats=function(){if(this.type!==e.TYPE_PUSH_RESPONSE)throw TypeError("Wrong message type: ".concat(this.type));if(!this.buffer)throw Error("Empty buffer");return{id:this.buffer.readInt16BE(1),code:this.buffer.readInt8(3)}},e.prototype.toString=function(){var t;return t=this.type===e.TYPE_CLIPBOARD&&this.buffer?", text=[".concat(this.getText(),"]"):this.buffer?", buffer=[".concat(this.buffer.join(","),"]"):"","DeviceMessage{type=".concat(this.type).concat(t,"}")},e.TYPE_CLIPBOARD=0,e.TYPE_PUSH_RESPONSE=101,e.MAGIC_BYTES_MESSAGE=i.default.stringToUtf8ByteArray("scrcpy_message"),e}();t.default=o},38:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DragAndDropHandler=void 0;var r=function(){function e(){}return e.attachListeners=function(e){e.addEventListener("drop",this.dropHandler),e.addEventListener("dragover",this.dragOverHandler),e.addEventListener("dragleave",this.dragLeaveHandler),e.addEventListener("dragenter",this.dragEnterHandler)},e.detachListeners=function(e){e.removeEventListener("drop",this.dropHandler),e.removeEventListener("dragover",this.dragOverHandler),e.removeEventListener("dragleave",this.dragLeaveHandler),e.removeEventListener("dragenter",this.dragEnterHandler)},e.addEventListener=function(e){this.listeners.has(e)||(this.attachListeners(e.getElement()),this.listeners.add(e))},e.removeEventListener=function(e){this.listeners.has(e)&&(this.detachListeners(e.getElement()),this.listeners.delete(e))},e.listeners=new Set,e.dropHandler=function(t){if(!t.dataTransfer)return!1;var r=[];if(t.dataTransfer.items){for(var n=0;n<t.dataTransfer.items.length;n++)if("file"===t.dataTransfer.items[n].kind){var i=t.dataTransfer.items[n].getAsFile();i&&r.push(i)}}else for(n=0;n<t.dataTransfer.files.length;n++)r.push(t.dataTransfer.files[n]);var o=!1;return e.listeners.forEach((function(e){e.getElement()===t.currentTarget&&(o=o||e.onFilesDrop(r))})),!!o&&(t.preventDefault(),!0)},e.dragOverHandler=function(e){e.preventDefault()},e.dragLeaveHandler=function(t){var r=!1;return e.listeners.forEach((function(e){e.getElement()===t.currentTarget&&(r=r||e.onDragLeave())})),!!r&&(t.preventDefault(),!0)},e.dragEnterHandler=function(t){var r=!1;return e.listeners.forEach((function(e){e.getElement()===t.currentTarget&&(r=r||e.onDragEnter())})),!!r&&(t.preventDefault(),!0)},e}();t.DragAndDropHandler=r},8876:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(655).__importDefault(r(7013)),i="[DragAndPushLogger]",o=function(){function e(t){var r=this;if(this.ctx=null,this.timeoutMap=new Map,this.dirtyMap=new Map,this.pushLineMap=new Map,this.linePushMap=new Map,this.dirtyLines=[],this.cleanDirtyLine=function(t){if(r.ctx){var n=e.X,i=e.Y,o=e.HEIGHT,a=n,s=i+o*t*2,u=r.dirtyMap.get(t);if(u){var c=e.HEIGHT/2,l=2*c;r.ctx.clearRect(a-c,s-o-c,u+l,o+l)}r.dirtyLines[t]=!1}},t instanceof HTMLCanvasElement){var n=t;this.ctx=n.getContext("2d")}}return e.prototype.logText=function(t,r,n,o){var a=this;if(void 0===n&&(n=!1),void 0===o&&(o=!1),this.ctx){o&&console.error(i,t),this.cleanDirtyLine(r);var s=e.X,u=e.Y,c=e.HEIGHT,l=s,d=u+c*r*2;this.ctx.save(),this.ctx.font="".concat(c,"px monospace");var f=this.ctx.measureText(t),h=Math.abs(f.actualBoundingBoxLeft)+Math.abs(f.actualBoundingBoxRight);this.dirtyMap.set(r,h),this.ctx.fillStyle=e.LOG_BACKGROUND;var p=e.HEIGHT/2-1,m=2*p;if(this.ctx.fillRect(l-p,d-c-p,h+m,c+m),this.ctx.fillStyle=o?e.ERROR_COLOR:e.DEBUG_COLOR,this.ctx.fillText(t,l,d),this.ctx.restore(),n){this.dirtyLines[r]=!0;var v=this.timeoutMap.get(r);v&&clearTimeout(v),v=window.setTimeout((function(){a.cleanDirtyLine(r);var e=a.linePushMap.get(r);"string"==typeof e&&(a.linePushMap.delete(r),a.pushLineMap.delete(e))}),5e3),this.timeoutMap.set(r,v)}}else o?console.error(i,t):console.log(i,t)},e.prototype.onDragEnter=function(){return this.logText("Drop APK files here",1),!0},e.prototype.onDragLeave=function(){return this.cleanDirtyLine(1),!0},e.prototype.onDrop=function(){return this.cleanDirtyLine(1),!0},e.prototype.onError=function(e){var t="string"==typeof e?e:e.message;this.logText(t,1,!0)},e.prototype.onFilePushUpdate=function(e){var t=e.pushId,r=e.message,i=e.fileName,o=e.error,a="".concat(t,"/").concat(i),s="".concat(n.default.REQUEST_NEW_PUSH_ID,"/").concat(i),u=this.pushLineMap.get(a),c=!1;if(void 0===u&&a!==s&&void 0!==(u=this.pushLineMap.get(s))&&(this.pushLineMap.delete(s),c=!0),void 0===u){for(u=2;this.dirtyLines[u];)u++;c=!0}c&&(this.pushLineMap.set(a,u),this.linePushMap.set(u,a)),this.logText('Upload "'.concat(i,'": ').concat(r),u,!0,o)},e.X=20,e.Y=40,e.HEIGHT=12,e.LOG_BACKGROUND="rgba(0,0,0, 0.5)",e.DEBUG_COLOR="hsl(136, 85%,50%)",e.ERROR_COLOR="hsl(336,85%,50%)",e}();t.default=o},4341:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Entry=void 0;var n=r(655),i=function(e){function t(t,r,n,i){var o=e.call(this,r,n,i)||this;return o.name=t,o}return n.__extends(t,e),t.prototype.toString=function(){return this.name},t}(r(6292).Stats);t.Entry=i},4427:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KeyInputHandler=void 0;var n=r(655),i=r(3153),o=n.__importDefault(r(154)),a=r(5256),s=function(){function e(){}return e.attachListeners=function(){document.body.addEventListener("keydown",this.handler),document.body.addEventListener("keyup",this.handler)},e.detachListeners=function(){document.body.removeEventListener("keydown",this.handler),document.body.removeEventListener("keyup",this.handler)},e.addEventListener=function(e){this.listeners.size||this.attachListeners(),this.listeners.add(e)},e.removeEventListener=function(e){this.listeners.delete(e),this.listeners.size||this.detachListeners()},e.repeatCounter=new Map,e.listeners=new Set,e.handler=function(t){var r=t,n=a.KeyToCodeMap.get(r.code);if(n){var s,u=0;if("keydown"===r.type){if(s=o.default.ACTION_DOWN,r.repeat){var c=e.repeatCounter.get(n);"number"!=typeof c?c=1:c++,u=c,e.repeatCounter.set(n,c)}}else{if("keyup"!==r.type)return;s=o.default.ACTION_UP,e.repeatCounter.delete(n)}var l=(r.getModifierState("Alt")?o.default.META_ALT_ON:0)|(r.getModifierState("Shift")?o.default.META_SHIFT_ON:0)|(r.getModifierState("Control")?o.default.META_CTRL_ON:0)|(r.getModifierState("Meta")?o.default.META_META_ON:0)|(r.getModifierState("CapsLock")?o.default.META_CAPS_LOCK_ON:0)|(r.getModifierState("ScrollLock")?o.default.META_SCROLL_LOCK_ON:0)|(r.getModifierState("NumLock")?o.default.META_NUM_LOCK_ON:0),d=new i.KeyCodeControlMessage(s,n,u,l);e.listeners.forEach((function(e){e.onKeyEvent(d)})),t.preventDefault()}},e}();t.KeyInputHandler=s},5256:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KeyToCodeMap=void 0;var n=r(655),i=n.__importDefault(r(154)),o=n.__importDefault(r(2886));t.KeyToCodeMap=new Map([[o.default.Backquote,i.default.KEYCODE_GRAVE],[o.default.Backslash,i.default.KEYCODE_BACKSLASH],[o.default.BracketLeft,i.default.KEYCODE_LEFT_BRACKET],[o.default.BracketRight,i.default.KEYCODE_RIGHT_BRACKET],[o.default.Comma,i.default.KEYCODE_COMMA],[o.default.Digit0,i.default.KEYCODE_0],[o.default.Digit1,i.default.KEYCODE_1],[o.default.Digit2,i.default.KEYCODE_2],[o.default.Digit3,i.default.KEYCODE_3],[o.default.Digit4,i.default.KEYCODE_4],[o.default.Digit5,i.default.KEYCODE_5],[o.default.Digit6,i.default.KEYCODE_6],[o.default.Digit7,i.default.KEYCODE_7],[o.default.Digit8,i.default.KEYCODE_8],[o.default.Digit9,i.default.KEYCODE_9],[o.default.Equal,i.default.KEYCODE_EQUALS],[o.default.IntlRo,i.default.KEYCODE_RO],[o.default.IntlYen,i.default.KEYCODE_YEN],[o.default.KeyA,i.default.KEYCODE_A],[o.default.KeyB,i.default.KEYCODE_B],[o.default.KeyC,i.default.KEYCODE_C],[o.default.KeyD,i.default.KEYCODE_D],[o.default.KeyE,i.default.KEYCODE_E],[o.default.KeyF,i.default.KEYCODE_F],[o.default.KeyG,i.default.KEYCODE_G],[o.default.KeyH,i.default.KEYCODE_H],[o.default.KeyI,i.default.KEYCODE_I],[o.default.KeyJ,i.default.KEYCODE_J],[o.default.KeyK,i.default.KEYCODE_K],[o.default.KeyL,i.default.KEYCODE_L],[o.default.KeyM,i.default.KEYCODE_M],[o.default.KeyN,i.default.KEYCODE_N],[o.default.KeyO,i.default.KEYCODE_O],[o.default.KeyP,i.default.KEYCODE_P],[o.default.KeyQ,i.default.KEYCODE_Q],[o.default.KeyR,i.default.KEYCODE_R],[o.default.KeyS,i.default.KEYCODE_S],[o.default.KeyT,i.default.KEYCODE_T],[o.default.KeyU,i.default.KEYCODE_U],[o.default.KeyV,i.default.KEYCODE_V],[o.default.KeyW,i.default.KEYCODE_W],[o.default.KeyX,i.default.KEYCODE_X],[o.default.KeyY,i.default.KEYCODE_Y],[o.default.KeyZ,i.default.KEYCODE_Z],[o.default.Minus,i.default.KEYCODE_MINUS],[o.default.Period,i.default.KEYCODE_PERIOD],[o.default.Quote,i.default.KEYCODE_APOSTROPHE],[o.default.Semicolon,i.default.KEYCODE_SEMICOLON],[o.default.Slash,i.default.KEYCODE_SLASH],[o.default.KanaMode,i.default.KEYCODE_KANA],[o.default.Delete,i.default.KEYCODE_FORWARD_DEL],[o.default.End,i.default.KEYCODE_MOVE_END],[o.default.Help,i.default.KEYCODE_HELP],[o.default.Home,i.default.KEYCODE_MOVE_HOME],[o.default.Insert,i.default.KEYCODE_INSERT],[o.default.PageDown,i.default.KEYCODE_PAGE_DOWN],[o.default.PageUp,i.default.KEYCODE_PAGE_UP],[o.default.AltLeft,i.default.KEYCODE_ALT_LEFT],[o.default.AltRight,i.default.KEYCODE_ALT_RIGHT],[o.default.Backspace,i.default.KEYCODE_DEL],[o.default.CapsLock,i.default.KEYCODE_CAPS_LOCK],[o.default.ControlLeft,i.default.KEYCODE_CTRL_LEFT],[o.default.ControlRight,i.default.KEYCODE_CTRL_RIGHT],[o.default.Enter,i.default.KEYCODE_ENTER],[o.default.MetaLeft,i.default.KEYCODE_META_LEFT],[o.default.MetaRight,i.default.KEYCODE_META_RIGHT],[o.default.ShiftLeft,i.default.KEYCODE_SHIFT_LEFT],[o.default.ShiftRight,i.default.KEYCODE_SHIFT_RIGHT],[o.default.Space,i.default.KEYCODE_SPACE],[o.default.Tab,i.default.KEYCODE_TAB],[o.default.ArrowLeft,i.default.KEYCODE_DPAD_LEFT],[o.default.ArrowUp,i.default.KEYCODE_DPAD_UP],[o.default.ArrowRight,i.default.KEYCODE_DPAD_RIGHT],[o.default.ArrowDown,i.default.KEYCODE_DPAD_DOWN],[o.default.NumLock,i.default.KEYCODE_NUM_LOCK],[o.default.Numpad0,i.default.KEYCODE_NUMPAD_0],[o.default.Numpad1,i.default.KEYCODE_NUMPAD_1],[o.default.Numpad2,i.default.KEYCODE_NUMPAD_2],[o.default.Numpad3,i.default.KEYCODE_NUMPAD_3],[o.default.Numpad4,i.default.KEYCODE_NUMPAD_4],[o.default.Numpad5,i.default.KEYCODE_NUMPAD_5],[o.default.Numpad6,i.default.KEYCODE_NUMPAD_6],[o.default.Numpad7,i.default.KEYCODE_NUMPAD_7],[o.default.Numpad8,i.default.KEYCODE_NUMPAD_8],[o.default.Numpad9,i.default.KEYCODE_NUMPAD_9],[o.default.NumpadAdd,i.default.KEYCODE_NUMPAD_ADD],[o.default.NumpadComma,i.default.KEYCODE_NUMPAD_COMMA],[o.default.NumpadDecimal,i.default.KEYCODE_NUMPAD_DOT],[o.default.NumpadDivide,i.default.KEYCODE_NUMPAD_DIVIDE],[o.default.NumpadEnter,i.default.KEYCODE_NUMPAD_ENTER],[o.default.NumpadEqual,i.default.KEYCODE_NUMPAD_EQUALS],[o.default.NumpadMultiply,i.default.KEYCODE_NUMPAD_MULTIPLY],[o.default.NumpadParenLeft,i.default.KEYCODE_NUMPAD_LEFT_PAREN],[o.default.NumpadParenRight,i.default.KEYCODE_NUMPAD_RIGHT_PAREN],[o.default.NumpadSubtract,i.default.KEYCODE_NUMPAD_SUBTRACT],[o.default.Escape,i.default.KEYCODE_ESCAPE],[o.default.F1,i.default.KEYCODE_F1],[o.default.F2,i.default.KEYCODE_F2],[o.default.F3,i.default.KEYCODE_F3],[o.default.F4,i.default.KEYCODE_F4],[o.default.F5,i.default.KEYCODE_F5],[o.default.F6,i.default.KEYCODE_F6],[o.default.F7,i.default.KEYCODE_F7],[o.default.F8,i.default.KEYCODE_F8],[o.default.F9,i.default.KEYCODE_F9],[o.default.F10,i.default.KEYCODE_F10],[o.default.F11,i.default.KEYCODE_F11],[o.default.F12,i.default.KEYCODE_F12],[o.default.Fn,i.default.KEYCODE_FUNCTION],[o.default.PrintScreen,i.default.KEYCODE_SYSRQ],[o.default.Pause,i.default.KEYCODE_BREAK]])},6292:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Stats=void 0;var r=function(){function e(e,t,r){this.mode=e,this.size=t,this.mtime=new Date(1e3*r)}return e.prototype.checkModeProperty=function(t){return(this.mode&e.S_IFMT)===t},e.prototype.isBlockDevice=function(){return this.checkModeProperty(e.S_IFBLK)},e.prototype.isCharacterDevice=function(){return this.checkModeProperty(e.S_IFCHR)},e.prototype.isDirectory=function(){return this.checkModeProperty(e.S_IFDIR)},e.prototype.isFIFO=function(){return this.checkModeProperty(e.S_IFIFO)},e.prototype.isisSocket=function(){return this.checkModeProperty(e.S_IFSOCK)},e.prototype.isSymbolicLink=function(){return this.checkModeProperty(e.S_IFLNK)},e.prototype.isFile=function(){return this.checkModeProperty(e.S_IFREG)},e.S_IFMT=61440,e.S_IFSOCK=49152,e.S_IFLNK=40960,e.S_IFREG=32768,e.S_IFBLK=24576,e.S_IFDIR=16384,e.S_IFCHR=8192,e.S_IFIFO=4096,e.S_ISUID=2048,e.S_ISGID=1024,e.S_ISVTX=512,e.S_IRWXU=448,e.S_IRUSR=256,e.S_IWUSR=128,e.S_IXUSR=64,e.S_IRWXG=56,e.S_IRGRP=32,e}();t.Stats=r},154:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.ACTION_DOWN=0,e.ACTION_UP=1,e.KEYCODE_0=7,e.KEYCODE_1=8,e.KEYCODE_11=227,e.KEYCODE_12=228,e.KEYCODE_2=9,e.KEYCODE_3=10,e.KEYCODE_3D_MODE=206,e.KEYCODE_4=11,e.KEYCODE_5=12,e.KEYCODE_6=13,e.KEYCODE_7=14,e.KEYCODE_8=15,e.KEYCODE_9=16,e.KEYCODE_A=29,e.KEYCODE_ALL_APPS=284,e.KEYCODE_ALT_LEFT=57,e.KEYCODE_ALT_RIGHT=58,e.KEYCODE_APOSTROPHE=75,e.KEYCODE_APP_SWITCH=187,e.KEYCODE_ASSIST=219,e.KEYCODE_AT=77,e.KEYCODE_AVR_INPUT=182,e.KEYCODE_AVR_POWER=181,e.KEYCODE_B=30,e.KEYCODE_BACK=4,e.KEYCODE_BACKSLASH=73,e.KEYCODE_BOOKMARK=174,e.KEYCODE_BREAK=121,e.KEYCODE_BRIGHTNESS_DOWN=220,e.KEYCODE_BRIGHTNESS_UP=221,e.KEYCODE_BUTTON_1=188,e.KEYCODE_BUTTON_10=197,e.KEYCODE_BUTTON_11=198,e.KEYCODE_BUTTON_12=199,e.KEYCODE_BUTTON_13=200,e.KEYCODE_BUTTON_14=201,e.KEYCODE_BUTTON_15=202,e.KEYCODE_BUTTON_16=203,e.KEYCODE_BUTTON_2=189,e.KEYCODE_BUTTON_3=190,e.KEYCODE_BUTTON_4=191,e.KEYCODE_BUTTON_5=192,e.KEYCODE_BUTTON_6=193,e.KEYCODE_BUTTON_7=194,e.KEYCODE_BUTTON_8=195,e.KEYCODE_BUTTON_9=196,e.KEYCODE_BUTTON_A=96,e.KEYCODE_BUTTON_B=97,e.KEYCODE_BUTTON_C=98,e.KEYCODE_BUTTON_L1=102,e.KEYCODE_BUTTON_L2=104,e.KEYCODE_BUTTON_MODE=110,e.KEYCODE_BUTTON_R1=103,e.KEYCODE_BUTTON_R2=105,e.KEYCODE_BUTTON_SELECT=109,e.KEYCODE_BUTTON_START=108,e.KEYCODE_BUTTON_THUMBL=106,e.KEYCODE_BUTTON_THUMBR=107,e.KEYCODE_BUTTON_X=99,e.KEYCODE_BUTTON_Y=100,e.KEYCODE_BUTTON_Z=101,e.KEYCODE_C=31,e.KEYCODE_CALCULATOR=210,e.KEYCODE_CALENDAR=208,e.KEYCODE_CALL=5,e.KEYCODE_CAMERA=27,e.KEYCODE_CAPS_LOCK=115,e.KEYCODE_CAPTIONS=175,e.KEYCODE_CHANNEL_DOWN=167,e.KEYCODE_CHANNEL_UP=166,e.KEYCODE_CLEAR=28,e.KEYCODE_COMMA=55,e.KEYCODE_CONTACTS=207,e.KEYCODE_COPY=278,e.KEYCODE_CTRL_LEFT=113,e.KEYCODE_CTRL_RIGHT=114,e.KEYCODE_CUT=277,e.KEYCODE_D=32,e.KEYCODE_DEL=67,e.KEYCODE_DPAD_CENTER=23,e.KEYCODE_DPAD_DOWN=20,e.KEYCODE_DPAD_DOWN_LEFT=269,e.KEYCODE_DPAD_DOWN_RIGHT=271,e.KEYCODE_DPAD_LEFT=21,e.KEYCODE_DPAD_RIGHT=22,e.KEYCODE_DPAD_UP=19,e.KEYCODE_DPAD_UP_LEFT=268,e.KEYCODE_DPAD_UP_RIGHT=270,e.KEYCODE_DVR=173,e.KEYCODE_E=33,e.KEYCODE_EISU=212,e.KEYCODE_ENDCALL=6,e.KEYCODE_ENTER=66,e.KEYCODE_ENVELOPE=65,e.KEYCODE_EQUALS=70,e.KEYCODE_ESCAPE=111,e.KEYCODE_EXPLORER=64,e.KEYCODE_F=34,e.KEYCODE_F1=131,e.KEYCODE_F10=140,e.KEYCODE_F11=141,e.KEYCODE_F12=142,e.KEYCODE_F2=132,e.KEYCODE_F3=133,e.KEYCODE_F4=134,e.KEYCODE_F5=135,e.KEYCODE_F6=136,e.KEYCODE_F7=137,e.KEYCODE_F8=138,e.KEYCODE_F9=139,e.KEYCODE_FOCUS=80,e.KEYCODE_FORWARD=125,e.KEYCODE_FORWARD_DEL=112,e.KEYCODE_FUNCTION=119,e.KEYCODE_G=35,e.KEYCODE_GRAVE=68,e.KEYCODE_GUIDE=172,e.KEYCODE_H=36,e.KEYCODE_HEADSETHOOK=79,e.KEYCODE_HELP=259,e.KEYCODE_HENKAN=214,e.KEYCODE_HOME=3,e.KEYCODE_I=37,e.KEYCODE_INFO=165,e.KEYCODE_INSERT=124,e.KEYCODE_J=38,e.KEYCODE_K=39,e.KEYCODE_KANA=218,e.KEYCODE_KATAKANA_HIRAGANA=215,e.KEYCODE_L=40,e.KEYCODE_LANGUAGE_SWITCH=204,e.KEYCODE_LAST_CHANNEL=229,e.KEYCODE_LEFT_BRACKET=71,e.KEYCODE_M=41,e.KEYCODE_MANNER_MODE=205,e.KEYCODE_MEDIA_AUDIO_TRACK=222,e.KEYCODE_MEDIA_CLOSE=128,e.KEYCODE_MEDIA_EJECT=129,e.KEYCODE_MEDIA_FAST_FORWARD=90,e.KEYCODE_MEDIA_NEXT=87,e.KEYCODE_MEDIA_PAUSE=127,e.KEYCODE_MEDIA_PLAY=126,e.KEYCODE_MEDIA_PLAY_PAUSE=85,e.KEYCODE_MEDIA_PREVIOUS=88,e.KEYCODE_MEDIA_RECORD=130,e.KEYCODE_MEDIA_REWIND=89,e.KEYCODE_MEDIA_SKIP_BACKWARD=273,e.KEYCODE_MEDIA_SKIP_FORWARD=272,e.KEYCODE_MEDIA_STEP_BACKWARD=275,e.KEYCODE_MEDIA_STEP_FORWARD=274,e.KEYCODE_MEDIA_STOP=86,e.KEYCODE_MEDIA_TOP_MENU=226,e.KEYCODE_MENU=82,e.KEYCODE_META_LEFT=117,e.KEYCODE_META_RIGHT=118,e.KEYCODE_MINUS=69,e.KEYCODE_MOVE_END=123,e.KEYCODE_MOVE_HOME=122,e.KEYCODE_MUHENKAN=213,e.KEYCODE_MUSIC=209,e.KEYCODE_MUTE=91,e.KEYCODE_N=42,e.KEYCODE_NAVIGATE_IN=262,e.KEYCODE_NAVIGATE_NEXT=261,e.KEYCODE_NAVIGATE_OUT=263,e.KEYCODE_NAVIGATE_PREVIOUS=260,e.KEYCODE_NOTIFICATION=83,e.KEYCODE_NUM=78,e.KEYCODE_NUMPAD_0=144,e.KEYCODE_NUMPAD_1=145,e.KEYCODE_NUMPAD_2=146,e.KEYCODE_NUMPAD_3=147,e.KEYCODE_NUMPAD_4=148,e.KEYCODE_NUMPAD_5=149,e.KEYCODE_NUMPAD_6=150,e.KEYCODE_NUMPAD_7=151,e.KEYCODE_NUMPAD_8=152,e.KEYCODE_NUMPAD_9=153,e.KEYCODE_NUMPAD_ADD=157,e.KEYCODE_NUMPAD_COMMA=159,e.KEYCODE_NUMPAD_DIVIDE=154,e.KEYCODE_NUMPAD_DOT=158,e.KEYCODE_NUMPAD_ENTER=160,e.KEYCODE_NUMPAD_EQUALS=161,e.KEYCODE_NUMPAD_LEFT_PAREN=162,e.KEYCODE_NUMPAD_MULTIPLY=155,e.KEYCODE_NUMPAD_RIGHT_PAREN=163,e.KEYCODE_NUMPAD_SUBTRACT=156,e.KEYCODE_NUM_LOCK=143,e.KEYCODE_O=43,e.KEYCODE_P=44,e.KEYCODE_PAGE_DOWN=93,e.KEYCODE_PAGE_UP=92,e.KEYCODE_PAIRING=225,e.KEYCODE_PASTE=279,e.KEYCODE_PERIOD=56,e.KEYCODE_PICTSYMBOLS=94,e.KEYCODE_PLUS=81,e.KEYCODE_POUND=18,e.KEYCODE_POWER=26,e.KEYCODE_PROFILE_SWITCH=288,e.KEYCODE_PROG_BLUE=186,e.KEYCODE_PROG_GREEN=184,e.KEYCODE_PROG_RED=183,e.KEYCODE_PROG_YELLOW=185,e.KEYCODE_Q=45,e.KEYCODE_R=46,e.KEYCODE_REFRESH=285,e.KEYCODE_RIGHT_BRACKET=72,e.KEYCODE_RO=217,e.KEYCODE_S=47,e.KEYCODE_SCROLL_LOCK=116,e.KEYCODE_SEARCH=84,e.KEYCODE_SEMICOLON=74,e.KEYCODE_SETTINGS=176,e.KEYCODE_SHIFT_LEFT=59,e.KEYCODE_SHIFT_RIGHT=60,e.KEYCODE_SLASH=76,e.KEYCODE_SLEEP=223,e.KEYCODE_SOFT_LEFT=1,e.KEYCODE_SOFT_RIGHT=2,e.KEYCODE_SOFT_SLEEP=276,e.KEYCODE_SPACE=62,e.KEYCODE_STAR=17,e.KEYCODE_STB_INPUT=180,e.KEYCODE_STB_POWER=179,e.KEYCODE_STEM_1=265,e.KEYCODE_STEM_2=266,e.KEYCODE_STEM_3=267,e.KEYCODE_STEM_PRIMARY=264,e.KEYCODE_SWITCH_CHARSET=95,e.KEYCODE_SYM=63,e.KEYCODE_SYSRQ=120,e.KEYCODE_SYSTEM_NAVIGATION_DOWN=281,e.KEYCODE_SYSTEM_NAVIGATION_LEFT=282,e.KEYCODE_SYSTEM_NAVIGATION_RIGHT=283,e.KEYCODE_SYSTEM_NAVIGATION_UP=280,e.KEYCODE_T=48,e.KEYCODE_TAB=61,e.KEYCODE_THUMBS_DOWN=287,e.KEYCODE_THUMBS_UP=286,e.KEYCODE_TV=170,e.KEYCODE_TV_ANTENNA_CABLE=242,e.KEYCODE_TV_AUDIO_DESCRIPTION=252,e.KEYCODE_TV_AUDIO_DESCRIPTION_MIX_DOWN=254,e.KEYCODE_TV_AUDIO_DESCRIPTION_MIX_UP=253,e.KEYCODE_TV_CONTENTS_MENU=256,e.KEYCODE_TV_DATA_SERVICE=230,e.KEYCODE_TV_INPUT=178,e.KEYCODE_TV_INPUT_COMPONENT_1=249,e.KEYCODE_TV_INPUT_COMPONENT_2=250,e.KEYCODE_TV_INPUT_COMPOSITE_1=247,e.KEYCODE_TV_INPUT_COMPOSITE_2=248,e.KEYCODE_TV_INPUT_HDMI_1=243,e.KEYCODE_TV_INPUT_HDMI_2=244,e.KEYCODE_TV_INPUT_HDMI_3=245,e.KEYCODE_TV_INPUT_HDMI_4=246,e.KEYCODE_TV_INPUT_VGA_1=251,e.KEYCODE_TV_MEDIA_CONTEXT_MENU=257,e.KEYCODE_TV_NETWORK=241,e.KEYCODE_TV_NUMBER_ENTRY=234,e.KEYCODE_TV_POWER=177,e.KEYCODE_TV_RADIO_SERVICE=232,e.KEYCODE_TV_SATELLITE=237,e.KEYCODE_TV_SATELLITE_BS=238,e.KEYCODE_TV_SATELLITE_CS=239,e.KEYCODE_TV_SATELLITE_SERVICE=240,e.KEYCODE_TV_TELETEXT=233,e.KEYCODE_TV_TERRESTRIAL_ANALOG=235,e.KEYCODE_TV_TERRESTRIAL_DIGITAL=236,e.KEYCODE_TV_TIMER_PROGRAMMING=258,e.KEYCODE_TV_ZOOM_MODE=255,e.KEYCODE_U=49,e.KEYCODE_UNKNOWN=0,e.KEYCODE_V=50,e.KEYCODE_VOICE_ASSIST=231,e.KEYCODE_VOLUME_DOWN=25,e.KEYCODE_VOLUME_MUTE=164,e.KEYCODE_VOLUME_UP=24,e.KEYCODE_W=51,e.KEYCODE_WAKEUP=224,e.KEYCODE_WINDOW=171,e.KEYCODE_X=52,e.KEYCODE_Y=53,e.KEYCODE_YEN=216,e.KEYCODE_Z=54,e.KEYCODE_ZENKAKU_HANKAKU=211,e.KEYCODE_ZOOM_IN=168,e.KEYCODE_ZOOM_OUT=169,e.META_ALT_LEFT_ON=16,e.META_ALT_MASK=50,e.META_ALT_ON=2,e.META_ALT_RIGHT_ON=32,e.META_CAPS_LOCK_ON=1048576,e.META_CTRL_LEFT_ON=8192,e.META_CTRL_MASK=28672,e.META_CTRL_ON=4096,e.META_CTRL_RIGHT_ON=16384,e.META_FUNCTION_ON=8,e.META_META_LEFT_ON=131072,e.META_META_MASK=458752,e.META_META_ON=65536,e.META_META_RIGHT_ON=262144,e.META_NUM_LOCK_ON=2097152,e.META_SCROLL_LOCK_ON=4194304,e.META_SHIFT_LEFT_ON=64,e.META_SHIFT_MASK=193,e.META_SHIFT_ON=1,e.META_SHIFT_RIGHT_ON=128,e.META_SYM_ON=4,e}();t.default=r},2742:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigureScrcpy=void 0;var n=r(655);r(6363);var i=n.__importDefault(r(8442)),o=r(3247),a=n.__importDefault(r(8626)),s=n.__importDefault(r(8281)),u=r(8535),c=r(7398),l=n.__importDefault(r(9805)),d=r(3098),f=r(58),h=r(3003),p=function(e){function t(t,r,i){var a=e.call(this,i)||this;return a.tracker=t,a.statusText="",a.connectionCount=0,a.onEncoders=function(e){for(var t,r=a.encoderSelectElement||document.createElement("select");t=r.firstChild;)r.removeChild(t);e.unshift(""),e.forEach((function(e){var t=document.createElement("option");t.setAttribute("value",e),t.innerText=e,r.appendChild(t)})),a.encoderSelectElement=r},a.onDisplayInfo=function(e){var t;a.statusText="Ready",a.updateStatus(),null===(t=a.dialogContainer)||void 0===t||t.classList.add("ready");for(var r,n=a.displayIdSelectElement||document.createElement("select");r=n.firstChild;)n.removeChild(r);var i=-1;if(e.forEach((function(e,t){var r=e.displayInfo,o=r.displayId,s=r.size,c=document.createElement("option");c.setAttribute("value",o.toString()),c.innerText="ID: ".concat(o,"; ").concat(s.width,"x").concat(s.height),n.appendChild(c),(a.displayInfo&&a.displayInfo.displayId===o||!a.displayInfo&&o===u.DisplayInfo.DEFAULT_DISPLAY)&&(i=t)})),i>-1){n.selectedIndex=i;var o=e[i],s=o.videoSettings,c=o.connectionCount,l=o.displayInfo;a.displayInfo=l,c>0&&s?a.fillInputsFromVideoSettings(s,!1):a.updateVideoSettingsForPlayer(),a.connectionCount=c,a.updateStatus()}a.displayIdSelectElement=n,a.dialogBody&&(a.dialogBody.classList.remove("hidden"),a.dialogBody.classList.add("visible"))},a.onConnected=function(){a.statusText="Waiting for info...",a.updateStatus(),a.okButton&&(a.okButton.disabled=!1)},a.onDisconnected=function(){a.statusText="Disconnected",a.updateStatus(),a.okButton&&(a.okButton.disabled=!0),a.dialogBody&&(a.dialogBody.classList.remove("visible"),a.dialogBody.classList.add("hidden"))},a.onPlayerChange=function(){a.updateVideoSettingsForPlayer()},a.onDisplayIdChange=function(){var e=a.displayIdSelectElement;if(e&&a.streamReceiver){var t=e.options[e.selectedIndex].value,r=parseInt(t,10);isNaN(r)||(a.displayInfo=a.streamReceiver.getDisplayInfo(r)),a.updateVideoSettingsForPlayer()}},a.onBackgroundClick=function(e){e.target===e.currentTarget&&a.cancel()},a.cancel=function(){a.streamReceiver&&(a.detachEventsListeners(a.streamReceiver),a.streamReceiver.stop()),a.emit("closed",{dialog:a,result:!1}),a.removeUI()},a.resetSettings=function(){var e=a.getPlayer();e&&a.fillInputsFromVideoSettings(e.getPreferredVideoSetting(),!1)},a.loadSettings=function(){a.updateVideoSettingsForPlayer()},a.saveSettings=function(){var e=a.buildVideoSettings(),t=a.getPlayer();if(e&&t){var r=a.getFitToScreenValue();t.saveVideoSettings(a.udid,e,r,a.displayInfo)}},a.openStream=function(){var e=a.buildVideoSettings();if(e&&a.streamReceiver&&a.playerName){var t=a.getFitToScreenValue();a.detachEventsListeners(a.streamReceiver),a.emit("closed",{dialog:a,result:!0}),a.removeUI();var r=o.StreamClientScrcpy.createPlayer(a.playerName,a.udid,a.displayInfo);if(r){a.setPreviouslyUsedPlayer(a.playerName),r.setVideoSettings(e,t,!1);var i=n.__assign(n.__assign({},a.params),{udid:a.udid,fitToScreen:t});o.StreamClientScrcpy.start(i,a.streamReceiver,r,t,e),a.streamReceiver.triggerInitialInfoEvents()}}},a.udid=r.udid,a.escapedUdid=s.default.escapeUdid(a.udid),a.playerStorageKey="configure_stream::".concat(a.escapedUdid,"::player"),a.deviceName=r["ro.product.model"],a.TAG="ConfigureScrcpy[".concat(a.udid,"]"),a.createStreamReceiver(i),a.setTitle("".concat(a.deviceName,". Configure stream")),a.background=a.createUI(),a}return n.__extends(t,e),t.prototype.getTracker=function(){return this.tracker},t.prototype.createStreamReceiver=function(e){this.streamReceiver&&(this.detachEventsListeners(this.streamReceiver),this.streamReceiver.stop()),this.streamReceiver=new h.StreamReceiverScrcpy(e),this.attachEventsListeners(this.streamReceiver)},t.prototype.attachEventsListeners=function(e){e.on("encoders",this.onEncoders),e.on("displayInfo",this.onDisplayInfo),e.on("connected",this.onConnected),e.on("disconnected",this.onDisconnected)},t.prototype.detachEventsListeners=function(e){e.off("encoders",this.onEncoders),e.off("displayInfo",this.onDisplayInfo),e.off("connected",this.onConnected),e.off("disconnected",this.onDisconnected)},t.prototype.updateStatus=function(){if(this.connectionStatusElement){var e=this.statusText;this.connectionCount&&(e="".concat(e,". Other clients: ").concat(this.connectionCount,".")),this.connectionStatusElement.innerText=e}},t.prototype.getPlayer=function(){if(this.playerSelectElement){var e=this.playerSelectElement.options[this.playerSelectElement.selectedIndex].value;return o.StreamClientScrcpy.getPlayers().find((function(t){return t.playerFullName===e}))}},t.prototype.updateVideoSettingsForPlayer=function(){var e=this.getPlayer();if(e){this.playerName=e.playerFullName;var t=e.loadVideoSettings(this.udid,this.displayInfo),r=e.getFitToScreenStatus(this.udid,this.displayInfo);this.fillInputsFromVideoSettings(t,r)}},t.prototype.getBasicInput=function(e){return document.getElementById("".concat(e,"_").concat(this.escapedUdid))||null},t.prototype.fillInputsFromVideoSettings=function(e,t){if(this.displayInfo&&this.displayInfo.displayId!==e.displayId&&console.error(this.TAG,"Display id from VideoSettings and DisplayInfo don't match"),this.fillBasicInput({id:"bitrate"},e),this.fillBasicInput({id:"maxFps"},e),this.fillBasicInput({id:"iFrameInterval"},e),this.fillBasicInput({id:"codecOptions"},e),e.bounds){var r=e.bounds,n=r.width,i=r.height,o=this.getBasicInput("maxWidth");o&&(o.value=n.toString(10));var a=this.getBasicInput("maxHeight");a&&(a.value=i.toString(10))}if(this.encoderSelectElement){var s=e.encoderName||"",u=Array.from(this.encoderSelectElement.options).find((function(e){return e.value===s}));u&&(this.encoderSelectElement.selectedIndex=u.index)}this.fitToScreenCheckbox&&(this.fitToScreenCheckbox.checked=t,this.onFitToScreenChanged(t))},t.prototype.onFitToScreenChanged=function(e){var t=this.getBasicInput("maxHeight"),r=this.getBasicInput("maxWidth");if(this.fitToScreenCheckbox&&t&&r)if(t.disabled=r.disabled=e,e)t.setAttribute(f.Attribute.VALUE,t.value),t.value="",r.setAttribute(f.Attribute.VALUE,r.value),r.value="";else{var n=t.getAttribute(f.Attribute.VALUE);"string"==typeof n&&(t.value=n,t.removeAttribute(f.Attribute.VALUE));var i=r.getAttribute(f.Attribute.VALUE);"string"==typeof i&&(r.value=i,r.removeAttribute(f.Attribute.VALUE))}},t.prototype.fillBasicInput=function(e,t){var r=this.getBasicInput(e.id),n=t[e.id];r&&(void 0!==n&&"-"!==n&&0!==n&&null!==n?(r.value=n.toString(10),"range"===r.getAttribute("type")&&r.dispatchEvent(new Event("input"))):r.value="")},t.prototype.appendBasicInput=function(e,t){var r=document.createElement("label");r.classList.add("label"),r.innerText="".concat(t.label,":"),r.id="label_".concat(t.id,"_").concat(this.escapedUdid),e.appendChild(r);var n=document.createElement("input");n.classList.add("input"),n.id=r.htmlFor="".concat(t.id,"_").concat(this.escapedUdid);var i=t.range;return i&&(r.setAttribute("title",t.label),n.oninput=function(){var e=i.formatter?i.formatter(parseInt(n.value,10)):n.value;r.innerText="".concat(t.label," (").concat(e,"):")},n.setAttribute("type","range"),n.setAttribute("max",i.max.toString()),n.setAttribute("min",i.min.toString()),n.setAttribute("step",i.step.toString())),e.appendChild(n),n},t.prototype.getNumberValueFromInput=function(e){var t=document.getElementById("".concat(e,"_").concat(this.escapedUdid)).value;return parseInt(t,10)},t.prototype.getStringValueFromInput=function(e){return document.getElementById("".concat(e,"_").concat(this.escapedUdid)).value},t.prototype.getValueFromSelect=function(e){var t=document.getElementById("".concat(e,"_").concat(this.escapedUdid));return t.options[t.selectedIndex].value},t.prototype.buildVideoSettings=function(){try{var e=this.getNumberValueFromInput("bitrate"),t=this.getNumberValueFromInput("maxFps"),r=this.getNumberValueFromInput("iFrameInterval"),n=this.getNumberValueFromInput("maxWidth"),o=this.getNumberValueFromInput("maxHeight"),s=this.getNumberValueFromInput("displayId"),u=this.getStringValueFromInput("codecOptions")||void 0,c=void 0;!isNaN(n)&&!isNaN(o)&&n&&o&&(c=new a.default(n,o));var l=this.getValueFromSelect("encoderName")||void 0;return new i.default({bitrate:e,bounds:c,maxFps:t,iFrameInterval:r,displayId:s,codecOptions:u,encoderName:l})}catch(e){return console.error(this.TAG,e.message),null}},t.prototype.getFitToScreenValue=function(){return!!this.fitToScreenCheckbox&&this.fitToScreenCheckbox.checked},t.prototype.getPreviouslyUsedPlayer=function(){return window.localStorage&&window.localStorage.getItem(this.playerStorageKey)||""},t.prototype.setPreviouslyUsedPlayer=function(e){window.localStorage&&window.localStorage.setItem(this.playerStorageKey,e)},t.prototype.createUI=function(){var e=this,t="configureDialog",r="dialog-block",n=document.createElement("div");n.classList.add("dialog-background",t);var i=this.dialogContainer=document.createElement("div");i.classList.add("dialog-container",t);var a=document.createElement("div");a.classList.add("dialog-header",t,"control-wrapper");var u=new c.ToolBoxButton("Back",l.default.Icon.ARROW_BACK);u.addEventListener("click",(function(){e.cancel()})),u.getAllElements().forEach((function(e){a.appendChild(e)}));var f=document.createElement("span");f.classList.add("dialog-title","main-title"),f.innerText=this.deviceName,a.appendChild(f);var h=this.dialogBody=document.createElement("div");h.classList.add("dialog-body",r,t,"hidden");var p=document.createElement("div");p.classList.add("controls");var m=document.createElement("label");m.classList.add("label"),m.innerText="Player:",p.appendChild(m);var v=this.playerSelectElement=document.createElement("select");v.classList.add("input"),v.id=m.htmlFor="player_".concat(this.escapedUdid),p.appendChild(v),h.appendChild(p);var E=this.getPreviouslyUsedPlayer();o.StreamClientScrcpy.getPlayers().forEach((function(e,t){var r=e.playerFullName,n=document.createElement("option");n.setAttribute("value",r),n.innerText=r,v.appendChild(n),r===E&&(v.selectedIndex=t)})),v.onchange=this.onPlayerChange,this.updateVideoSettingsForPlayer();var y=document.createElement("div");y.classList.add("controls","control-wrapper");var g=document.createElement("label");g.classList.add("label"),g.innerText="Display:",y.appendChild(g),this.displayIdSelectElement||(this.displayIdSelectElement=document.createElement("select")),y.appendChild(this.displayIdSelectElement),this.displayIdSelectElement.classList.add("input"),this.displayIdSelectElement.id=g.htmlFor="displayId_".concat(this.escapedUdid),this.displayIdSelectElement.onchange=this.onDisplayIdChange,this.appendBasicInput(y,{label:"Bitrate",id:"bitrate",range:{min:524288,max:8388608,step:524288,formatter:s.default.prettyBytes}}),this.appendBasicInput(y,{label:"Max FPS",id:"maxFps",range:{min:1,max:60,step:1}}),this.appendBasicInput(y,{label:"I-Frame interval",id:"iFrameInterval"});var _=document.createElement("label");_.innerText="Fit to screen",_.classList.add("label"),y.appendChild(_);var S=new d.ToolBoxCheckbox("Fit to screen",{off:l.default.Icon.TOGGLE_OFF,on:l.default.Icon.TOGGLE_ON},"fit_to_screen");S.getAllElements().forEach((function(t){y.appendChild(t),t instanceof HTMLLabelElement&&(_.htmlFor=t.htmlFor,t.classList.add("input")),t instanceof HTMLInputElement&&(e.fitToScreenCheckbox=t)})),S.addEventListener("click",(function(t,r){var n=r.getElement();e.onFitToScreenChanged(n.checked)})),this.appendBasicInput(y,{label:"Max width",id:"maxWidth"}),this.appendBasicInput(y,{label:"Max height",id:"maxHeight"}),this.appendBasicInput(y,{label:"Codec options",id:"codecOptions"});var C=document.createElement("label");C.classList.add("label"),C.innerText="Encoder:",y.appendChild(C),this.encoderSelectElement||(this.encoderSelectElement=document.createElement("select")),y.appendChild(this.encoderSelectElement),this.encoderSelectElement.classList.add("input"),this.encoderSelectElement.id=C.htmlFor="encoderName_".concat(this.escapedUdid),h.appendChild(y);var T=document.createElement("div");T.classList.add("controls");var b=this.resetSettingsButton=document.createElement("button");b.classList.add("button"),b.innerText="Reset settings",b.addEventListener("click",this.resetSettings),T.appendChild(b);var w=this.loadSettingsButton=document.createElement("button");w.classList.add("button"),w.innerText="Load settings",w.addEventListener("click",this.loadSettings),T.appendChild(w);var O=this.saveSettingsButton=document.createElement("button");O.classList.add("button"),O.innerText="Save settings",O.addEventListener("click",this.saveSettings),T.appendChild(O),h.appendChild(T);var I=document.createElement("div");I.classList.add("dialog-footer",r,t);var D=document.createElement("span");D.classList.add("subtitle"),this.connectionStatusElement=D,I.appendChild(D),this.statusText="Connecting...",this.updateStatus();var A=this.okButton=document.createElement("button");return A.innerText="Open",A.disabled=!0,A.addEventListener("click",this.openStream),I.appendChild(A),h.appendChild(I),i.appendChild(a),i.appendChild(h),i.appendChild(I),n.appendChild(i),n.addEventListener("click",this.onBackgroundClick),document.body.appendChild(n),n},t.prototype.removeUI=function(){var e,t,r,n;document.body.removeChild(this.background),null===(e=this.okButton)||void 0===e||e.removeEventListener("click",this.openStream),null===(t=this.resetSettingsButton)||void 0===t||t.removeEventListener("click",this.resetSettings),null===(r=this.loadSettingsButton)||void 0===r||r.removeEventListener("click",this.loadSettings),null===(n=this.saveSettingsButton)||void 0===n||n.removeEventListener("click",this.saveSettings),this.background.removeEventListener("click",this.onBackgroundClick)},t}(r(6257).BaseClient);t.ConfigureScrcpy=p},8930:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DeviceTracker=void 0;var n=r(655);r(5131);var i,o=r(1286),a=r(7928),s=r(483),u=r(7525),c=r(3247),l=n.__importDefault(r(9805)),d=r(9416),f=n.__importDefault(r(8281)),h=r(58),p=r(6417),m=r(6222),v=[{title:"Net Interface",field:"interfaces"},{title:"Server PID",field:"pid"}],E=function(e){function t(r,i){var o=e.call(this,n.__assign(n.__assign({},r),{action:t.ACTION}),i)||this;return o.tableId="goog_device_list",o.onInterfaceSelected=function(e){var t=e.currentTarget,r=t.selectedOptions[0],n=decodeURI(r.getAttribute(h.Attribute.URL)||""),i=r.getAttribute(h.Attribute.NAME)||"",a=decodeURIComponent(t.getAttribute(h.Attribute.FULL_NAME)||""),s=t.getAttribute(h.Attribute.UDID)||"";o.updateLink({url:n,name:i,fullName:a,udid:s,store:!0})},o.onActionButtonClick=function(e){var t=e.currentTarget,r=t.getAttribute(h.Attribute.UDID),n=t.getAttribute(h.Attribute.PID)||"",i=t.getAttribute(h.Attribute.COMMAND),a=parseInt(n,10),s={id:o.getNextId(),type:i,data:{udid:"string"==typeof r?r:void 0,pid:isNaN(a)?void 0:a}};o.ws&&o.ws.readyState===o.ws.OPEN&&o.ws.send(JSON.stringify(s))},t.instancesByUrl.set(i,o),o.buildDeviceTable(),o.openNewConnection(),o}return n.__extends(t,e),t.start=function(e){var r=this.buildUrlForTracker(e).toString(),n=this.instancesByUrl.get(r);return n||(n=new t(e,r)),n},t.getInstance=function(e){return this.start(e)},t.prototype.onSocketOpen=function(){},t.prototype.setIdAndHostName=function(r,i){var o,a;e.prototype.setIdAndHostName.call(this,r,i);try{for(var s=n.__values(t.instancesByUrl.values()),u=s.next();!u.done;u=s.next()){var c=u.value;c.id===r&&c!==this&&(console.warn('Tracker with url: "'.concat(this.url,'" has the same id(').concat(this.id,') as tracker with url "').concat(c.url,'"')),console.warn("This tracker will shut down"),this.destroy())}}catch(e){o={error:e}}finally{try{u&&!u.done&&(a=s.return)&&a.call(s)}finally{if(o)throw o.error}}},t.prototype.updateLink=function(e){var r=this,n=e.url,i=e.name,o=e.fullName,a=e.udid,u=e.store,c=document.getElementsByName(encodeURIComponent("".concat(t.AttributePrefixPlayerFor).concat(o)));if("string"==typeof a){if(u){var l=t.getLocalStorageKey(o||"");localStorage&&i&&localStorage.setItem(l,i)}var d=s.ACTION.STREAM_SCRCPY;c.forEach((function(e){e.innerHTML="";var i=e.getAttribute(t.AttributePlayerFullName),o=e.getAttribute(t.AttributePlayerCodeName);if(i&&o){var s=t.buildLink({action:d,udid:a,player:decodeURIComponent(o),ws:n},decodeURIComponent(i),r.params);e.appendChild(s)}}))}},t.getLocalStorageKey=function(e){return"device_list::".concat(e,"::interface")},t.createUrl=function(e,t){void 0===t&&(t="");var r=!!e.secure,i=e.hostname||location.hostname,o="number"==typeof e.port?e.port:r?443:80,u=this.buildUrl(n.__assign(n.__assign({},e),{secure:r,hostname:i,port:o}));return t&&(u.searchParams.set("action",s.ACTION.PROXY_ADB),u.searchParams.set("remote","tcp:".concat(a.SERVER_PORT.toString(10))),u.searchParams.set("udid",t)),u},t.createInterfaceOption=function(e,t){var r=document.createElement("option");return r.setAttribute(h.Attribute.URL,t),r.setAttribute(h.Attribute.NAME,e),r.innerText="proxy over adb",r},t.titleToClassName=function(e){return e.toLowerCase().replace(/\s/g,"_")},t.prototype.buildDeviceRow=function(e,r){var o=this,s="",m="",E="desc-block",y="".concat(this.id,"_").concat(f.default.escapeUdid(r.udid)),g=r.state===p.DeviceState.DEVICE,_=!1,S="device_services_".concat(y),C=(0,d.html)(i||(i=n.__makeTemplateObject(['<div class="device ','">\n            <div class="device-header">\n                <div class="device-name">'," ",'</div>\n                <div class="device-serial">','</div>\n                <div class="device-version">\n                    <div class="release-version">','</div>\n                    <div class="sdk-version">','</div>\n                </div>\n                <div class="device-state" title="State: ','"></div>\n            </div>\n            <div id="','" class="services"></div>\n        </div>'],['<div class="device ','">\n            <div class="device-header">\n                <div class="device-name">'," ",'</div>\n                <div class="device-serial">','</div>\n                <div class="device-version">\n                    <div class="release-version">','</div>\n                    <div class="sdk-version">','</div>\n                </div>\n                <div class="device-state" title="State: ','"></div>\n            </div>\n            <div id="','" class="services"></div>\n        </div>'])),g?"active":"not-active",r["ro.product.manufacturer"],r["ro.product.model"],r.udid,r["ro.build.version.release"],r["ro.build.version.sdk"],r.state,S).content,T=C.getElementById(S);if(T){t.tools.forEach((function(e){var t=e.createEntryForDeviceList(r,E,o.params);t&&(Array.isArray(t)?t.forEach((function(e){e&&T.appendChild(e)})):T.appendChild(t))}));var b=c.StreamClientScrcpy.createEntryForDeviceList(r,E,y,this.params);if(b&&T.appendChild(b),v.forEach((function(e){var i,c=e.title,d=e.field;i="string"==typeof e.field?""+r[e.field]:e.field(r);var f=document.createElement("div");if(f.classList.add(t.titleToClassName(c),E),T.appendChild(f),"pid"===d){_="-1"!==i,(A=document.createElement("button")).className="action-button kill-server-button",A.setAttribute(h.Attribute.UDID,r.udid),A.setAttribute(h.Attribute.PID,i);var p=void 0;if(g)A.classList.add("active"),A.onclick=o.onActionButtonClick,_?(p=u.ControlCenterCommand.KILL_SERVER,A.title="Kill server",A.appendChild(l.default.create(l.default.Icon.CANCEL))):(p=u.ControlCenterCommand.START_SERVER,A.title="Start server",A.appendChild(l.default.create(l.default.Icon.REFRESH))),A.setAttribute(h.Attribute.COMMAND,p);else{var v=r["last.update.timestamp"];if(v){var S=new Date(v);A.title="Last update on ".concat(S.toLocaleDateString()," at ").concat(S.toLocaleTimeString())}else A.title="Not active";A.appendChild(l.default.create(l.default.Icon.OFFLINE))}var C=document.createElement("span");C.innerText=i,A.appendChild(C),f.appendChild(A)}else if("interfaces"===d){var b=t.createUrl(o.params,r.udid).toString(),w="proxy",O=t.getLocalStorageKey(y),I=localStorage&&localStorage.getItem(O),D=document.createElement("select");if(D.setAttribute(h.Attribute.UDID,r.udid),D.setAttribute(h.Attribute.FULL_NAME,y),D.setAttribute("name",encodeURIComponent("".concat(t.AttributePrefixInterfaceSelectFor).concat(y))),r.interfaces.forEach((function(e){var i=n.__assign(n.__assign({},o.params),{secure:!1,hostname:e.ipv4,port:a.SERVER_PORT}),u=t.createUrl(i).toString(),c=t.createInterfaceOption(e.name,u);c.innerText="".concat(e.name,": ").concat(e.ipv4),D.appendChild(c),I?I!==e.name&&m||(c.selected=!0,s=u,m=e.name):r["wifi.interface"]===e.name&&(c.selected=!0)})),g){var A,P=t.createInterfaceOption(w,b);I!==w&&m||(P.selected=!0,s=b,m=w),D.appendChild(P),(A=document.createElement("button")).className="action-button update-interfaces-button active",A.title="Update information",A.appendChild(l.default.create(l.default.Icon.REFRESH)),A.setAttribute(h.Attribute.UDID,r.udid),A.setAttribute(h.Attribute.COMMAND,u.ControlCenterCommand.UPDATE_INTERFACES),A.onclick=o.onActionButtonClick,f.appendChild(A)}D.onchange=o.onInterfaceSelected,f.appendChild(D)}else f.innerText=i})),t.CREATE_DIRECT_LINKS){var w="".concat(t.AttributePrefixPlayerFor).concat(y);c.StreamClientScrcpy.getPlayers().forEach((function(e){var r=e.playerCodeName,n=e.playerFullName,i=document.createElement("div");i.classList.add(E),i.setAttribute("name",encodeURIComponent(w)),i.setAttribute(t.AttributePlayerFullName,encodeURIComponent(n)),i.setAttribute(t.AttributePlayerCodeName,encodeURIComponent(r)),T.appendChild(i)}))}e.appendChild(C),t.CREATE_DIRECT_LINKS&&_&&s&&this.updateLink({url:s,name:m,fullName:y,udid:r.udid,store:!1})}},t.prototype.getChannelCode=function(){return m.ChannelCode.GTRC},t.prototype.destroy=function(){if(e.prototype.destroy.call(this),t.instancesByUrl.delete(this.url.toString()),!t.instancesByUrl.size){var r=document.getElementById(o.BaseDeviceTracker.HOLDER_ELEMENT_ID);r&&r.parentElement&&r.parentElement.removeChild(r)}},t.ACTION=s.ACTION.GOOG_DEVICE_LIST,t.CREATE_DIRECT_LINKS=!0,t.instancesByUrl=new Map,t.tools=new Set,t}(o.BaseDeviceTracker);t.DeviceTracker=E},2984:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DevtoolsClient=void 0;var n=r(655);r(3072);var i=r(1342),o=r(483),a=r(4120),s=r(1286),u=n.__importDefault(r(8281)),c=/^https?:\/\/chrome-devtools-frontend\.appspot\.com\/serve_rev\/(@.*)/,l="[DevtoolsClient]",d=function(e){function t(t){var r=e.call(this,t)||this;return r.requestListUpdate=function(){r.timeout=void 0,r.ws&&r.ws.readyState===r.ws.OPEN&&r.ws.send(JSON.stringify({command:a.RemoteDevtoolsCommand.LIST_DEVTOOLS}))},r.onDevtoolsLinkClick=function(e){var t=e.target.getAttribute("href");t&&(r.hiddenInput.value=t,r.hiddenInput.removeAttribute("hidden"),r.hiddenInput.select(),r.hiddenInput.setSelectionRange(0,t.length),document.execCommand("copy"),r.hiddenInput.setAttribute("hidden","hidden"),r.tooltip.style.left="".concat(e.clientX,"px"),r.tooltip.style.top="".concat(e.clientY,"px"),r.tooltip.style.display="block",r.hideTooltip(),e.preventDefault())},r.udid=r.params.udid,r.openNewConnection(),r.setTitle("Devtools ".concat(r.udid)),r.setBodyClass("devtools"),r.hiddenInput=document.createElement("input"),r.hiddenInput.className="hidden",r.hiddenInput.setAttribute("hidden","hidden"),document.body.appendChild(r.hiddenInput),r.tooltip=document.createElement("span"),r.tooltip.innerText="Copied!",r.tooltip.className="tooltip",r.tooltip.style.display="none",document.body.appendChild(r.tooltip),r}return n.__extends(t,e),t.start=function(e){return new t(e)},t.parseParameters=function(t){var r=e.parseParameters.call(this,t),i=r.action;if(i!==o.ACTION.DEVTOOLS)throw Error("Incorrect action");return n.__assign(n.__assign({},r),{action:i,udid:u.default.parseString(t,"udid",!0)})},t.prototype.buildDirectWebSocketUrl=function(){var t=e.prototype.buildDirectWebSocketUrl.call(this);return"string"==typeof this.params.udid&&t.searchParams.set("udid",this.params.udid),t},t.prototype.onSocketClose=function(e){var t=this;console.error(l,"Socket closed. Code: ".concat(e.code,".").concat(e.reason?" Reason: "+e.reason:"")),setTimeout((function(){t.openNewConnection()}),2e3)},t.prototype.onSocketMessage=function(e){var r;try{r=JSON.parse(e.data)}catch(e){return console.error(l,e.message),void console.log(l,e.data)}if(r.type===t.ACTION){var n=r.data;this.buildList(n),this.timeout||(this.timeout=window.setTimeout(this.requestListUpdate,t.TIMEOUT))}else console.log(l,"Unknown message type: ".concat(r.type))},t.prototype.onSocketOpen=function(){this.requestListUpdate()},t.prototype.createDeviceBlock=function(e){var t=document.createElement("div");return t.className="device",t.id="device:".concat(e.deviceSerial),t},t.prototype.createDeviceHeader=function(e){var t=document.createElement("div");t.className="device-header";var r=document.createElement("div");r.className="device-name",r.innerText=e.deviceName;var n=document.createElement("div");n.className="device-serial",n.innerText="#".concat(e.deviceSerial.toUpperCase());var i=document.createElement("div");return i.className="device-ports",t.appendChild(r),t.appendChild(n),t.appendChild(i),t},t.prototype.createBrowsersBlock=function(e){var r=this,n=e.deviceSerial,i=document.createElement("div");return i.className="browsers",e.browsers.sort(t.compareBrowsers).forEach((function(e){var t=r.createBrowserBlock(n,e);i.appendChild(t)})),i},t.prototype.createBrowserBlock=function(e,t){var r=this,n=t.socket,i=document.createElement("div");i.id="".concat(e,":").concat(n),i.className="browser";var o=document.createElement("div");o.className="browser-header",i.appendChild(o);var a=document.createElement("div");a.className="browser-name",o.appendChild(a);var s,u=t.version["Android-Package"],c=t.version.Browser,l=c.split("/");s=l.length>1?l[1]:c;var d=0===n.indexOf("webview")?"WebView in ":"";a.innerText="".concat(d).concat(u,"(").concat(s,")");var f=document.createElement("span");f.setAttribute("tabIndex","1"),f.className="action",f.innerText="trace",f.setAttribute("hidden","hidden"),o.appendChild(f);var h=document.createElement("div");return h.className="list pages",t.targets.forEach((function(e){h.appendChild(r.createPageBlock(e,s))})),i.appendChild(h),i},t.prototype.createPageBlock=function(e,t){var r=document.createElement("div");r.className="row";var n=document.createElement("div");if(n.className="properties-box",r.appendChild(n),e.faviconUrl){var i=document.createElement("img");i.src=e.faviconUrl,n.appendChild(i)}var o=document.createElement("div");o.className="subrow-box",n.appendChild(o);var a=document.createElement("div");a.className="subrow",o.appendChild(a);var s=document.createElement("div");s.className="name",e.title&&(s.innerText=e.title),a.appendChild(s);var u=document.createElement("div");u.className="url",e.url&&(u.innerText=e.url),a.appendChild(u);var l=document.createElement("div");if(l.className="subrow webview",o.appendChild(l),e.description)try{var d=JSON.parse(e.description),f=document.createElement("div");f.className="position",f.innerText="at (".concat(d.screenX,", ").concat(d.screenY,")"),l.appendChild(f);var h=document.createElement("div");h.className="size",h.innerText="size ".concat(d.width,"  ").concat(d.height),l.appendChild(h)}catch(e){}var p=e.devtoolsFrontendUrl&&e.devtoolsFrontendUrl.startsWith("http"),m=document.createElement("div");m.className="actions",o.appendChild(m);var v=document.createElement("a");if(v.setAttribute("tabIndex","1"),v.className="action",v.innerText="inspect",m.appendChild(v),e.devtoolsFrontendUrl?(v.setAttribute("href",e.devtoolsFrontendUrl),v.setAttribute("rel","noopener noreferrer"),v.setAttribute("target","_blank")):v.classList.add("disabled"),p||v.classList.add("disabled"),e.webSocketDebuggerUrl){var E=document.createElement("a");E.setAttribute("tabIndex","1"),E.className="action copy",E.innerText="bundled",E.title="Copy link and open manually",m.appendChild(E),E.setAttribute("href","".concat("devtools://devtools/bundled/inspector.html?experiments=true&ws=").concat(e.webSocketDebuggerUrl)),E.setAttribute("rel","noopener noreferrer"),E.setAttribute("target","_blank"),E.onclick=this.onDevtoolsLinkClick}if(e.devtoolsFrontendUrl&&e.webSocketDebuggerUrl&&p){var y=new URL(e.devtoolsFrontendUrl);y.searchParams.delete("ws");var g=y.toString().match(c);if(g){var _=g[1].split("/"),S=_.shift(),C=_.join("/"),T=t?"remoteVersion=".concat(t,"&"):"",b="ws=".concat(e.webSocketDebuggerUrl),w="devtools://devtools/remote/serve_rev/".concat(S,"/").concat(C,"?").concat(T).concat("remoteFrontend=true&dockSide=undocked&").concat(b),O=document.createElement("a");O.setAttribute("tabIndex","1"),O.className="action copy",O.innerText="remote",O.title="Copy link and open manually",m.appendChild(O),O.setAttribute("href",w),O.setAttribute("rel","noopener noreferrer"),O.setAttribute("target","_blank"),O.onclick=this.onDevtoolsLinkClick}}var I=document.createElement("span");return I.setAttribute("hidden","hidden"),I.setAttribute("tabIndex","1"),I.className="action",I.innerText="pause",m.appendChild(I),r},t.prototype.hideTooltip=function(){var e=this;this.hideTimeout&&clearTimeout(this.hideTimeout),this.hideTimeout=window.setTimeout((function(){e.hideTimeout=void 0,e.tooltip.style.display="none"}),1e3)},t.prototype.buildList=function(e){var t,r=this.createDeviceBlock(e),n=this.createDeviceHeader(e),i=this.createBrowsersBlock(e);r.appendChild(n),r.appendChild(i);var o=document.getElementById(r.id);o?null===(t=o.parentElement)||void 0===t||t.replaceChild(r,o):document.body.appendChild(r)},t.createEntryForDeviceList=function(e,t,r){if("device"===e.state){var n=document.createElement("div");return n.classList.add("devtools",t),n.appendChild(s.BaseDeviceTracker.buildLink({action:o.ACTION.DEVTOOLS,udid:e.udid},"devtools",r)),n}},t.ACTION=o.ACTION.DEVTOOLS,t.TIMEOUT=1e3,t.compareBrowsers=function(e,t){var r=e.version.Browser,n=t.version.Browser;return r>n?1:r<n?-1:0},t}(i.ManagerClient);t.DevtoolsClient=d},5220:(e,t,r)=>{"use strict";var n,i=r(8764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.FileListingClient=void 0;var o=r(655);r(9390);var a,s=r(1342),u=r(1286),c=r(483),l=o.__importDefault(r(8281)),d=o.__importDefault(r(467)),f=r(4341),h=r(9416),p=o.__importStar(r(6470)),m=r(6222),v=r(6572),E=o.__importDefault(r(7013)),y=r(7664),g="[FileListing]",_="parentDirLinkBox",S="rootDirLinkBox",C="tempDirLinkBox",T="storageDirLinkBox",b="/data/local/tmp",w="/storage";!function(e){e.Drop="drop-target",e.Connect="connect"}(a||(a={}));var O,I,D=((n={})[a.Drop]="Drop files here",n[a.Connect]="Connection lost",n),A=function(e){function t(r){var n=e.call(this,r)||this;n.enterCount=0,n.entries=[],n.requireClean=!1,n.requestedPath="",n.downloads=new Map,n.uploads=new Map,n.channels=new Set,n.parent=document.body,n.serial=n.params.udid,n.path=n.params.path,n.openNewConnection(),n.setTitle("Listing ".concat(n.serial)),n.setBodyClass("file-listing"),n.name="".concat(g," [").concat(n.serial,"]"),n.tableBodyId="".concat(l.default.escapeUdid(n.serial),"_list"),n.wrapperId="wrapper_".concat(n.tableBodyId);var i=(0,h.html)(O||(O=o.__makeTemplateObject(['<div id="','" class="listing">\n            <h1 id="header">Contents ','</h1>\n            <div id="','" class="quick-link-box">\n                <a class="icon up" href="#!" ','=".."> [parent] </a>\n            </div>\n            <div id="','" class="quick-link-box">\n                <a class="icon dir" href="#!" ','="','"> [root] </a>\n            </div>\n            <div id="','" class="quick-link-box">\n                <a class="icon dir" href="#!" ','="','/"> [storage] </a>\n            </div>\n            <div id="','" class="quick-link-box">\n                <a class="icon dir" href="#!" ','="','/"> [temp] </a>\n            </div>\n            <table>\n                <thead>\n                    <tr>\n                        <th>Name</th>\n                        <th>Size</th>\n                        <th>MTime</th>\n                    </tr>\n                </thead>\n                <tbody id="','"></tbody>\n            </table>\n        </div>'],['<div id="','" class="listing">\n            <h1 id="header">Contents ','</h1>\n            <div id="','" class="quick-link-box">\n                <a class="icon up" href="#!" ','=".."> [parent] </a>\n            </div>\n            <div id="','" class="quick-link-box">\n                <a class="icon dir" href="#!" ','="','"> [root] </a>\n            </div>\n            <div id="','" class="quick-link-box">\n                <a class="icon dir" href="#!" ','="','/"> [storage] </a>\n            </div>\n            <div id="','" class="quick-link-box">\n                <a class="icon dir" href="#!" ','="','/"> [temp] </a>\n            </div>\n            <table>\n                <thead>\n                    <tr>\n                        <th>Name</th>\n                        <th>Size</th>\n                        <th>MTime</th>\n                    </tr>\n                </thead>\n                <tbody id="','"></tbody>\n            </table>\n        </div>'])),n.wrapperId,n.path,_,t.PROPERTY_NAME,S,t.PROPERTY_NAME,"/",T,t.PROPERTY_NAME,w,C,t.PROPERTY_NAME,b,n.tableBodyId).content;n.tableBody=i.getElementById(n.tableBodyId);var a=i.getElementById(n.wrapperId);return a&&(a.addEventListener("click",(function(e){if(e.target&&e.target instanceof HTMLElement){var r=e.target.getAttribute(t.PROPERTY_NAME);if(r){e.preventDefault(),e.cancelBubble=!0;var i=p.resolve(n.path,r);if(i!==n.path){var o=e.target.getAttribute(t.PROPERTY_ENTRY_ID),a=void 0,s=void 0;if(o){var u=parseInt(o,10);!isNaN(u)&&n.entries[u]&&(a=n.entries[u],s=e.target)}n.loadContent(i,a,s)}}}})),n.ws instanceof v.Multiplexer&&(n.filePushHandler=new E.default(n.parent,new y.AdbkitFilePushStream(n.ws,n)),n.filePushHandler.addEventListener(n))),n.parent.appendChild(i),n}return o.__extends(t,e),t.start=function(e){return new t(e)},t.createEntryForDeviceList=function(e,t,r){if("device"===e.state){var n=document.createElement("div");return n.classList.add("file-listing",t),n.appendChild(u.BaseDeviceTracker.buildLink({action:c.ACTION.FILE_LISTING,udid:e.udid,path:"".concat(b,"/")},"list files",r)),n}},t.prototype.onDragEnter=function(){return 0===this.enterCount&&this.addForeground(a.Drop),this.enterCount++,!0},t.prototype.onDragLeave=function(){return this.enterCount--,this.enterCount<0&&(this.enterCount=0),0===this.enterCount&&this.removeForeground(a.Drop),!0},t.prototype.onDrop=function(){return this.enterCount=0,this.removeForeground(a.Drop),!0},t.prototype.findOrCreateEntryRow=function(e){return document.getElementById("entry-".concat(e))||this.addRow(!0,e,"file")},t.prototype.onFilePushUpdate=function(e){var r=this,n=e.fileName,i=e.progress,o=e.error,a=e.message,s=e.finished,u=this.uploads.get(n);if(!u||document.getElementById(u.anchor.id)!==u.anchor){var c=this.findOrCreateEntryRow(n),l=c.getElementsByTagName("a")[0];l.id||(l.id="upload_".concat(n)),u={row:c,progressEl:this.appendProgressElement(l),anchor:l,timeout:null},this.uploads.set(n,u)}var d=u.row,f=u.progressEl,h=u.anchor;o?(this.uploads.delete(n),f.style.width="100%",f.classList.add("error"),h.classList.contains("error")||(h.classList.add("error"),h.innerText="".concat(n,". ").concat(a)),u.timeout||(u.timeout=window.setTimeout((function(){var e=d.parentElement;e&&(e.removeChild(d),r.reload())}),t.REMOVE_ROW_TIMEOUT))):(h.innerText="".concat(n,". ").concat(a),f.style.width="".concat(i,"%")),s&&!o&&(this.uploads.delete(n),this.reload())},t.prototype.onError=function(e){console.error(this.name,"FIXME: implement",e)},t.prototype.addForeground=function(e){var t=(0,h.html)(I||(I=o.__makeTemplateObject(['<div class="foreground ','">\n            <div class="foreground-message ','-message">',"</div>\n        </div>"],['<div class="foreground ','">\n            <div class="foreground-message ','-message">',"</div>\n        </div>"])),e,e,D[e]).content;this.parent.appendChild(t)},t.prototype.removeForeground=function(e){var t=this,r=this.parent.getElementsByClassName(e);Array.from(r).forEach((function(e){t.parent.removeChild(e)}))},t.parseParameters=function(t){var r=e.parseParameters.call(this,t),n=r.action;if(n!==c.ACTION.FILE_LISTING)throw Error("Incorrect action");var i=t.get("path")||"/data/local/tmp";return o.__assign(o.__assign({},r),{action:n,udid:l.default.parseString(t,"udid",!0),path:i})},t.prototype.buildDirectWebSocketUrl=function(){var t=e.prototype.buildDirectWebSocketUrl.call(this);return t.searchParams.set("action",c.ACTION.MULTIPLEX),t},t.prototype.onSocketClose=function(e){this.filePushHandler&&this.filePushHandler.release(),console.error(this.name,"socket closed",e.reason),this.addForeground(a.Connect)},t.prototype.onSocketMessage=function(e){},t.prototype.onSocketOpen=function(){this.loadContent(this.path)},t.prototype.loadContent=function(e,t,r,n){var o=this;if(void 0===n&&(n=""),this.ws&&this.ws.readyState===this.ws.OPEN&&this.ws instanceof v.Multiplexer&&(t||!this.channels.size&&!this.uploads.size)){var a;this.requireClean=!0,this.requestedPath=e,a=t?t.isFile()?d.default.RECV:d.default.LIST:d.default.STAT;var s=i.byteLength(e,"utf-8"),u=i.alloc(a.length+4+s),c=u.write(a,0);c=u.writeUInt32LE(s,c),u.write(e,c);var l=this.ws.createChannel(u);this.channels.add(l);var f={receivedBytes:0,path:e,entry:t,anchor:r,chunks:[],pathToLoadAfter:n};this.downloads.set(l,f);var h=function(e){o.handleReply(l,e)},p=function(){o.channels.delete(l),o.downloads.delete(l),l.removeEventListener("message",h),l.removeEventListener("close",p)};l.addEventListener("message",h),l.addEventListener("close",p)}},t.prototype.clean=function(){this.tableBody.innerHTML="";var e=document.getElementById("header");e&&(e.innerText="Content ".concat(this.path)),this.toggleQuickLinks(this.path);var t=location.hash.replace(/#!/,""),r=new URLSearchParams(t);r.get("action")===c.ACTION.FILE_LISTING&&(r.set("path",this.path),location.hash="#!".concat(r.toString()))},t.prototype.toggleQuickLinks=function(e){var t="/"===e,r=document.getElementById(_);r&&r.classList.toggle("hidden",t);var n=document.getElementById(S);n&&n.classList.toggle("hidden",t);var i=e===b,o=document.getElementById(C);o&&o.classList.toggle("hidden",i);var a=e===w,s=document.getElementById(T);s&&s.classList.toggle("hidden",a)},t.prototype.handleReply=function(e,t){var r=i.from(t.data),n=r.slice(0,4).toString("ascii");switch(n){case d.default.DENT:var o=r.slice(4),a=o.readUInt32LE(0),s=o.readUInt32LE(4),u=o.readUInt32LE(8),c=o.readUInt32LE(12),h=l.default.utf8ByteArrayToString(o.slice(16,16+c));return void this.addEntry(new f.Entry(h,a,s,u));case d.default.DONE:return void this.finishDownload(e);case d.default.STAT:var m=this.downloads.get(e);if(!m)return;var v=r.slice(4),E=v.readUInt32LE(0),y=v.readUInt32LE(4),_=v.readUInt32LE(8),S=p.basename(m.path);if(0===E)return console.error("FIXME: show error in UI"),console.error('Error: no entity "'.concat(m.path,'"')),this.channels.delete(e),void this.loadContent(b);var C=new f.Entry(S,E,y,_),T=void 0,w="";if(!C.isDirectory()){w=this.requestedPath=p.dirname(m.path);var O=this.addEntry(C);T=O?O.getElementsByTagName("a")[0]:void 0}this.loadContent(m.path,C,T,w);break;case d.default.FAIL:var I=r.readUInt32LE(4),D=l.default.utf8ByteArrayToString(r.slice(8,8+I));return void console.error(g,"FAIL: ".concat(D));case d.default.DATA:var A=this.downloads.get(e);if(!A)return;if(A.chunks.push(r.slice(4)),A.receivedBytes+=r.length-4,A.anchor){var P=A.progressEl;if(P||(P=this.appendProgressElement(A.anchor),A.progressEl=P),A.entry){var M=A.entry.size,R=100*A.receivedBytes/M;P.style.width="".concat(R,"%")}}return;default:console.error('Unexpected "'.concat(n,'"'))}},t.prototype.appendProgressElement=function(e){var t=document.createElement("span");t.className="background-progress";var r=e.parentElement;return r&&r.appendChild(t),t},t.prototype.addEntry=function(e){this.requireClean&&(this.path=this.requestedPath,this.requestedPath="",this.clean(),this.requireClean=!1,this.entries.length=0),this.entries.push(e);var r=(this.entries.length-1).toString();if("."!==e.name){if(e.name!==t.PARENT_DIR){var n=e.isDirectory()?"dir":e.isSymbolicLink()?"link":e.isFile()?"file":"else",i=e.mtime.toLocaleString();return this.addRow(!1,e.name,n,e.size.toString(),i,r)}var o=document.getElementById(_);if(o){var a=o.children[0];a&&a.setAttribute(t.PROPERTY_ENTRY_ID,r)}}},t.prototype.addRow=function(e,r,n,i,o,a){void 0===i&&(i=""),void 0===o&&(o=""),void 0===a&&(a="");var s=document.createElement("tr");s.id="entry-".concat(r),s.classList.add("entry-row");var u=document.createElement("td");u.classList.add("entry-name");var c=document.createElement("a");if(c.classList.add("icon",n),c.setAttribute(t.PROPERTY_NAME,r),a&&c.setAttribute(t.PROPERTY_ENTRY_ID,a),c.innerText=r,u.appendChild(c),s.appendChild(u),e)u.colSpan=3,c.classList.add("push");else{var l=new URL(location.href),d=new URLSearchParams(l.hash.replace(/^#!/,""));d.set("path",p.join(this.path,r)),l.hash="#!".concat(d.toString()),c.href=l.toString();var f=document.createElement("td");f.classList.add("entry-size"),f.innerText=i,s.appendChild(f);var h=document.createElement("td");h.classList.add("entry-time"),h.innerText=o,s.appendChild(h)}return e||!this.tableBody.children.length?this.tableBody.insertBefore(s,this.tableBody.firstChild):this.tableBody.appendChild(s),s},t.prototype.finishDownload=function(e){var t=this.downloads.get(e);if(t){this.downloads.delete(e);var r,n=t.progressEl;n&&this.cleanProgress(n),r=t.entry&&t.entry.isFile()?t.entry.name:p.basename(this.path),t.pathToLoadAfter&&(this.channels.delete(e),this.loadContent(t.pathToLoadAfter));var i=new File(t.chunks,r,{type:"application/octet-stream"}),o=document.createElement("a");o.href=URL.createObjectURL(i),o.download="".concat(r),o.click()}},t.prototype.cleanProgress=function(e){e.classList.add("finished"),setTimeout((function(){var t=e.parentElement;t&&t.removeChild(e)}))},t.prototype.getPath=function(){return this.path},t.prototype.reload=function(){this.loadContent(this.path)},t.prototype.supportMultiplexing=function(){return!0},t.prototype.getChannelInitData=function(){var e=l.default.stringToUtf8ByteArray(this.serial),t=i.alloc(8+e.byteLength);return t.write(m.ChannelCode.FSLS,"ascii"),t.writeUInt32LE(e.length,4),t.set(e,8),t},t.ACTION=c.ACTION.FILE_LISTING,t.PARENT_DIR="..",t.PROPERTY_NAME="data-name",t.PROPERTY_ENTRY_ID="data-entry-id",t.REMOVE_ROW_TIMEOUT=2e3,t}(s.ManagerClient);t.FileListingClient=A},3247:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StreamClientScrcpy=void 0;var n,i=r(655),o=r(6257),a=r(4320),s=r(8536),u=i.__importDefault(r(8442)),c=i.__importDefault(r(8626)),l=r(2268),d=i.__importDefault(r(8281)),f=i.__importDefault(r(7013)),h=i.__importDefault(r(8876)),p=r(4427),m=r(8515),v=r(2742),E=r(8930),y=r(7525),g=r(9416),_=r(4083),S=r(58),C=r(3560),T=r(483),b=r(3003),w=r(2103),O="[StreamClientScrcpy]",I=function(e){function t(r,n,i,o,a){var s=e.call(this,r)||this;s.deviceName="",s.clientId=-1,s.clientsCount=-1,s.joinedStream=!1,s.OnDeviceMessage=function(e){s.moreBox&&s.moreBox.OnDeviceMessage(e)},s.onVideo=function(e){if(s.player){var t=m.BasePlayer.STATE;s.player.getState()===t.PAUSED&&s.player.play(),s.player.getState()===t.PLAYING&&s.player.pushFrame(new Uint8Array(e))}},s.onClientsStats=function(e){s.deviceName=e.deviceName,s.clientId=e.clientId,s.setTitle("Stream ".concat(s.deviceName))},s.onDisplayInfo=function(e){var r;if(s.player){var n=s.player.getVideoSettings(),i=n.displayId,o=e.find((function(e){return e.displayInfo.displayId===i}));if(o){s.player.getState()===m.BasePlayer.STATE.PAUSED&&s.player.play();var a=o.videoSettings,c=o.screenInfo;if(s.player.setDisplayInfo(o.displayInfo),"boolean"!=typeof s.fitToScreen&&(s.fitToScreen=s.player.getFitToScreenStatus()),s.fitToScreen){var d=s.getMaxSize();d&&(n=t.createVideoSettingsWithBounds(n,d),s.player.setVideoSettings(n,s.fitToScreen,!1))}if(!a||!c)return s.joinedStream=!0,void s.sendMessage(l.CommandControlMessage.createSetVideoSettingsCommand(n));s.clientsCount=o.connectionCount;var f=u.default.copy(a),h=s.player.getScreenInfo();if(c.equals(h)||s.player.setScreenInfo(c),a.equals(n)||s.applyNewVideoSettings(a,a.equals(s.requestedVideoSettings)),!h){var p=n.bounds,v=c.videoSize,E=0===s.clientsCount,y=p&&(p.width<v.width||p.height<v.height);(E||y)&&(f=n);var g=null===(r=n.bounds)||void 0===r?void 0:r.intersect(f.bounds);g&&!g.equals(f.bounds)&&(f=t.createVideoSettingsWithBounds(f,g))}f.equals(a)&&s.joinedStream||(s.joinedStream=!0,s.sendMessage(l.CommandControlMessage.createSetVideoSettingsCommand(f)))}}},s.onDisconnected=function(){var e,t;s.streamReceiver.off("deviceMessage",s.OnDeviceMessage),s.streamReceiver.off("video",s.onVideo),s.streamReceiver.off("clientsStats",s.onClientsStats),s.streamReceiver.off("displayInfo",s.onDisplayInfo),s.streamReceiver.off("disconnected",s.onDisconnected),null===(e=s.filePushHandler)||void 0===e||e.release(),s.filePushHandler=void 0,null===(t=s.touchHandler)||void 0===t||t.release(),s.touchHandler=void 0},s.streamReceiver=n||new b.StreamReceiverScrcpy(s.params);var c=s.params,d=c.udid,f=c.player;return s.startStream({udid:d,player:i,playerName:f,fitToScreen:o,videoSettings:a}),s.setBodyClass("stream"),s}return i.__extends(t,e),t.registerPlayer=function(e){e.isSupported()&&this.players.set(e.playerFullName,e)},t.getPlayers=function(){return Array.from(this.players.values())},t.getPlayerClass=function(e){var r,n,o;try{for(var a=i.__values(t.players.values()),s=a.next();!s.done;s=a.next()){var u=s.value;u.playerFullName!==e&&u.playerCodeName!==e||(o=u)}}catch(e){r={error:e}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return o},t.createPlayer=function(e,t,r){var n=this.getPlayerClass(e);if(n)return new n(t,r)},t.getFitToScreen=function(e,t,r){var n=this.getPlayerClass(e);return!!n&&n.getFitToScreenStatus(t,r)},t.start=function(e,r,n,i,o){if(e instanceof URLSearchParams){var a=t.parseParameters(e);return new t(a,r,n,i,o)}return new t(e,r,n,i,o)},t.createVideoSettingsWithBounds=function(e,t){return new u.default({crop:e.crop,bitrate:e.bitrate,bounds:t,maxFps:e.maxFps,iFrameInterval:e.iFrameInterval,sendFrameMeta:e.sendFrameMeta,lockedVideoOrientation:e.lockedVideoOrientation,displayId:e.displayId,codecOptions:e.codecOptions,encoderName:e.encoderName})},t.parseParameters=function(t){var r=e.parseParameters.call(this,t),n=r.action;if(n!==T.ACTION.STREAM_SCRCPY)throw Error("Incorrect action");return i.__assign(i.__assign({},r),{action:n,player:d.default.parseString(t,"player",!0),udid:d.default.parseString(t,"udid",!0),ws:d.default.parseString(t,"ws",!0)})},t.prototype.startStream=function(e){var r=this,n=e.udid,i=e.player,o=e.playerName,u=e.videoSettings,c=e.fitToScreen;if(!n)throw Error('Invalid udid value: "'.concat(n,'"'));if(this.fitToScreen=c,!i){if("string"!=typeof o)throw Error("Must provide BasePlayer instance or playerName");var l=void 0;this.streamReceiver&&u&&(l=this.streamReceiver.getDisplayInfo(u.displayId));var d=t.createPlayer(o,n,l);if(!d)throw Error('Unsupported player: "'.concat(o,'"'));"boolean"!=typeof c&&(c=t.getFitToScreen(o,n,l)),i=d}this.player=i,this.setTouchListeners(i),u||(u=i.getVideoSettings());var p=document.createElement("div");p.className="device-view";var m=this.moreBox=new a.GoogMoreBox(n,i,this),v=m.getHolderElement();m.setOnStop((function(e){var t;e&&e instanceof Event&&"error"===e.type&&console.error(O,e),(t=p.parentElement)&&t.removeChild(p),(t=v.parentElement)&&t.removeChild(v),r.streamReceiver.stop(),r.player&&r.player.stop()}));var E=s.GoogToolBox.createToolBox(n,i,this,v);this.controlButtons=E.getHolderElement(),p.appendChild(this.controlButtons);var y=document.createElement("div");if(y.className="video",p.appendChild(y),p.appendChild(v),i.setParent(y),i.pause(),document.body.appendChild(p),c){var g=this.getMaxSize();g&&(u=t.createVideoSettingsWithBounds(u,g))}this.applyNewVideoSettings(u,!1);var _=i.getTouchableElement(),S=new h.default(_);this.filePushHandler=new f.default(_,new w.ScrcpyFilePushStream(this.streamReceiver)),this.filePushHandler.addEventListener(S);var C=this.streamReceiver;C.on("deviceMessage",this.OnDeviceMessage),C.on("video",this.onVideo),C.on("clientsStats",this.onClientsStats),C.on("displayInfo",this.onDisplayInfo),C.on("disconnected",this.onDisconnected),console.log(O,i.getName(),n)},t.prototype.sendMessage=function(e){this.streamReceiver.sendEvent(e)},t.prototype.getDeviceName=function(){return this.deviceName},t.prototype.setHandleKeyboardEvents=function(e){e?p.KeyInputHandler.addEventListener(this):p.KeyInputHandler.removeEventListener(this)},t.prototype.onKeyEvent=function(e){this.sendMessage(e)},t.prototype.sendNewVideoSetting=function(e){this.requestedVideoSettings=e,this.sendMessage(l.CommandControlMessage.createSetVideoSettingsCommand(e))},t.prototype.getClientId=function(){return this.clientId},t.prototype.getClientsCount=function(){return this.clientsCount},t.prototype.getMaxSize=function(){if(this.controlButtons){var e=document.body,t=e.clientWidth-this.controlButtons.clientWidth&-16,r=-16&e.clientHeight;return new c.default(t,r)}},t.prototype.setTouchListeners=function(e){this.touchHandler||(this.touchHandler=new _.FeaturedInteractionHandler(e,this))},t.prototype.applyNewVideoSettings=function(e,t){var r=!1;e.bounds&&e.bounds.equals(this.getMaxSize())&&(r=!0),this.player&&this.player.setVideoSettings(e,r,t)},t.createEntryForDeviceList=function(e,t,r,o){if(-1!==e.pid){var a="configure_".concat(d.default.escapeUdid(e.udid)),s=(0,g.html)(n||(n=i.__makeTemplateObject(['<div class="stream ','">\n                <button\n                    ','="','"\n                    ','="','"\n                    ','="','"\n                    ','="','"\n                    ','="','"\n                    ','="','"\n                    ','="','"\n                    id="','"\n                    class="active action-button"\n                >\n                    Configure stream\n                </button>\n            </div>'],['<div class="stream ','">\n                <button\n                    ','="','"\n                    ','="','"\n                    ','="','"\n                    ','="','"\n                    ','="','"\n                    ','="','"\n                    ','="','"\n                    id="','"\n                    class="active action-button"\n                >\n                    Configure stream\n                </button>\n            </div>'])),t,S.Attribute.UDID,e.udid,S.Attribute.COMMAND,y.ControlCenterCommand.CONFIGURE_STREAM,S.Attribute.FULL_NAME,r,S.Attribute.SECURE,o.secure,S.Attribute.HOSTNAME,o.hostname,S.Attribute.PORT,o.port,S.Attribute.USE_PROXY,o.useProxy,a),u=s.content.getElementById(a);return u&&(u.onclick=this.onConfigureStreamClick),s.content}},t.ACTION="stream",t.players=new Map,t.onConfigureStreamClick=function(e){var r=e.currentTarget,n=d.default.parseStringEnv(r.getAttribute(S.Attribute.UDID)||""),i=r.getAttribute(S.Attribute.FULL_NAME),o=d.default.parseBooleanEnv(r.getAttribute(S.Attribute.SECURE)||void 0)||!1,a=d.default.parseStringEnv(r.getAttribute(S.Attribute.HOSTNAME)||void 0)||"",s=d.default.parseIntEnv(r.getAttribute(S.Attribute.PORT)||void 0),u=d.default.parseBooleanEnv(r.getAttribute(S.Attribute.USE_PROXY)||void 0);if(!n)throw Error('Invalid udid value: "'.concat(n,'"'));if("number"!=typeof s)throw Error("Invalid port type: ".concat(typeof s));var c=E.DeviceTracker.getInstance({type:"android",secure:o,hostname:a,port:s,useProxy:u}),l=c.getDescriptorByUdid(n);if(l){e.preventDefault();var f=document.getElementsByName("".concat(E.DeviceTracker.AttributePrefixInterfaceSelectFor).concat(i));if(f&&f.length){var h=f[0],p=h.options[h.selectedIndex],m=p.getAttribute(S.Attribute.URL),y=p.getAttribute(S.Attribute.NAME);if(m&&y){var g={udid:n,ws:m,player:"",action:T.ACTION.STREAM_SCRCPY,secure:o,hostname:a,port:s,useProxy:u};new v.ConfigureScrcpy(c,l,g).on("closed",t.onConfigureDialogClosed)}}}},t.onConfigureDialogClosed=function(e){e.dialog.off("closed",t.onConfigureDialogClosed),e.result&&C.HostTracker.getInstance().destroy()},t}(o.BaseClient);t.StreamClientScrcpy=I},3003:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StreamReceiverScrcpy=void 0;var n=r(655),i=r(3146),o=r(483),a=n.__importDefault(r(8281)),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.parseParameters=function(t){var r=e.parseParameters.call(this,t),i=r.action;if(i!==o.ACTION.STREAM_SCRCPY)throw Error("Incorrect action");return n.__assign(n.__assign({},r),{action:i,udid:a.default.parseString(t,"udid",!0),ws:a.default.parseString(t,"ws",!0),player:a.default.parseString(t,"player",!0)})},t.prototype.buildDirectWebSocketUrl=function(){return new URL(this.params.ws)},t}(i.StreamReceiver);t.StreamReceiverScrcpy=s},7664:(e,t,r)=>{"use strict";var n=r(8764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.AdbkitFilePushStream=void 0;var i=r(655),o=r(9807),a=r(2268),s=r(9621),u=i.__importDefault(r(467)),c=i.__importStar(r(6470)),l=i.__importDefault(r(7013)),d=function(e){function t(t,r){var n=e.call(this)||this;return n.socket=t,n.fileListingClient=r,n.channels=new Map,n}return i.__extends(t,e),t.prototype.hasConnection=function(){return this.socket.readyState==this.socket.OPEN},t.prototype.isAllowedFile=function(){return!0},t.prototype.getChannel=function(e){var t=this.channels.get(e),r=s.FilePushResponseStatus.NO_ERROR;if(t||(r=s.FilePushResponseStatus.ERROR_UNKNOWN_ID),!r)return t;this.emit("response",{id:e,code:r})},t.prototype.sendEventAppend=function(e){var t=e.id,r={id:t,chunk:e.chunk,state:a.FilePushState.APPEND},n=this.getChannel(t);n&&n.send(a.CommandControlMessage.createPushFileCommand(r).toBuffer())},t.prototype.sendEventFinish=function(e){var t=e.id,r={id:t,state:a.FilePushState.FINISH},n=this.getChannel(t);n&&n.send(a.CommandControlMessage.createPushFileCommand(r).toBuffer())},t.prototype.sendEventNew=function(e){var t=this,r=e.id,i=r,o={id:r,state:a.FilePushState.NEW},c=this.socket.createChannel(n.from(u.default.SEND)),d=function(e){var r=0,o=n.from(e.data),a=o.readInt16BE(r);r+=2;var u=o.readInt8(r);u===s.FilePushResponseStatus.NEW_PUSH_ID&&(t.channels.set(a,c),i=a),t.emit("response",{id:a,code:u})},f=function(e){if(!e.wasClean){var r=4e3-e.code;t.emit("error",{id:i,error:new Error(l.default.getErrorMessage(r,e.reason))})}c.removeEventListener("message",d),c.removeEventListener("close",f)};c.addEventListener("message",d),c.addEventListener("close",f),c.send(a.CommandControlMessage.createPushFileCommand(o).toBuffer())},t.prototype.sendEventStart=function(e){var t=e.id,r=e.fileName,n=e.fileSize,i={id:t,fileName:c.join(this.fileListingClient.getPath(),r),fileSize:n,state:a.FilePushState.START},o=this.getChannel(t);o&&o.send(a.CommandControlMessage.createPushFileCommand(i).toBuffer())},t.prototype.release=function(){this.channels.forEach((function(e){e.close()}))},t}(o.FilePushStream);t.AdbkitFilePushStream=d},7013:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(655),i=r(38),o=r(9621),a="[FilePushHandler]",s=function(){function e(t,r){var n=this;this.element=t,this.filePushStream=r,this.responseWaiter=new Map,this.listeners=new Set,this.pushIdFileNameMap=new Map,this.onStreamError=function(e){var t=e.id,r=e.error,i=n.pushIdFileNameMap.get(t)||"Unknown file";n.sendUpdate({pushId:t,fileName:i,message:r.message,progress:-1,error:!0,finished:!0})},this.onStreamResponse=function(t){var r,i=t.code,s=t.id,u=i===o.FilePushResponseStatus.NEW_PUSH_ID?e.REQUEST_NEW_PUSH_ID:t.id,c=n.responseWaiter.get(u);c?(Array.isArray(c)?(r=c.shift(),c.length||n.responseWaiter.delete(u)):(r=c,n.responseWaiter.delete(u)),r(i===o.FilePushResponseStatus.NEW_PUSH_ID?{id:u,code:s}:{id:u,code:i})):console.warn(a,'Unexpected push id: "'.concat(u,'", ').concat(JSON.stringify(t)))},i.DragAndDropHandler.addEventListener(this),r.on("response",this.onStreamResponse),r.on("error",this.onStreamError)}return e.prototype.sendUpdate=function(e){e.error&&this.pushIdFileNameMap.delete(e.pushId),this.listeners.forEach((function(t){t.onFilePushUpdate(e)}))},e.prototype.logError=function(e,t,r){var n=u.get(r)||"Unknown error (".concat(r,")");this.sendUpdate({pushId:e,fileName:t,message:'error: "'.concat(n,'"'),progress:-1,error:!0,finished:!0})},e.getStreamReader=function(e){return n.__awaiter(this,void 0,void 0,(function(){var t,r,i;return n.__generator(this,(function(n){switch(n.label){case 0:return[4,new Response(e).blob()];case 1:return t=n.sent(),[4,(r=t.stream().getReader()).read()];case 2:return i=n.sent(),[2,{reader:r,result:i}]}}))}))},e.prototype.pushFile=function(t){return n.__awaiter(this,void 0,void 0,(function(){var r,i,s,u,c,l,d,f,h,p,m,v,E,y=this;return n.__generator(this,(function(g){switch(g.label){case 0:return r=Date.now(),i=t.name,s=t.size,this.filePushStream.hasConnection()?(u=e.REQUEST_NEW_PUSH_ID,this.sendUpdate({pushId:u,fileName:i,message:"begins...",progress:0,error:!1,finished:!1}),this.filePushStream.sendEventNew({id:u}),[4,this.waitForResponse(u)]):(this.listeners.forEach((function(e){e.onError("WebSocket is not ready")})),[2]);case 1:return(c=g.sent().code)<=0?[2,this.logError(c,i,c)]:(this.pushIdFileNameMap.set(c,i),l=this.waitForResponse(c),this.filePushStream.sendEventStart({id:c,fileName:i,fileSize:s}),[4,Promise.all([l,e.getStreamReader(t)])]);case 2:return d=n.__read.apply(void 0,[g.sent(),2]),f=d[0].code,h=d[1],p=h.reader,m=h.result,f!==o.FilePushResponseStatus.NO_ERROR?(this.logError(c,i,f),[2]):(v=0,E=function(e){var t=e.done,o=e.value;return n.__awaiter(y,void 0,void 0,(function(){var e,u,l,d,f,h;return n.__generator(this,(function(m){switch(m.label){case 0:return!t&&o?[3,2]:(this.filePushStream.sendEventFinish({id:c}),[4,this.waitForResponse(c)]);case 1:return 0!==(e=m.sent().code)?this.logError(c,i,e):this.sendUpdate({pushId:c,fileName:i,message:"success!",progress:100,error:!1,finished:!0}),console.log(a,'File "'.concat(i,'" uploaded in ').concat(Date.now()-r,"ms")),[2];case 2:return v+=o.length,this.filePushStream.sendEventAppend({id:c,chunk:o}),[4,Promise.all([this.waitForResponse(c),p.read()])];case 3:return u=n.__read.apply(void 0,[m.sent(),2]),l=u[0].code,d=u[1],0!==l?(this.logError(c,i,l),[2]):(h="".concat((f=100*v/s).toFixed(2),"%"),this.sendUpdate({pushId:c,fileName:i,message:h,progress:f,error:!1,finished:!1}),[2,E(d)])}}))}))},[2,E(m)])}}))}))},e.prototype.waitForResponse=function(e){var t=this;return new Promise((function(r){var n=t.responseWaiter.get(e);if(Array.isArray(n))n.push(r);else if(n){var i=[n];i.push(r),t.responseWaiter.set(e,i)}else t.responseWaiter.set(e,r)}))},e.prototype.onFilesDrop=function(t){var r=this;return this.listeners.forEach((function(e){e.onDrop()})),t.forEach((function(t){var n=t.type,i=t.name;if(r.filePushStream.isAllowedFile(t))r.pushFile(t);else{var o={pushId:e.REQUEST_NEW_PUSH_ID,fileName:i,message:'Unsupported type "'.concat(n,'"'),progress:-1,error:!0,finished:!0};r.sendUpdate(o)}})),!0},e.getErrorMessage=function(e,t){return t||u.get(e)||"Unknown error"},e.prototype.onDragEnter=function(){var e=!1;return this.listeners.forEach((function(t){e=e||t.onDragEnter()})),e},e.prototype.onDragLeave=function(){var e=!1;return this.listeners.forEach((function(t){e=e||t.onDragLeave()})),e},e.prototype.getElement=function(){return this.element},e.prototype.release=function(){this.filePushStream.off("response",this.onStreamResponse),this.filePushStream.off("error",this.onStreamError),this.filePushStream.release(),i.DragAndDropHandler.removeEventListener(this),this.listeners.clear()},e.prototype.addEventListener=function(e){this.listeners.add(e)},e.prototype.removeEventListener=function(e){this.listeners.delete(e)},e.REQUEST_NEW_PUSH_ID=0,e}();t.default=s;var u=new Map([[o.FilePushResponseStatus.NEW_PUSH_ID,"New push id"],[o.FilePushResponseStatus.NO_ERROR,"No error"],[o.FilePushResponseStatus.ERROR_INVALID_NAME,"Invalid name"],[o.FilePushResponseStatus.ERROR_NO_SPACE,"No space"],[o.FilePushResponseStatus.ERROR_FAILED_TO_DELETE,"Failed to delete existing"],[o.FilePushResponseStatus.ERROR_FAILED_TO_CREATE,"Failed to create new file"],[o.FilePushResponseStatus.ERROR_FILE_NOT_FOUND,"File not found"],[o.FilePushResponseStatus.ERROR_FAILED_TO_WRITE,"Failed to write to file"],[o.FilePushResponseStatus.ERROR_FILE_IS_BUSY,"File is busy"],[o.FilePushResponseStatus.ERROR_INVALID_STATE,"Invalid state"],[o.FilePushResponseStatus.ERROR_UNKNOWN_ID,"Unknown id"],[o.FilePushResponseStatus.ERROR_NO_FREE_ID,"No free id"],[o.FilePushResponseStatus.ERROR_INCORRECT_SIZE,"Incorrect size"]])},9621:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.FilePushResponseStatus=void 0,(r=t.FilePushResponseStatus||(t.FilePushResponseStatus={}))[r.NEW_PUSH_ID=1]="NEW_PUSH_ID",r[r.NO_ERROR=0]="NO_ERROR",r[r.ERROR_INVALID_NAME=-1]="ERROR_INVALID_NAME",r[r.ERROR_NO_SPACE=-2]="ERROR_NO_SPACE",r[r.ERROR_FAILED_TO_DELETE=-3]="ERROR_FAILED_TO_DELETE",r[r.ERROR_FAILED_TO_CREATE=-4]="ERROR_FAILED_TO_CREATE",r[r.ERROR_FILE_NOT_FOUND=-5]="ERROR_FILE_NOT_FOUND",r[r.ERROR_FAILED_TO_WRITE=-6]="ERROR_FAILED_TO_WRITE",r[r.ERROR_FILE_IS_BUSY=-7]="ERROR_FILE_IS_BUSY",r[r.ERROR_INVALID_STATE=-8]="ERROR_INVALID_STATE",r[r.ERROR_UNKNOWN_ID=-9]="ERROR_UNKNOWN_ID",r[r.ERROR_NO_FREE_ID=-10]="ERROR_NO_FREE_ID",r[r.ERROR_INCORRECT_SIZE=-11]="ERROR_INCORRECT_SIZE",r[r.ERROR_OTHER=-12]="ERROR_OTHER"},9807:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FilePushStream=void 0;var n=r(655),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t}(r(1069).TypedEmitter);t.FilePushStream=i},2103:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ScrcpyFilePushStream=void 0;var n=r(655),i=r(9807),o=n.__importDefault(r(5268)),a=r(2268),s=["application/vnd.android.package-archive"],u=/\.apk$/i,c=function(e){function t(t){var r=e.call(this)||this;return r.streamReceiver=t,r.onDeviceMessage=function(e){if(e.type===o.default.TYPE_PUSH_RESPONSE){var t=e.getPushStats();r.emit("response",t)}},t.on("deviceMessage",r.onDeviceMessage),r}return n.__extends(t,e),t.prototype.hasConnection=function(){return this.streamReceiver.hasConnection()},t.prototype.isAllowedFile=function(e){var t=e.type,r=e.name;return t&&s.includes(t)||!t&&u.test(r)},t.prototype.sendEventAppend=function(e){var t={id:e.id,chunk:e.chunk,state:a.FilePushState.APPEND};this.streamReceiver.sendEvent(a.CommandControlMessage.createPushFileCommand(t))},t.prototype.sendEventFinish=function(e){var t={id:e.id,state:a.FilePushState.FINISH};this.streamReceiver.sendEvent(a.CommandControlMessage.createPushFileCommand(t))},t.prototype.sendEventNew=function(e){var t={id:e.id,state:a.FilePushState.NEW};this.streamReceiver.sendEvent(a.CommandControlMessage.createPushFileCommand(t))},t.prototype.sendEventStart=function(e){var t={id:e.id,fileName:e.fileName,fileSize:e.fileSize,state:a.FilePushState.START};this.streamReceiver.sendEvent(a.CommandControlMessage.createPushFileCommand(t))},t.prototype.release=function(){this.streamReceiver.off("deviceMessage",this.onDeviceMessage)},t}(i.FilePushStream);t.ScrcpyFilePushStream=c},4320:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GoogMoreBox=void 0;var n=r(655);r(4431);var i=r(8515),o=r(1503),a=r(2268),s=r(6368),u=n.__importDefault(r(8626)),c=n.__importDefault(r(5268)),l=n.__importDefault(r(8442)),d=function(){function e(t,r,c){var d,f,h,p,m=this;this.player=r,this.client=c,this.onViewVideoResize=function(e){m.holder.style.width="".concat(e.width-20,"px")},this.onVideoSettings=function(e){if(m.bitrateInput&&(m.bitrateInput.value=e.bitrate.toString()),m.maxFpsInput&&(m.maxFpsInput.value=e.maxFps.toString()),m.iFrameIntervalInput&&(m.iFrameIntervalInput.value=e.iFrameInterval.toString()),e.bounds){var t=e.bounds,r=t.width,n=t.height;m.maxWidthInput&&(m.maxWidthInput.value=r.toString()),m.maxHeightInput&&(m.maxHeightInput.value=n.toString())}},this.fit=function(){var t=m.client.getMaxSize()||e.defaultSize,r=t.width,n=t.height;m.maxWidthInput&&(m.maxWidthInput.value=r.toString()),m.maxHeightInput&&(m.maxHeightInput.value=n.toString())},this.reset=function(){var e=m.player.getPreferredVideoSetting();m.onVideoSettings(e)};var v=r.getName(),E=r.getVideoSettings(),y=E.displayId,g=r.getPreferredVideoSetting(),_=document.createElement("div");_.className="more-box";var S=document.createElement("p");S.innerText="".concat(t," (").concat(v,")"),S.className="text-with-shadow",_.appendChild(S);var C=this.input=document.createElement("textarea");C.classList.add("text-area");var T=document.createElement("button");T.innerText="Send as keys";var b=e.wrap("p",[C,T],_);T.onclick=function(){C.value&&c.sendMessage(new o.TextControlMessage(C.value))};var w=[],O=a.CommandControlMessage.Commands,I=function(n,i){var o,d,f,m,_,S=document.createElement("button");if(n===s.ControlMessage.TYPE_CHANGE_STREAM_PARAMETERS){var T=document.createElement("div"),O=document.createElement("label"),I=document.createElement("input"),A=document.createElement("div"),P="spoiler_video_".concat(t,"_").concat(v,"_").concat(y,"_").concat(n);T.className="spoiler",I.type="checkbox",I.id=P,O.htmlFor=P,O.innerText=i,A.className="box",T.appendChild(I),T.appendChild(O),T.appendChild(A);var M=document.createElement("label");M.innerText="Bitrate:",(o=document.createElement("input")).placeholder="".concat(g.bitrate," bps"),o.value=E.bitrate.toString(),e.wrap("div",[M,o],A),D.bitrateInput=o;var R=document.createElement("label");R.innerText="Max fps:",(d=document.createElement("input")).placeholder="".concat(g.maxFps," fps"),d.value=E.maxFps.toString(),e.wrap("div",[R,d],A),D.maxFpsInput=d;var N=document.createElement("label");N.innerText="I-Frame Interval:",(f=document.createElement("input")).placeholder="".concat(g.iFrameInterval," seconds"),f.value=E.iFrameInterval.toString(),e.wrap("div",[N,f],A),D.iFrameIntervalInput=f;var L=E.bounds||c.getMaxSize()||e.defaultSize,x=L.width,B=L.height,F=(null===(h=g.bounds)||void 0===h?void 0:h.width)||x,U=(null===(p=g.bounds)||void 0===p?void 0:p.height)||B,k=document.createElement("label");k.innerText="Max width:",(m=document.createElement("input")).placeholder="".concat(F," px"),m.value=x.toString(),e.wrap("div",[k,m],A),D.maxWidthInput=m;var K=document.createElement("label");K.innerText="Max height:",(_=document.createElement("input")).placeholder="".concat(U," px"),_.value=B.toString(),e.wrap("div",[K,_],A),D.maxHeightInput=_,A.appendChild(S);var Y=document.createElement("button");Y.innerText="Fit",Y.onclick=D.fit,A.insertBefore(Y,A.firstChild);var V=document.createElement("button");V.innerText="Reset",V.onclick=D.reset,A.insertBefore(V,A.firstChild),w.push(T)}else n===a.CommandControlMessage.TYPE_SET_CLIPBOARD||n===a.CommandControlMessage.TYPE_GET_CLIPBOARD?b.appendChild(S):w.push(S);S.innerText=i,n===s.ControlMessage.TYPE_CHANGE_STREAM_PARAMETERS?S.onclick=function(){var e=parseInt(o.value,10),t=parseInt(d.value,10),n=parseInt(f.value,10);if(!isNaN(e)&&!isNaN(t)){var i=-16&parseInt(m.value,10),a=-16&parseInt(_.value,10),s=new u.default(i,a),h=r.getVideoSettings(),p=h.lockedVideoOrientation,v=h.sendFrameMeta,E=h.displayId,y=h.codecOptions,g=h.encoderName,S=new l.default({bounds:s,bitrate:e,maxFps:t,iFrameInterval:n,lockedVideoOrientation:p,sendFrameMeta:v,displayId:E,codecOptions:y,encoderName:g});c.sendNewVideoSetting(S)}}:n===a.CommandControlMessage.TYPE_SET_CLIPBOARD?S.onclick=function(){var e=C.value;e&&c.sendMessage(a.CommandControlMessage.createSetClipboardCommand(e))}:S.onclick=function(){c.sendMessage(new a.CommandControlMessage(n))}},D=this;try{for(var A=n.__values(O.entries()),P=A.next();!P.done;P=A.next()){var M=n.__read(P.value,2);I(M[0],M[1])}}catch(e){d={error:e}}finally{try{P&&!P.done&&(f=A.return)&&f.call(A)}finally{if(d)throw d.error}}e.wrap("p",w,_);var R="screen_power_mode_".concat(t,"_").concat(v,"_").concat(y),N=document.createElement("label");N.style.display="none";var L="Mode",x="Set screen power mode",B=document.createElement("input");B.type="checkbox";var F=(B.checked=!1)?"ON":"OFF";B.id=N.htmlFor=R,N.innerText="".concat(L," ").concat(F),B.onchange=function(){F=B.checked?"ON":"OFF",N.innerText="".concat(L," ").concat(F),U.innerText="".concat(x," ").concat(F)};var U=document.createElement("button");U.innerText="".concat(x," ").concat(F),U.onclick=function(){var e=a.CommandControlMessage.createSetScreenPowerModeCommand(B.checked);c.sendMessage(e)},e.wrap("p",[B,N,U],_,["flex-center"]);var k="show_video_quality_".concat(t,"_").concat(v,"_").concat(y),K=document.createElement("label"),Y=document.createElement("input");Y.type="checkbox",Y.checked=i.BasePlayer.DEFAULT_SHOW_QUALITY_STATS,Y.id=k,K.htmlFor=k,K.innerText="Show quality stats",e.wrap("p",[Y,K],_,["flex-center"]),Y.onchange=function(){r.setShowQualityStats(Y.checked)};var V=document.createElement("button");V.innerText="Disconnect",V.onclick=function(e){e&&e instanceof Event&&"error"===e.type&&console.error("[GoogMoreBox]",e);var t=_.parentElement;t&&t.removeChild(_),r.off("video-view-resize",m.onViewVideoResize),m.onStop&&(m.onStop(),delete m.onStop)},e.wrap("p",[V],_),r.on("video-view-resize",this.onViewVideoResize),r.on("video-settings",this.onVideoSettings),this.holder=_}return e.prototype.OnDeviceMessage=function(e){e.type===c.default.TYPE_CLIPBOARD&&(this.input.value=e.getText(),this.input.select(),document.execCommand("copy"))},e.wrap=function(e,t,r,i){var o,a=document.createElement(e);return i&&(o=a.classList).add.apply(o,n.__spreadArray([],n.__read(i),!1)),t.forEach((function(e){a.appendChild(e)})),r.appendChild(a),a},e.prototype.getHolderElement=function(){return this.holder},e.prototype.setOnStop=function(e){this.onStop=e},e.defaultSize=new u.default(480,480),e}();t.GoogMoreBox=d},8536:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GoogToolBox=void 0;var n=r(655),i=r(8064),o=n.__importDefault(r(154)),a=n.__importDefault(r(9805)),s=r(3153),u=r(7398),c=r(3098),l=[{title:"Power",code:o.default.KEYCODE_POWER,icon:a.default.Icon.POWER},{title:"Volume up",code:o.default.KEYCODE_VOLUME_UP,icon:a.default.Icon.VOLUME_UP},{title:"Volume down",code:o.default.KEYCODE_VOLUME_DOWN,icon:a.default.Icon.VOLUME_DOWN},{title:"Back",code:o.default.KEYCODE_BACK,icon:a.default.Icon.BACK},{title:"Home",code:o.default.KEYCODE_HOME,icon:a.default.Icon.HOME},{title:"Overview",code:o.default.KEYCODE_APP_SWITCH,icon:a.default.Icon.OVERVIEW}],d=function(e){function t(t){return e.call(this,t)||this}return n.__extends(t,e),t.createToolBox=function(e,r,n,i){var d=r.getName(),f=l.slice(),h=function(e,t){var r;if(null===(r=t.optional)||void 0===r?void 0:r.code){var i=t.optional.code,a="mousedown"===e?o.default.ACTION_DOWN:o.default.ACTION_UP,u=new s.KeyCodeControlMessage(a,i,0,0);n.sendMessage(u)}},p=f.map((function(e){var t=new u.ToolBoxButton(e.title,e.icon,{code:e.code});return t.addEventListener("mousedown",h),t.addEventListener("mouseup",h),t}));if(r.supportsScreenshot){var m=new u.ToolBoxButton("Take screenshot",a.default.Icon.CAMERA);m.addEventListener("click",(function(){r.createScreenshot(n.getDeviceName())})),p.push(m)}var v=new c.ToolBoxCheckbox("Capture keyboard",a.default.Icon.KEYBOARD,"capture_keyboard_".concat(e,"_").concat(d));if(v.addEventListener("click",(function(e,t){var r=t.getElement();n.setHandleKeyboardEvents(r.checked)})),p.push(v),i){var E=r.getVideoSettings().displayId,y="show_more_".concat(e,"_").concat(d,"_").concat(E),g=new c.ToolBoxCheckbox("More",a.default.Icon.MORE,y);g.addEventListener("click",(function(e,t){var r=t.getElement();i.style.display=r.checked?"block":"none"})),p.unshift(g)}return new t(p)},t}(i.ToolBox);t.GoogToolBox=d},4083:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FeaturedInteractionHandler=void 0;var n=r(655),i=r(5539),o=n.__importDefault(r(8207)),a=r(9300),s=function(e){function t(r,n){var a=e.call(this,r,t.touchEventsNames,t.keyEventsNames)||this;return a.listener=n,a.storedFromMouseEvent=new Map,a.storedFromTouchEvent=new Map,a.onMouseEnter=function(){a.over=!0},a.onMouseLeave=function(){a.lastPosition=void 0,a.over=!1,a.storedFromMouseEvent.forEach((function(e){a.listener.sendMessage(i.InteractionHandler.createEmulatedMessage(o.default.ACTION_UP,e))})),a.storedFromMouseEvent.clear(),a.clearCanvas()},a.tag.addEventListener("mouseleave",a.onMouseLeave),a.tag.addEventListener("mouseenter",a.onMouseEnter),a}return n.__extends(t,e),t.prototype.buildScrollEvent=function(e,r){var n=[],o=i.InteractionHandler.buildTouchOnClient(e,r);if(o){var s=e.deltaX>0?-1:e.deltaX<-0?1:0,u=e.deltaY>0?-1:e.deltaY<-0?1:0,c=Date.now();(!this.lastScrollEvent||c-this.lastScrollEvent.time>t.SCROLL_EVENT_THROTTLING_TIME||this.lastScrollEvent.vScroll!==u||this.lastScrollEvent.hScroll!==s)&&(this.lastScrollEvent={time:c,hScroll:s,vScroll:u},n.push(new a.ScrollControlMessage(o.touch.position,s,u)))}return n},t.prototype.onInteraction=function(e){var t=this,r=this.player.getScreenInfo();if(r){var n,i;if(e instanceof MouseEvent){if(e.target!==this.tag)return;window.WheelEvent&&e instanceof WheelEvent?n=this.buildScrollEvent(e,r):(i=this.storedFromMouseEvent,n=this.buildTouchEvent(e,r,i)),this.over&&(this.lastPosition=e)}else{if(!(window.TouchEvent&&e instanceof TouchEvent))return void console.error("[FeaturedTouchHandler]","Unsupported event",e);if(e.target!==this.tag)return;i=this.storedFromTouchEvent,n=this.formatTouchEvent(e,r,i)}e.cancelable&&e.preventDefault(),e.stopPropagation(),n.forEach((function(e){t.listener.sendMessage(e)}))}},t.prototype.onKey=function(e){if(this.lastPosition){var t=this.player.getScreenInfo();if(t){var r=e.ctrlKey,n=e.shiftKey,o=this.lastPosition,a=o.target,s=o.button,u=o.buttons,c=o.clientY,l=o.clientX,d={ctrlKey:r,shiftKey:n,type:i.InteractionHandler.SIMULATE_MULTI_TOUCH,target:a,button:s,buttons:u,clientX:l,clientY:c};this.buildTouchEvent(d,t,new Map)}}},t.prototype.release=function(){e.prototype.release.call(this),this.tag.removeEventListener("mouseleave",this.onMouseLeave),this.tag.removeEventListener("mouseenter",this.onMouseEnter),this.storedFromMouseEvent.clear()},t.touchEventsNames=["touchstart","touchend","touchmove","touchcancel","mousedown","mouseup","mousemove","wheel"],t.keyEventsNames=["keydown","keyup"],t.SCROLL_EVENT_THROTTLING_TIME=30,t}(i.InteractionHandler);t.FeaturedInteractionHandler=s},5539:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.InteractionHandler=void 0;var i=r(655),o=i.__importDefault(r(8207)),a=r(7257),s=i.__importDefault(r(8626)),u=i.__importDefault(r(7306)),c=i.__importDefault(r(4186)),l=i.__importDefault(r(4218)),d=i.__importDefault(r(5944)),f=i.__importDefault(r(8281)),h="[TouchHandler]",p=function(){function e(t,r,n){this.player=t,this.touchEventsNames=r,this.keyEventsNames=n,this.multiTouchActive=!1,this.multiTouchShift=!1,this.dirtyPlace=[],this.over=!1,this.tag=t.getTouchableElement(),this.ctx=this.tag.getContext("2d"),e.loadImages(),e.bindGlobalListeners(this)}return e.bindGlobalListeners=function(t){var r=this;t.touchEventsNames.forEach((function(n){var i=e.eventListeners.get(n);i||(i=new Set,document.body.addEventListener(n,r.onInteractionEvent,e.options),r.eventListeners.set(n,i)),i.add(t)})),t.keyEventsNames.forEach((function(n){var i=e.eventListeners.get(n);i||(i=new Set,document.body.addEventListener(n,r.onKeyEvent),r.eventListeners.set(n,i)),i.add(t)}))},e.unbindListeners=function(t){var r=this;t.touchEventsNames.forEach((function(n){var i=e.eventListeners.get(n);i&&(i.delete(t),i.size<=0&&(r.eventListeners.delete(n),document.body.removeEventListener(n,r.onInteractionEvent)))})),t.keyEventsNames.forEach((function(n){var i=e.eventListeners.get(n);i&&(i.delete(t),i.size<=0&&(r.eventListeners.delete(n),document.body.removeEventListener(n,r.onKeyEvent)))}))},e.loadImages=function(){var e=this;if(!this.pointImagesLoaded){var t=0,r=function(r){2==++t&&(e.pointImagesLoaded=!0),r.target===e.touchPointImage?e.touchPointRadius=e.touchPointImage.width/2:r.target===e.centerPointImage&&(e.centerPointRadius=e.centerPointImage.width/2)},n=this.touchPointImage=new Image;n.src=l.default,n.onload=r;var i=this.centerPointImage=new Image;i.src=d.default,i.onload=r}},e.getPointerId=function(e,t){if(this.idToPointerMap.has(t)){var r=this.idToPointerMap.get(t);return"touchend"!==e&&"touchcancel"!==e||(this.idToPointerMap.delete(t),this.pointerToIdMap.delete(r)),r}for(var n=0;this.pointerToIdMap.has(n);)n++;return this.idToPointerMap.set(t,n),this.pointerToIdMap.set(n,t),n},e.buildTouchOnClient=function(e,t){var r=this.mapTypeToAction(e.type),n=t.videoSize,i=n.width,o=n.height,a=e.target,l=a.getBoundingClientRect(),d=a.clientWidth,f=a.clientHeight,h=e.clientX-l.left,p=e.clientY-l.top,m=!1;(h<0||h>d||p<0||p>f)&&(m=!0);var v=1e5,E=i/o,y=Math.round(v*E),g=Math.round(v*d/f);if(y>g){var _=Math.ceil(d/E),S=(f-_)/2;(p<S||p>S+_)&&(m=!0),p-=S,f=_}else if(y<g){var C=Math.ceil(f*E),T=(d-C)/2;(h<T||h>T+C)&&(m=!0),h-=T,d=C}var b=h*i/d,w=p*o/f,O=new s.default(i,o),I=new u.default(b,w);return(b<0||w<0||b>i||w>o)&&(m=!0),{client:{width:d,height:f},touch:{invalid:m,action:r,position:new c.default(I,O),buttons:e.buttons}}},e.validateMessage=function(t,r,n,i){var a=[],s=r.action,u=r.pointerId,c=n.get(u);if(s===o.default.ACTION_UP)c?(n.delete(u),a.push(r)):console.warn(i,"Received ACTION_UP while there are no DOWN stored");else if(s===o.default.ACTION_DOWN)c?console.warn(i,"Received ACTION_DOWN while already has one stored"):(n.set(u,r),a.push(r));else if(s===o.default.ACTION_MOVE)if(c)a.push(r),n.set(u,r);else if(t instanceof MouseEvent&&t.buttons||window.TouchEvent&&t instanceof TouchEvent){console.warn(i,"Received ACTION_MOVE while there are no DOWN stored");var l=e.createEmulatedMessage(o.default.ACTION_DOWN,r);a.push(l),n.set(u,l)}return a},e.createEmulatedMessage=function(e,t){var r=t.pointerId,n=t.position,i=t.buttons,s=t.pressure;return e===o.default.ACTION_UP&&(s=0),new a.TouchControlMessage(e,r,n,s,i)},e.mapTypeToAction=function(e){return this.EVENT_ACTION_MAP[e]},e.prototype.getTouch=function(t,r,n,i){var o=e.buildTouchOnClient(t,r);if(!o)return null;var a=o.client,s=o.touch,l=[s];if(!n)return this.multiTouchActive=!1,this.multiTouchCenter=void 0,this.multiTouchShift=!1,this.clearCanvas(),l;var d,f=s.position,h=s.action,p=s.buttons,m=f.point,v=f.screenSize,E=v.width,y=v.height,g=m.x,_=m.y;this.multiTouchActive||(i?(this.multiTouchCenter=m,this.multiTouchShift=!0):this.multiTouchCenter=new u.default(a.width/2,a.height/2)),this.multiTouchActive=!0;var S=!1;if(this.multiTouchShift&&this.multiTouchCenter){var C=2*this.multiTouchCenter.x-g,T=2*this.multiTouchCenter.y-_;d=new u.default(C,T),C<=E&&C>=0&&T<=y&&T>=0||(S=!0)}else d=new u.default(a.width-g,a.height-_),S=s.invalid;return d&&l.push({invalid:S,action:h,buttons:p,position:new c.default(d,v)}),l},e.prototype.drawCircle=function(e,t,r){e.beginPath(),e.arc(t.x,t.y,r,0,2*Math.PI,!0),e.stroke()},e.prototype.drawLine=function(t,r){this.ctx&&(this.ctx.save(),this.ctx.strokeStyle=e.STROKE_STYLE,this.ctx.beginPath(),this.ctx.moveTo(t.x,t.y),this.ctx.lineTo(r.x,r.y),this.ctx.stroke(),this.ctx.restore())},e.prototype.drawPoint=function(t,r,n){if(this.ctx){var i=this.ctx.lineWidth;e.pointImagesLoaded&&n?(r=n.width/2,i=0,this.ctx.drawImage(n,t.x-r,t.y-r)):this.drawCircle(this.ctx,t,r);var o=new u.default(t.x-r-i,t.y-r-i),a=new u.default(t.x+r+i,t.y+r+i);this.updateDirty(o,a)}},e.prototype.drawPointer=function(t){this.drawPoint(t,e.touchPointRadius,e.touchPointImage),this.multiTouchCenter&&this.drawLine(this.multiTouchCenter,t)},e.prototype.drawCenter=function(t){this.drawPoint(t,e.centerPointRadius,e.centerPointImage)},e.prototype.updateDirty=function(e,t){if(this.dirtyPlace.length){var r=this.dirtyPlace[0],n=this.dirtyPlace[1],i=new u.default(Math.min(r.x,e.x),Math.min(r.y,e.y)),o=new u.default(Math.max(n.x,t.x),Math.max(n.y,t.y));this.dirtyPlace.length=0,this.dirtyPlace.push(i,o)}else this.dirtyPlace.push(e,t)},e.prototype.clearCanvas=function(){var t=this.tag,r=t.clientWidth,n=t.clientHeight,i=this.ctx;if(i&&this.dirtyPlace.length){var o=this.dirtyPlace[0],a=this.dirtyPlace[1];this.dirtyPlace.length=0;var s=Math.max(o.x,0),u=Math.max(o.y,0),c=Math.min(r,a.x-s),l=Math.min(n,a.y-u);i.clearRect(s,u,c,l),i.strokeStyle=e.STROKE_STYLE}},e.prototype.formatTouchEvent=function(t,r,n){var s="".concat(h,"[formatTouchEvent]"),u=[],c=t.changedTouches;if(c&&c.length)for(var l=0,d=c.length;l<d;l++){var f=c[l],p=e.getPointerId(t.type,f.identifier);if(f.target===this.tag){var m=n.get(p),v={clientX:f.clientX,clientY:f.clientY,type:t.type,buttons:o.default.BUTTON_PRIMARY,target:t.target},E=e.buildTouchOnClient(v,r);if(E){var y=E.touch,g=y.action,_=y.buttons,S=y.position,C=y.invalid,T=1;if(g===o.default.ACTION_UP?T=0:"number"==typeof f.force&&(T=f.force),C)m&&(u.push(e.createEmulatedMessage(o.default.ACTION_UP,m)),n.delete(p));else{var b=new a.TouchControlMessage(g,p,S,T,_);u.push.apply(u,i.__spreadArray([],i.__read(e.validateMessage(t,b,n,"".concat(s,"[validate]"))),!1))}}else console.error(s,"Failed to format touch",f)}}else console.error(s,'No "touches"',t);return u},e.prototype.buildTouchEvent=function(t,r,n){var s=this,u="".concat(h,"[buildTouchEvent]"),c=this.getTouch(t,r,t.ctrlKey,t.shiftKey);if(!c)return[];var l=[],d=[];return this.clearCanvas(),c.forEach((function(r,s){var c=r.action,f=r.buttons,h=r.position,p=n.get(s);if(r.invalid)p&&d.push(p.position.point);else{var m=1;c===o.default.ACTION_UP&&(m=0);var v=new a.TouchControlMessage(c,s,h,m,f);l.push.apply(l,i.__spreadArray([],i.__read(e.validateMessage(t,v,n,"".concat(u,"[validate]"))),!1)),d.push(r.position.point)}})),this.multiTouchActive&&(this.multiTouchCenter&&this.drawCenter(this.multiTouchCenter),d.forEach((function(e){s.drawPointer(e)}))),l.find((function(e){return e.action===o.default.ACTION_UP}))&&n.size&&(console.warn(u,"Looks like one of Multi-touch pointers was not raised up"),n.forEach((function(t){l.push(e.createEmulatedMessage(o.default.ACTION_UP,t))})),n.clear()),l},e.prototype.release=function(){e.unbindListeners(this)},e.SIMULATE_MULTI_TOUCH="SIMULATE_MULTI_TOUCH",e.STROKE_STYLE="#00BEA4",e.EVENT_ACTION_MAP=((n={touchstart:o.default.ACTION_DOWN,touchend:o.default.ACTION_UP,touchmove:o.default.ACTION_MOVE,touchcancel:o.default.ACTION_UP,mousedown:o.default.ACTION_DOWN,mousemove:o.default.ACTION_MOVE,mouseup:o.default.ACTION_UP})[e.SIMULATE_MULTI_TOUCH]=-1,n),e.options=!!f.default.supportsPassive()&&{passive:!1},e.idToPointerMap=new Map,e.pointerToIdMap=new Map,e.touchPointRadius=10,e.centerPointRadius=5,e.pointImagesLoaded=!1,e.eventListeners=new Map,e.onInteractionEvent=function(t){var r=e.eventListeners.get(t.type);r&&r.forEach((function(e){e.onInteraction(t)}))},e.onKeyEvent=function(t){var r=e.eventListeners.get(t.type);r&&r.forEach((function(e){e.onKey(t)}))},e}();t.InteractionHandler=p},6661:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseCanvasBasedPlayer=void 0;var n=r(655),i=r(8515),o=function(e){function t(r,n,i,o,a){void 0===i&&(i="Canvas"),void 0===o&&(o="DummyCanvas"),void 0===a&&(a=t.createElement());var s=e.call(this,r,n,i,o,a)||this;return s.tag=a,s.framesList=[],s.decodedFrames=[],s.videoStats=[],s.drawDecoded=function(){if(s.canvas){if(s.receivedFirstFrame){var e=s.decodedFrames.shift();if(e){var t=e.frame,r=e.width,n=e.height;s.canvas.decode(t,r,n)}}s.decodedFrames.length?s.animationFrameId=requestAnimationFrame(s.drawDecoded):s.animationFrameId=void 0}},s}return n.__extends(t,e),t.hasWebGLSupport=function(){for(var e=document.createElement("canvas"),t=["webgl","experimental-webgl","moz-webgl","webkit-3d"],r=0,n=null;!n&&r++<t.length;)try{n=e.getContext(t[r])}catch(e){n=null}return!!n},t.createElement=function(e){var t=document.createElement("canvas");return"string"==typeof e&&(t.id=e),t.className="video-layer",t},t.prototype.onFrameDecoded=function(e,t,r){if(this.receivedFirstFrame){for(var n=0,i=this.videoSettings.maxFps/10;this.decodedFrames.length>i;){var o=this.decodedFrames.shift();o&&(this.dropFrame(o.frame),n++)}this.decodedFrames.push({width:e,height:t,frame:r}),this.videoStats.push({decodedFrames:1,droppedFrames:n,inputBytes:0,inputFrames:0,timestamp:Date.now()}),this.animationFrameId||(this.animationFrameId=requestAnimationFrame(this.drawDecoded))}},t.prototype.dropFrame=function(e){},t.prototype.shiftFrame=function(){if(this.getState()===i.BasePlayer.STATE.PLAYING){var e=this.framesList.shift();e&&this.decode(e)}},t.prototype.calculateMomentumStats=function(){for(var e=Date.now(),t=e-1e3;this.videoStats.length&&this.videoStats[0].timestamp<t;)this.videoStats.shift();for(;this.inputBytes.length&&this.inputBytes[0].timestamp<t;)this.inputBytes.shift();var r=0,n=0,i=0;this.videoStats.forEach((function(e){r+=e.decodedFrames,n+=e.droppedFrames})),this.inputBytes.forEach((function(e){i+=e.bytes})),this.momentumQualityStats={decodedFrames:r,droppedFrames:n,inputFrames:this.inputBytes.length,inputBytes:i,timestamp:e}},t.prototype.resetStats=function(){e.prototype.resetStats.call(this),this.videoStats=[]},t.prototype.getImageDataURL=function(){return this.tag.toDataURL()},t.prototype.initCanvas=function(e,r){var n=this;if(this.canvas){var i=this.tag.parentNode;if(i){var o=t.createElement(this.tag.id);o.className=this.tag.className,i.replaceChild(o,this.tag),i.appendChild(this.touchableCanvas),this.tag=o}}this.tag.onerror=function(e){console.error("[".concat(n.name,"]"),e)},this.tag.oncontextmenu=function(e){e.preventDefault()},this.tag.width=Math.round(e),this.tag.height=Math.round(r)},t.prototype.play=function(){if(e.prototype.play.call(this),this.getState()===i.BasePlayer.STATE.PLAYING&&this.screenInfo){if(!this.canvas){var t=this.screenInfo.videoSize,r=t.width,n=t.height;this.initCanvas(r,n),this.resetStats()}this.shiftFrame()}},t.prototype.stop=function(){e.prototype.stop.call(this),this.clearState()},t.prototype.setScreenInfo=function(t){e.prototype.setScreenInfo.call(this,t),this.clearState();var r=t.videoSize,n=r.width,i=r.height;this.initCanvas(n,i),this.framesList=[],this.animationFrameId&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=void 0)},t.prototype.pushFrame=function(t){if(e.prototype.pushFrame.call(this,t),i.BasePlayer.isIFrame(t)&&this.videoSettings){var r=this.videoSettings.maxFps;if(this.framesList.length>r/2){var n=this.framesList.length;this.framesList=[],this.videoStats.push({decodedFrames:0,droppedFrames:n,inputBytes:0,inputFrames:0,timestamp:Date.now()})}}this.framesList.push(t),this.shiftFrame()},t.prototype.clearState=function(){this.framesList=[]},t}(i.BasePlayer);t.BaseCanvasBasedPlayer=o},8515:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BasePlayer=void 0;var n=r(655),i=n.__importDefault(r(8442)),o=n.__importDefault(r(7197)),a=n.__importDefault(r(4748)),s=n.__importDefault(r(8626)),u=n.__importDefault(r(8281)),c=r(1069),l=r(8535),d=function(e){function t(r,n,i,o,a){void 0===i&&(i="BasePlayer"),void 0===o&&(o="Dummy"),void 0===a&&(a=document.createElement("div"));var s=e.call(this)||this;s.udid=r,s.displayInfo=n,s.name=i,s.storageKeyPrefix=o,s.tag=a,s.inputBytes=[],s.bounds=null,s.totalStats={decodedFrames:0,droppedFrames:0,inputFrames:0,inputBytes:0,timestamp:0},s.totalStatsCounter=0,s.dirtyStatsWidth=0,s.state=t.STATE.STOPPED,s.showQualityStats=t.DEFAULT_SHOW_QUALITY_STATS,s.receivedFirstFrame=!1,s.statLines=[],s.supportsScreenshot=!1,s.resizeVideoToBounds=!1,s.videoHeight=-1,s.videoWidth=-1,s.updateQualityStats=function(){var e=Date.now(),r=e-1e3;s.calculateMomentumStats(),s.momentumQualityStats&&(s.totalStats.timestamp<r&&(s.totalStats={timestamp:e,decodedFrames:s.totalStats.decodedFrames+s.momentumQualityStats.decodedFrames,droppedFrames:s.totalStats.droppedFrames+s.momentumQualityStats.droppedFrames,inputFrames:s.totalStats.inputFrames+s.momentumQualityStats.inputFrames,inputBytes:s.totalStats.inputBytes+s.momentumQualityStats.inputBytes},0!==s.totalStatsCounter&&(s.perSecondQualityStats={avgDecoded:s.totalStats.decodedFrames/s.totalStatsCounter,avgDropped:s.totalStats.droppedFrames/s.totalStatsCounter,avgInput:s.totalStats.inputFrames/s.totalStatsCounter,avgSize:s.totalStats.inputBytes/s.totalStatsCounter}),s.totalStatsCounter++),s.drawStats(),s.state!==t.STATE.STOPPED&&(s.qualityAnimationId=requestAnimationFrame(s.updateQualityStats)))},s.touchableCanvas=document.createElement("canvas"),s.touchableCanvas.className="touch-layer",s.touchableCanvas.oncontextmenu=function(e){e.preventDefault()};var u=s.getPreferredVideoSetting();return s.videoSettings=t.getVideoSettingFromStorage(u,s.storageKeyPrefix,r,n),s}return n.__extends(t,e),t.isSupported=function(){return!1},t.prototype.calculateScreenInfoForBounds=function(e,t){if(this.videoWidth=e,this.videoHeight=t,this.resizeVideoToBounds){var r=e,n=t;if(this.bounds){var i=this.bounds,u=i.w,c=i.h;if(r>u||n>c){var l,d;c>(l=u>r?n:u*n/r)&&(c=l),u>(d=c==n?r:c*r/n)&&(u=d),r=0|u,n=0|c,this.tag.style.maxWidth="".concat(r,"px"),this.tag.style.maxHeight="".concat(n,"px")}}var f=new o.default(new a.default(0,0,e,t),new s.default(r,n),0);this.emit("input-video-resize",f),this.setScreenInfo(new o.default(new a.default(0,0,r,n),new s.default(r,n),0))}},t.isIFrame=function(e){return e&&e.length>4&&5==(31&e[4])},t.getStorageKey=function(e,t){var r=window.innerHeight,n=window.innerWidth;return"".concat(e,":").concat(t,":").concat(n,"x").concat(r)},t.getFullStorageKey=function(e,t,r){var n=window.innerHeight,i=window.innerWidth,o="".concat(e,":").concat(t,":").concat(i,"x").concat(n);if(r){var a=r.displayId,s=r.size;o="".concat(o,":").concat(a,":").concat(s.width,"x").concat(s.height)}return o},t.getFromStorageCompat=function(e,t,r){var n=this.getStorageKey(e,t),i=window.localStorage.getItem(n);if(!r)return i;var o=r.displayId===l.DisplayInfo.DEFAULT_DISPLAY,a=this.getFullStorageKey(e,t,r),s=window.localStorage.getItem(a);return s?(i&&o&&window.localStorage.removeItem(n),s):o?i:null},t.getFitToScreenFromStorage=function(e,t,r){if(!window.localStorage)return!0;var n="".concat(this.getFullStorageKey(e,t,r),":fit"),i=window.localStorage.getItem(n);if(!i)return!0;try{JSON.parse(i)}catch(e){console.error("[".concat(this.name,"]"),"Failed to parse",i)}return!0},t.getVideoSettingFromStorage=function(e,t,r,n){if(!window.localStorage)return e;var o=this.getFromStorageCompat(t,r,n);if(!o)return e;var u=JSON.parse(o),c=u.displayId,l=u.crop,d=u.bitrate,f=u.iFrameInterval,h=u.sendFrameMeta,p=u.lockedVideoOrientation,m=u.codecOptions,v=u.encoderName,E=isNaN(u.maxFps)?u.frameRate:u.maxFps,y=null;return"object"!=typeof u.bounds||isNaN(u.bounds.width)||isNaN(u.bounds.height)?isNaN(u.maxSize)||(y=new s.default(u.maxSize,u.maxSize)):y=new s.default(u.bounds.width,u.bounds.height),new i.default({displayId:"number"==typeof c?c:0,crop:l?new a.default(l.left,l.top,l.right,l.bottom):e.crop,bitrate:isNaN(d)?e.bitrate:d,bounds:null!==y?y:e.bounds,maxFps:isNaN(E)?e.maxFps:E,iFrameInterval:isNaN(f)?e.iFrameInterval:f,sendFrameMeta:"boolean"==typeof h?h:e.sendFrameMeta,lockedVideoOrientation:isNaN(p)?e.lockedVideoOrientation:p,codecOptions:m,encoderName:v})},t.putVideoSettingsToStorage=function(e,t,r,n,i){if(window.localStorage){var o=this.getFullStorageKey(e,t,i);window.localStorage.setItem(o,JSON.stringify(r));var a="".concat(o,":fit");window.localStorage.setItem(a,JSON.stringify(n))}},t.prototype.createScreenshot=function(e){var t=document.createElement("a");t.href=this.getImageDataURL(),t.download="".concat(e," ").concat((new Date).toLocaleString(),".png"),t.click()},t.prototype.play=function(){this.needScreenInfoBeforePlay()&&!this.screenInfo||(this.state=t.STATE.PLAYING)},t.prototype.pause=function(){this.state=t.STATE.PAUSED},t.prototype.stop=function(){this.state=t.STATE.STOPPED},t.prototype.getState=function(){return this.state},t.prototype.pushFrame=function(e){this.receivedFirstFrame||(this.receivedFirstFrame=!0,"number"!=typeof this.qualityAnimationId&&(this.qualityAnimationId=requestAnimationFrame(this.updateQualityStats))),this.inputBytes.push({timestamp:Date.now(),bytes:e.byteLength})},t.prototype.getTouchableElement=function(){return this.touchableCanvas},t.prototype.setParent=function(e){this.parentElement=e,e.appendChild(this.tag),e.appendChild(this.touchableCanvas)},t.prototype.needScreenInfoBeforePlay=function(){return!0},t.prototype.getVideoSettings=function(){return this.videoSettings},t.prototype.setVideoSettings=function(e,r,n){this.videoSettings=e,n&&t.putVideoSettingsToStorage(this.storageKeyPrefix,this.udid,e,r,this.displayInfo),this.resetStats(),this.emit("video-settings",i.default.copy(e))},t.prototype.getScreenInfo=function(){return this.screenInfo},t.prototype.setScreenInfo=function(e){this.needScreenInfoBeforePlay()&&this.pause(),this.receivedFirstFrame=!1,this.screenInfo=e;var t=e.videoSize,r=t.width,n=t.height;this.touchableCanvas.width=r,this.touchableCanvas.height=n,this.parentElement&&(this.parentElement.style.height="".concat(n,"px"),this.parentElement.style.width="".concat(r,"px"));var i=new s.default(r,n);this.emit("video-view-resize",i)},t.prototype.getName=function(){return this.name},t.prototype.resetStats=function(){this.receivedFirstFrame=!1,this.totalStatsCounter=0,this.totalStats={droppedFrames:0,decodedFrames:0,inputFrames:0,inputBytes:0,timestamp:0},this.perSecondQualityStats={avgDecoded:0,avgDropped:0,avgInput:0,avgSize:0}},t.prototype.drawStats=function(){if(this.showQualityStats&&this.touchableCanvas.getContext("2d")){var e=[];if(this.perSecondQualityStats&&this.momentumQualityStats){var t=this.momentumQualityStats,r=t.decodedFrames,n=t.droppedFrames,i=t.inputBytes,o=t.inputFrames,a=this.perSecondQualityStats,s=a.avgDecoded,c=a.avgDropped,l=a.avgSize,d=a.avgInput,f=o.toString().padStart(3," "),h=r.toString().padStart(3," "),p=n.toString().padStart(3," "),m=s.toFixed(1).padStart(5," "),v=c.toFixed(1).padStart(5," "),E=d.toFixed(1).padStart(5," "),y=u.default.prettyBytes(i).padStart(8," "),g=u.default.prettyBytes(l).padStart(8," ");e.push("Input bytes: ".concat(y," (avg: ").concat(g,"/s)")),e.push("Input   FPS: ".concat(f," (avg: ").concat(E,")")),e.push("Dropped FPS: ".concat(p," (avg: ").concat(v,")")),e.push("Decoded FPS: ".concat(h," (avg: ").concat(m,")"))}else e.push("Not supported");for(var _=this.statLines.length!==e.length,S=0;!_&&S++<e.length;)e[S]!==this.statLines[S]&&(_=!0);_&&(this.statLines=e,this.updateCanvas(!1))}},t.prototype.updateCanvas=function(e){var r=this,n=this.touchableCanvas.getContext("2d");if(n){var i=this.touchableCanvas.height,o=t.STATS_HEIGHT,a=this.statLines.length,s=o/2,u=2*s,c=o*a+s*(a+1);n.clearRect(0,i-c,this.dirtyStatsWidth+u,c),this.dirtyStatsWidth=0,e||(n.save(),n.font="".concat(o,"px monospace"),this.statLines.forEach((function(e){var t=n.measureText(e),i=Math.abs(t.actualBoundingBoxLeft)+Math.abs(t.actualBoundingBoxRight);r.dirtyStatsWidth=Math.max(i,r.dirtyStatsWidth)})),n.fillStyle=t.STAT_BACKGROUND,n.fillRect(0,i-c,this.dirtyStatsWidth+u,c),n.fillStyle=t.STAT_TEXT_COLOR,this.statLines.forEach((function(e,t){n.fillText(e,s,i-s-t*(o+s))})),n.restore())}},t.prototype.setShowQualityStats=function(e){this.showQualityStats=e,e?this.drawStats():this.updateCanvas(!0)},t.prototype.getShowQualityStats=function(){return this.showQualityStats},t.prototype.setBounds=function(e){this.bounds=s.default.copy(e)},t.prototype.getDisplayInfo=function(){return this.displayInfo},t.prototype.setDisplayInfo=function(e){this.displayInfo=e},t.loadVideoSettings=function(e,t){return this.getVideoSettingFromStorage(this.preferredVideoSettings,this.storageKeyPrefix,e,t)},t.getFitToScreenStatus=function(e,t){return this.getFitToScreenFromStorage(this.storageKeyPrefix,e,t)},t.getPreferredVideoSetting=function(){return this.preferredVideoSettings},t.saveVideoSettings=function(e,t,r,n){this.putVideoSettingsToStorage(this.storageKeyPrefix,e,t,r,n)},t.STAT_BACKGROUND="rgba(0, 0, 0, 0.5)",t.STAT_TEXT_COLOR="hsl(24, 85%, 50%)",t.DEFAULT_SHOW_QUALITY_STATS=!1,t.STATE={PLAYING:1,PAUSED:2,STOPPED:3},t.STATS_HEIGHT=12,t.storageKeyPrefix="BaseDecoder",t.playerFullName="BasePlayer",t.playerCodeName="baseplayer",t.preferredVideoSettings=new i.default({lockedVideoOrientation:-1,bitrate:524288,maxFps:24,iFrameInterval:5,bounds:new s.default(480,480),sendFrameMeta:!1}),t}(c.TypedEmitter);t.BasePlayer=d},2583:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BroadwayPlayer=void 0;var n=r(655);r(9503);var i=r(6661),o=n.__importDefault(r(8626)),a=n.__importDefault(r(4755)),s=n.__importDefault(r(8370)),u=n.__importDefault(r(1119)),c=n.__importDefault(r(8442)),l=function(e){function t(r,n,i){void 0===i&&(i=t.playerFullName);var o=e.call(this,r,n,i,t.storageKeyPrefix)||this;return o.supportsScreenshot=!0,o}return n.__extends(t,e),t.isSupported=function(){return"object"==typeof WebAssembly&&"function"==typeof WebAssembly.instantiate},t.prototype.initCanvas=function(t,r){var n=this;e.prototype.initCanvas.call(this,t,r),i.BaseCanvasBasedPlayer.hasWebGLSupport()?this.canvas=new s.default(this.tag,new o.default(t,r)):this.canvas=new a.default(this.tag,new o.default(t,r)),this.avc||(this.avc=new u.default),this.avc.onPictureDecoded=function(e,t,r){n.onFrameDecoded(t,r,e)}},t.prototype.decode=function(e){this.avc&&this.avc.decode(e)},t.prototype.getPreferredVideoSetting=function(){return t.preferredVideoSettings},t.prototype.getFitToScreenStatus=function(){return t.getFitToScreenStatus(this.udid,this.displayInfo)},t.prototype.loadVideoSettings=function(){return t.loadVideoSettings(this.udid,this.displayInfo)},t.storageKeyPrefix="BroadwayDecoder",t.playerFullName="Broadway.js",t.playerCodeName="broadway",t.preferredVideoSettings=new c.default({lockedVideoOrientation:-1,bitrate:524288,maxFps:24,iFrameInterval:5,bounds:new o.default(480,480),sendFrameMeta:!1}),t}(i.BaseCanvasBasedPlayer);t.BroadwayPlayer=l},2728:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MsePlayer=void 0;var n=r(655),i=r(8515),o=n.__importStar(r(754)),a=n.__importDefault(r(8442)),s=n.__importDefault(r(8626)),u=function(e){function t(r,n,i,a){void 0===i&&(i=t.playerFullName),void 0===a&&(a=t.createElement());var s=e.call(this,r,n,i,t.storageKeyPrefix,a)||this;return s.tag=a,s.videoStats=[],s.noDecodedFramesSince=-1,s.currentTimeNotChangedSince=-1,s.bigBufferSince=-1,s.aheadOfBufferSince=-1,s.fpf=t.DEFAULT_FRAMES_PER_FRAGMENT,s.supportsScreenshot=!0,s.waitUntilSegmentRemoved=!1,s.blocks=[],s.frames=[],s.jumpEnd=-1,s.lastTime=-1,s.canPlay=!1,s.seekingSince=-1,s.isSafari=!!window.safari,s.isChrome=navigator.userAgent.includes("Chrome"),s.isMac=navigator.platform.startsWith("Mac"),s.MAX_TIME_TO_RECOVER=200,s.MAX_BUFFER=s.isSafari?2:s.isChrome&&s.isMac?.9:.2,s.MAX_AHEAD=-.2,s.onVideoError=function(e){console.error("[".concat(s.name,"]"),e)},s.onVideoCanPlay=function(){s.onCanPlayHandler()},s.checkVideoResize=function(){if(s.tag){var e=s.tag,t=e.videoHeight,r=e.videoWidth;s.videoHeight===t&&s.videoWidth===r||s.calculateScreenInfoForBounds(r,t)}},s.cleanSourceBuffer=function(){if(s.sourceBuffer&&!(s.sourceBuffer.updating||s.blocks.length<10))try{s.sourceBuffer.removeEventListener("updateend",s.cleanSourceBuffer),s.waitUntilSegmentRemoved=!1;var e=s.blocks[0].start,t=s.blocks[4].end;s.blocks=s.blocks.slice(5),s.sourceBuffer.remove(e,t);for(var r=s.frames.shift();r;){if(!s.checkForIFrame(r)){s.frames.unshift(r);break}r=s.frames.shift()}}catch(e){console.error("[".concat(s.name,"]"),"Failed to clean source buffer")}},s.jumpToEnd=function(){if(s.sourceBuffer&&!s.sourceBuffer.updating&&s.tag.buffered.length){var e=s.tag.buffered.end(s.tag.seekable.length-1);console.log("[".concat(s.name,"]"),"Jumping to the end (".concat(s.jumpEnd,", ").concat(e-s.jumpEnd,").")),s.tag.currentTime=e,s.jumpEnd=-1,s.sourceBuffer.removeEventListener("updateend",s.jumpToEnd)}},a.oncontextmenu=function(e){return e.preventDefault(),!1},a.addEventListener("error",s.onVideoError),a.addEventListener("canplay",s.onVideoCanPlay),(0,o.setLogger)((function(){}),console.error),s}return n.__extends(t,e),t.createElement=function(e){var t=document.createElement("video");return t.muted=!0,t.autoplay=!0,t.setAttribute("muted","muted"),t.setAttribute("autoplay","autoplay"),"string"==typeof e&&(t.id=e),t.className="video-layer",t},t.isSupported=function(){return"undefined"!=typeof MediaSource&&MediaSource.isTypeSupported(o.mimeType)},t.createConverter=function(e,r,n){return void 0===r&&(r=t.DEFAULT_FRAMES_PER_SECOND),void 0===n&&(n=t.DEFAULT_FRAMES_PER_FRAGMENT),new o.default(e,r,n)},t.prototype.getVideoPlaybackQuality=function(){var e=this.tag;if(void 0!==e.mozDecodedFrames)return null;var t=Date.now();if("function"==typeof this.tag.getVideoPlaybackQuality){var r=this.tag.getVideoPlaybackQuality();return{timestamp:t,decodedFrames:r.totalVideoFrames,droppedFrames:r.droppedVideoFrames}}return void 0!==e.webkitDecodedFrameCount?{timestamp:t,decodedFrames:e.webkitDecodedFrameCount,droppedFrames:e.webkitDroppedFrameCount}:null},t.prototype.onCanPlayHandler=function(){this.canPlay=!0,this.tag.play(),this.tag.removeEventListener("canplay",this.onVideoCanPlay),this.checkVideoResize()},t.prototype.calculateMomentumStats=function(){var e=this.getVideoPlaybackQuality();if(e){var t=Date.now(),r=t-1e3;for(this.videoStats.push(e);this.videoStats.length&&this.videoStats[0].timestamp<r;)this.videoStats.shift();for(;this.inputBytes.length&&this.inputBytes[0].timestamp<r;)this.inputBytes.shift();var n=0;this.inputBytes.forEach((function(e){n+=e.bytes}));var i=this.inputBytes.length;if(this.videoStats.length){var o=this.videoStats[0],a=e.decodedFrames-o.decodedFrames,s=e.droppedFrames-o.droppedFrames;this.momentumQualityStats={decodedFrames:a,droppedFrames:s,inputBytes:n,inputFrames:i,timestamp:t}}}},t.prototype.resetStats=function(){e.prototype.resetStats.call(this),this.videoStats=[]},t.prototype.getImageDataURL=function(){var e=document.createElement("canvas");e.width=this.tag.clientWidth,e.height=this.tag.clientHeight;var t=e.getContext("2d");return t&&t.drawImage(this.tag,0,0,e.width,e.height),e.toDataURL()},t.prototype.play=function(){if(e.prototype.play.call(this),this.getState()===i.BasePlayer.STATE.PLAYING){if(!this.converter){var r=t.DEFAULT_FRAMES_PER_SECOND;this.videoSettings&&(r=this.videoSettings.maxFps),this.converter=t.createConverter(this.tag,r,this.fpf),this.canPlay=!1,this.resetStats()}this.converter.play()}},t.prototype.pause=function(){e.prototype.pause.call(this),this.stopConverter()},t.prototype.stop=function(){e.prototype.stop.call(this),this.stopConverter()},t.prototype.setVideoSettings=function(r,n,o){if(this.videoSettings&&this.videoSettings.maxFps!==r.maxFps){var a=this.getState();this.converter&&(this.stop(),this.converter=t.createConverter(this.tag,r.maxFps,this.fpf),this.canPlay=!1),a===i.BasePlayer.STATE.PLAYING&&this.play()}e.prototype.setVideoSettings.call(this,r,n,o)},t.prototype.getPreferredVideoSetting=function(){return t.preferredVideoSettings},t.prototype.pushFrame=function(t){e.prototype.pushFrame.call(this,t),this.checkForIFrame(t)?this.checkForBadState():this.frames.push(t)},t.prototype.checkForBadState=function(){var e=this,t=this.tag.currentTime,r=Date.now(),n=!1;if(this.momentumQualityStats&&(0===this.momentumQualityStats.decodedFrames&&this.momentumQualityStats.inputFrames>0?-1===this.noDecodedFramesSince?this.noDecodedFramesSince=r:r-this.noDecodedFramesSince>this.MAX_TIME_TO_RECOVER&&(n=!0):this.noDecodedFramesSince=-1),t===this.lastTime&&-1===this.currentTimeNotChangedSince?this.currentTimeNotChangedSince=r:this.currentTimeNotChangedSince=-1,this.lastTime=t,this.tag.buffered.length){var i=this.tag.buffered.end(0),o=i-t;if((0|i)-t>this.MAX_BUFFER?-1===this.bigBufferSince?this.bigBufferSince=r:r-this.bigBufferSince>this.MAX_TIME_TO_RECOVER&&(n=!0):this.bigBufferSince=-1,o<this.MAX_AHEAD?-1===this.aheadOfBufferSince?this.aheadOfBufferSince=r:r-this.aheadOfBufferSince>this.MAX_TIME_TO_RECOVER&&(n=!0):this.aheadOfBufferSince=-1,-1!==this.currentTimeNotChangedSince&&r-this.currentTimeNotChangedSince>this.MAX_TIME_TO_RECOVER&&(n=!0),!n)return;var a=0;if(-1!==this.seekingSince&&(a=r-this.seekingSince)<1500)return;var s=function(){e.seekingSince=-1,e.tag.removeEventListener("seeked",s),e.tag.play()};-1!==this.seekingSince&&console.warn("[".concat(this.name,"]"),"Attempt to seek while already seeking! ".concat(a)),this.seekingSince=r,this.tag.addEventListener("seeked",s),this.tag.currentTime=this.tag.buffered.end(0)}},t.prototype.checkForIFrame=function(e){if(!this.converter)return!1;if(this.sourceBuffer=this.converter.sourceBuffer,i.BasePlayer.isIFrame(e)){var t=0,r=0;if(this.tag.buffered&&this.tag.buffered.length&&(t=this.tag.buffered.start(0),r=this.tag.buffered.end(0)),0!==r&&t<r){var n={start:t,end:r};if(this.blocks.push(n),this.blocks.length>10)return this.waitUntilSegmentRemoved=!0,this.sourceBuffer.addEventListener("updateend",this.cleanSourceBuffer),this.converter.appendRawData(e),!0}this.sourceBuffer&&(this.sourceBuffer.onupdateend=this.checkVideoResize)}return!this.waitUntilSegmentRemoved&&(this.converter.appendRawData(e),!0)},t.prototype.stopConverter=function(){this.converter&&(this.converter.appendRawData(new Uint8Array([])),this.converter.pause(),delete this.converter)},t.prototype.getFitToScreenStatus=function(){return t.getFitToScreenStatus(this.udid,this.displayInfo)},t.prototype.loadVideoSettings=function(){return t.loadVideoSettings(this.udid,this.displayInfo)},t.storageKeyPrefix="MseDecoder",t.playerFullName="H264 Converter",t.playerCodeName="mse",t.preferredVideoSettings=new a.default({lockedVideoOrientation:-1,bitrate:7340032,maxFps:60,iFrameInterval:10,bounds:new s.default(720,720),sendFrameMeta:!1}),t.DEFAULT_FRAMES_PER_FRAGMENT=1,t.DEFAULT_FRAMES_PER_SECOND=60,t}(i.BasePlayer);t.MsePlayer=u},9025:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TinyH264Player=void 0;var n=r(655),i=r(6661),o=n.__importDefault(r(6614)),a=n.__importDefault(r(8442)),s=n.__importDefault(r(893)),u=n.__importDefault(r(4557)),c=n.__importDefault(r(8626)),l=function(e){function t(r,n,i){void 0===i&&(i=t.playerFullName);var o=e.call(this,r,n,i,t.storageKeyPrefix)||this;return o.isDecoderReady=!1,o.supportsScreenshot=!0,o.onWorkerMessage=function(e){var t=e.data;switch(t.type){case"pictureReady":var r=t.width,n=t.height,i=t.data;o.onFrameDecoded(r,n,new Uint8Array(i));break;case"decoderReady":o.isDecoderReady=!0;break;default:console.error("[".concat(o.name,"]"),Error('Wrong message type "'.concat(t.type,'"')))}},o}return n.__extends(t,e),t.isSupported=function(){return"object"==typeof WebAssembly&&"function"==typeof WebAssembly.instantiate},t.prototype.initWorker=function(){this.worker=new o.default,this.worker.addEventListener("message",this.onWorkerMessage)},t.prototype.initCanvas=function(t,r){e.prototype.initCanvas.call(this,t,r),i.BaseCanvasBasedPlayer.hasWebGLSupport()?this.canvas=new s.default(this.tag):this.canvas=new u.default(this.tag)},t.prototype.decode=function(e){this.worker&&this.isDecoderReady&&this.worker.postMessage({type:"decode",data:e.buffer,offset:e.byteOffset,length:e.byteLength,renderStateId:t.videoStreamId},[e.buffer])},t.prototype.play=function(){e.prototype.play.call(this),this.worker||this.initWorker()},t.prototype.stop=function(){e.prototype.stop.call(this),this.worker&&(this.worker.removeEventListener("message",this.onWorkerMessage),this.worker.postMessage({type:"release",renderStateId:t.videoStreamId}),delete this.worker)},t.prototype.getPreferredVideoSetting=function(){return t.preferredVideoSettings},t.prototype.clearState=function(){e.prototype.clearState.call(this),this.worker&&(this.worker.postMessage({type:"release",renderStateId:t.videoStreamId}),t.videoStreamId++)},t.prototype.getFitToScreenStatus=function(){return t.getFitToScreenStatus(this.udid,this.displayInfo)},t.prototype.loadVideoSettings=function(){return t.loadVideoSettings(this.udid,this.displayInfo)},t.storageKeyPrefix="Tinyh264Decoder",t.playerFullName="Tiny H264",t.playerCodeName="tinyh264",t.videoStreamId=1,t.preferredVideoSettings=new a.default({lockedVideoOrientation:-1,bitrate:524288,maxFps:24,iFrameInterval:5,bounds:new c.default(480,480),sendFrameMeta:!1}),t}(i.BaseCanvasBasedPlayer);t.TinyH264Player=l},8590:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebCodecsPlayer=void 0;var n=r(655),i=r(6661),o=n.__importDefault(r(8442)),a=n.__importDefault(r(8626)),s=n.__importDefault(r(8395)),u=n.__importDefault(r(1252)),c=n.__importDefault(r(7197)),l=n.__importDefault(r(4748));function d(e){return e.toString(16).padStart(2,"0").toUpperCase()}var f=function(e){function t(r,n,i){void 0===i&&(i=t.playerFullName);var o=e.call(this,r,n,i,t.storageKeyPrefix)||this;o.supportsScreenshot=!0,o.hadIDR=!1,o.bufferedSPS=!1,o.bufferedPPS=!1,o.drawDecoded=function(){if(o.receivedFirstFrame){var e=o.decodedFrames.shift();if(e){var t=e.frame;o.context.drawImage(t,0,0),t.close()}}o.decodedFrames.length?o.animationFrameId=requestAnimationFrame(o.drawDecoded):o.animationFrameId=void 0};var a=o.tag.getContext("2d");if(!a)throw Error("Failed to get 2d context from canvas");return o.context=a,o.decoder=o.createDecoder(),o}return n.__extends(t,e),t.isSupported=function(){return"function"==typeof VideoDecoder&&"function"==typeof VideoDecoder.isConfigSupported},t.parseSPS=function(e){var t=s.default.parseSPS(e),r=t.profile_idc,n=t.constraint_set_flags,i=t.level_idc,o=t.pic_width_in_mbs_minus1,a=t.frame_crop_left_offset,u=t.frame_crop_right_offset,c=t.frame_mbs_only_flag,l=t.pic_height_in_map_units_minus1,f=t.frame_crop_top_offset,h=t.frame_crop_bottom_offset,p=t.sar,m=p[0]/p[1];return{codec:"avc1.".concat([r,n,i].map(d).join("")),width:Math.ceil((16*(o+1)-2*a-2*u)*m),height:(2-c)*(l+1)*16-(c?2:4)*(f+h)}},t.prototype.createDecoder=function(){var e=this;return new VideoDecoder({output:function(t){e.onFrameDecoded(0,0,t)},error:function(t){console.error(t,"code: ".concat(t.code)),e.stop()}})},t.prototype.addToBuffer=function(e){var t;return this.buffer?((t=new Uint8Array(this.buffer.byteLength+e.byteLength)).set(new Uint8Array(this.buffer)),t.set(new Uint8Array(e),this.buffer.byteLength)):t=e,this.buffer=t.buffer,t},t.prototype.scaleCanvas=function(e,t){var r=new a.default(e,t),n=1;this.bounds&&!this.bounds.intersect(r).equals(r)&&(n=Math.min(this.bounds.w/e,this.bounds.h/t));var i=e*n,o=t*n,s=new c.default(new l.default(0,0,e,t),new a.default(i,o),0);this.emit("input-video-resize",s),this.setScreenInfo(s),this.initCanvas(e,t),this.tag.style.transform=1!==n?"scale(".concat(n.toFixed(4),")"):"",this.tag.style.transformOrigin="top left"},t.prototype.decode=function(e){if(e&&!(e.length<4)){var r=31&e[4],n=r===u.default.IDR;if(r===u.default.SPS){var i=t.parseSPS(e.subarray(4)),o=i.codec,a=i.width,s=i.height;this.scaleCanvas(a,s);var c={codec:o,optimizeForLatency:!0};return this.decoder.configure(c),this.bufferedSPS=!0,this.addToBuffer(e),void(this.hadIDR=!1)}if(r===u.default.PPS)return this.bufferedPPS=!0,void this.addToBuffer(e);if(r!==u.default.SEI||this.bufferedSPS&&this.bufferedPPS){var l=this.addToBuffer(e);return this.hadIDR=this.hadIDR||n,l&&"configured"===this.decoder.state&&this.hadIDR?(this.buffer=void 0,this.bufferedPPS=!1,this.bufferedSPS=!1,void this.decoder.decode(new EncodedVideoChunk({type:"key",timestamp:0,data:l.buffer}))):void 0}}},t.prototype.dropFrame=function(e){e.close()},t.prototype.getFitToScreenStatus=function(){return!1},t.prototype.getPreferredVideoSetting=function(){return t.preferredVideoSettings},t.prototype.loadVideoSettings=function(){return t.loadVideoSettings(this.udid,this.displayInfo)},t.prototype.needScreenInfoBeforePlay=function(){return!1},t.prototype.stop=function(){e.prototype.stop.call(this),"configured"===this.decoder.state&&this.decoder.close()},t.storageKeyPrefix="WebCodecsPlayer",t.playerFullName="WebCodecs",t.playerCodeName="webcodecs",t.preferredVideoSettings=new o.default({lockedVideoOrientation:-1,bitrate:524288,maxFps:24,iFrameInterval:5,bounds:new a.default(480,480),sendFrameMeta:!1}),t}(i.BaseCanvasBasedPlayer);t.WebCodecsPlayer=f},8064:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ToolBox=void 0;var r=function(){function e(e){var t=this;this.holder=document.createElement("div"),this.holder.classList.add("control-buttons-list","control-wrapper"),e.forEach((function(e){e.getAllElements().forEach((function(e){t.holder.appendChild(e)}))}))}return e.prototype.getHolderElement=function(){return this.holder},e}();t.ToolBox=r},7398:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ToolBoxButton=void 0;var n=r(655),i=r(9773),o=n.__importDefault(r(9805)),a=function(e){function t(t,r,n){var i=e.call(this,t,n)||this,a=document.createElement("button");return a.classList.add("control-button"),a.title=t,a.appendChild(o.default.create(r)),i.btn=a,i}return n.__extends(t,e),t.prototype.getElement=function(){return this.btn},t.prototype.getAllElements=function(){return[this.btn]},t}(i.ToolBoxElement);t.ToolBoxButton=a},3098:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ToolBoxCheckbox=void 0;var n=r(655),i=r(9773),o=n.__importDefault(r(9805)),a=function(e){function t(t,r,n,i){var a=e.call(this,t,i)||this,s=document.createElement("input");s.type="checkbox";var u,c,l=document.createElement("label");l.title=t,l.classList.add("control-button"),"number"!=typeof r?(u=r.off,c=r.on):u=r,a.imageOff=o.default.create(u),a.imageOff.classList.add("image","image-off"),l.appendChild(a.imageOff),c&&(a.imageOn=o.default.create(c),a.imageOn.classList.add("image","image-on"),l.appendChild(a.imageOn),s.classList.add("two-images"));var d=n||t.toLowerCase().replace(" ","_");return l.htmlFor=s.id="input_".concat(d),a.input=s,a.label=l,a}return n.__extends(t,e),t.prototype.getElement=function(){return this.input},t.prototype.getAllElements=function(){return[this.input,this.label]},t}(i.ToolBoxElement);t.ToolBoxCheckbox=a},9773:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ToolBoxElement=void 0;var r=function(){function e(e,t){var r=this;this.title=e,this.optional=t,this.listeners=new Map,this.onEvent=function(e){var t=r.listeners.get(e.type);if(t){var n=e.type;t.forEach((function(e){e(n,r)}))}}}return e.prototype.addEventListener=function(e,t,r){var n=this.listeners.get(e)||new Set;n.size||this.getElement().addEventListener(e,this.onEvent,r),n.add(t),this.listeners.set(e,n)},e.prototype.removeEventListener=function(e,t){var r=this.listeners.get(e);r&&(r.delete(t),r.size||(this.listeners.delete(e),this.getElement().removeEventListener(e,this.onEvent)))},e}();t.ToolBoxElement=r},9416:(e,t)=>{"use strict";function r(e){if(e instanceof HTMLTemplateElement)return e.innerHTML;if(void 0===e)return"undefined";if(null===e)return"null";var t=document.createElement("dummy");return t.innerText=e.toString(),t.innerHTML}Object.defineProperty(t,"__esModule",{value:!0}),t.html=void 0,t.html=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=document.createElement("template");return i.innerHTML=t.reduce((function(t,n,i){return t+r(n)+e[i+1]}),e[0]).toString(),i}},9805:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Icon=void 0;var n,i=r(655),o=i.__importDefault(r(6615)),a=i.__importDefault(r(7054)),s=i.__importDefault(r(6676)),u=i.__importDefault(r(4996)),c=i.__importDefault(r(1081)),l=i.__importDefault(r(849)),d=i.__importDefault(r(1229)),f=i.__importDefault(r(1439)),h=i.__importDefault(r(4166)),p=i.__importDefault(r(6144)),m=i.__importDefault(r(8666)),v=i.__importDefault(r(1156)),E=i.__importDefault(r(3459)),y=i.__importDefault(r(5563)),g=i.__importDefault(r(3806)),_=i.__importDefault(r(9842)),S=i.__importDefault(r(6031));!function(e){e[e.BACK=0]="BACK",e[e.HOME=1]="HOME",e[e.OVERVIEW=2]="OVERVIEW",e[e.POWER=3]="POWER",e[e.VOLUME_UP=4]="VOLUME_UP",e[e.VOLUME_DOWN=5]="VOLUME_DOWN",e[e.MORE=6]="MORE",e[e.CAMERA=7]="CAMERA",e[e.KEYBOARD=8]="KEYBOARD",e[e.CANCEL=9]="CANCEL",e[e.OFFLINE=10]="OFFLINE",e[e.REFRESH=11]="REFRESH",e[e.SETTINGS=12]="SETTINGS",e[e.MENU=13]="MENU",e[e.ARROW_BACK=14]="ARROW_BACK",e[e.TOGGLE_ON=15]="TOGGLE_ON",e[e.TOGGLE_OFF=16]="TOGGLE_OFF"}(n=t.Icon||(t.Icon={}));var C=function(){function e(){}return e.getSvgString=function(e){switch(e){case n.KEYBOARD:return o.default;case n.MORE:return a.default;case n.CAMERA:return s.default;case n.POWER:return u.default;case n.VOLUME_DOWN:return c.default;case n.VOLUME_UP:return l.default;case n.BACK:return d.default;case n.HOME:return f.default;case n.OVERVIEW:return h.default;case n.CANCEL:return p.default;case n.OFFLINE:return m.default;case n.REFRESH:return v.default;case n.SETTINGS:return E.default;case n.MENU:return y.default;case n.ARROW_BACK:return g.default;case n.TOGGLE_ON:return _.default;case n.TOGGLE_OFF:return S.default;default:return""}},e.create=function(e){var t=document.createElement("div");t.innerHTML=this.getSvgString(e);for(var r=t.children[0],n=r.getElementsByTagName("title"),i=0,o=n.length;i<o;i++)r.removeChild(n[i]);return r},e.Icon=n,e}();t.default=C},483:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ACTION=void 0,(r=t.ACTION||(t.ACTION={})).LIST_HOSTS="list-hosts",r.APPL_DEVICE_LIST="appl-device-list",r.GOOG_DEVICE_LIST="goog-device-list",r.MULTIPLEX="multiplex",r.SHELL="shell",r.PROXY_WS="proxy-ws",r.PROXY_ADB="proxy-adb",r.DEVTOOLS="devtools",r.STREAM_SCRCPY="stream",r.STREAM_WS_QVH="stream-qvh",r.STREAM_MJPEG="stream-mjpeg",r.PROXY_WDA="proxy-wda",r.FILE_LISTING="list-files"},6222:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ChannelCode=void 0,(r=t.ChannelCode||(t.ChannelCode={})).FSLS="FSLS",r.HSTS="HSTS",r.SHEL="SHEL",r.GTRC="GTRC",r.ATRC="ATRC",r.WDAP="WDAP",r.QVHS="QVHS"},7928:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ARGS_STRING=t.SERVER_PROCESS_NAME=t.LOG_LEVEL=t.SERVER_TYPE=t.SERVER_VERSION=t.SERVER_PORT=t.SERVER_PACKAGE=void 0,t.SERVER_PACKAGE="com.genymobile.scrcpy.Server",t.SERVER_PORT=8886,t.SERVER_VERSION="1.19-ws5",t.SERVER_TYPE="web",t.LOG_LEVEL="ERROR";var r=[t.SERVER_VERSION,t.SERVER_TYPE,t.LOG_LEVEL,t.SERVER_PORT,!0];t.SERVER_PROCESS_NAME="app_process",t.ARGS_STRING="/ ".concat(t.SERVER_PACKAGE," ").concat(r.join(" ")," 2>&1 > /dev/null")},7525:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ControlCenterCommand=void 0;var r=function(){function e(){this.id=-1,this.type="",this.pid=0,this.udid="",this.method=""}return e.fromJSON=function(t){var r=JSON.parse(t);if(!r)throw new Error("Invalid input");var n=new e,i=n.data=r.data;switch(n.id=r.id,n.type=r.type,"string"==typeof i.udid&&(n.udid=i.udid),r.type){case this.KILL_SERVER:if("number"!=typeof i.pid&&i.pid<=0)throw new Error('Invalid "pid" value');return n.pid=i.pid,n;case this.REQUEST_WDA:if("string"!=typeof i.method)throw new Error('Invalid "method" value');return n.method=i.method,n.args=i.args,n;case this.START_SERVER:case this.UPDATE_INTERFACES:case this.CONFIGURE_STREAM:case this.RUN_WDA:return n;default:throw new Error('Unknown command "'.concat(r.command,'"'))}},e.prototype.getType=function(){return this.type},e.prototype.getPid=function(){return this.pid},e.prototype.getUdid=function(){return this.udid},e.prototype.getId=function(){return this.id},e.prototype.getMethod=function(){return this.method},e.prototype.getData=function(){return this.data},e.prototype.getArgs=function(){return this.args},e.KILL_SERVER="kill_server",e.START_SERVER="start_server",e.UPDATE_INTERFACES="update_interfaces",e.CONFIGURE_STREAM="configure_stream",e.RUN_WDA="run-wda",e.REQUEST_WDA="request-wda",e}();t.ControlCenterCommand=r},6417:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.DeviceState=void 0,(r=t.DeviceState||(t.DeviceState={})).DEVICE="device",r.DISCONNECTED="disconnected",r.CONNECTED="Connected"},1360:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.MessageType=void 0,(r=t.MessageType||(t.MessageType={})).HOSTS="hosts",r.ERROR="error"},1069:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TypedEmitter=void 0;var n=r(7187),i=function(){function e(){this.emitter=new n.EventEmitter}return e.prototype.addEventListener=function(e,t){this.emitter.on(e,t)},e.prototype.removeEventListener=function(e,t){this.emitter.off(e,t)},e.prototype.dispatchEvent=function(e){return this.emitter.emit(e.type,e)},e.prototype.on=function(e,t){this.emitter.on(e,t)},e.prototype.once=function(e,t){this.emitter.once(e,t)},e.prototype.off=function(e,t){this.emitter.off(e,t)},e.prototype.emit=function(e,t){return this.emitter.emit(e,t)},e}();t.TypedEmitter=i},1974:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CloseEventClass=t.CloseEvent2=void 0;var n=r(655),i=function(e){function t(t,r){var n=void 0===r?{}:r,i=n.code,o=n.reason,a=e.call(this,t)||this;return a.code=i||0,a.reason=o||"",a.wasClean=0===a.code,a}return n.__extends(t,e),t}(r(9399).Event2);t.CloseEvent2=i,t.CloseEventClass="undefined"!=typeof CloseEvent?CloseEvent:i},7595:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorEventClass=t.ErrorEvent2=void 0;var n=r(655),i=function(e){function t(t,r){var n=void 0===r?{}:r,i=n.colno,o=n.error,a=n.filename,s=n.lineno,u=n.message,c=e.call(this,t)||this;return c.error=o,c.colno=i||0,c.filename=a||"",c.lineno=s||0,c.message=u||"",c}return n.__extends(t,e),t}(r(9399).Event2);t.ErrorEvent2=i,t.ErrorEventClass="undefined"!=typeof ErrorEvent?ErrorEvent:i},9399:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventClass=t.Event2=void 0;var n=r(655),i=function(){function e(e,t){void 0===t&&(t={cancelable:!0,bubbles:!0,composed:!1}),this.isTrusted=!0,this.AT_TARGET=0,this.BUBBLING_PHASE=0,this.CAPTURING_PHASE=0,this.NONE=0;var r=n.__assign({},t),i=r.cancelable,o=r.bubbles,a=r.composed;this.cancelable=!!i,this.bubbles=!!o,this.composed=!!a,this.type="".concat(e),this.defaultPrevented=!1,this.timeStamp=Date.now(),this.target=null}return e.prototype.stopImmediatePropagation=function(){},e.prototype.preventDefault=function(){this.defaultPrevented=!0},Object.defineProperty(e.prototype,"currentTarget",{get:function(){return this.target},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"srcElement",{get:function(){return this.target},enumerable:!1,configurable:!0}),e.prototype.composedPath=function(){return this.target?[this.target]:[]},Object.defineProperty(e.prototype,"returnValue",{get:function(){return!this.defaultPrevented},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"eventPhase",{get:function(){return this.target?Event.AT_TARGET:Event.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cancelBubble",{get:function(){return!1},set:function(e){e&&this.stopPropagation()},enumerable:!1,configurable:!0}),e.prototype.stopPropagation=function(){},e.prototype.initEvent=function(e,t,r){this.type=e,arguments.length>1&&(this.bubbles=!!t),arguments.length>2&&(this.cancelable=!!r)},e.NONE=0,e.CAPTURING_PHASE=1,e.AT_TARGET=2,e.BUBBLING_PHASE=3,e}();t.Event2=i,t.EventClass="undefined"!=typeof Event?Event:i},9875:(e,t,r)=>{"use strict";var n=r(8764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.Message=void 0;var i=r(655),o=r(5148),a=i.__importDefault(r(8281)),s=r(1974),u=function(){function e(e,t,r){this.type=e,this.channelId=t,this.data=r}return e.parse=function(t){var r=n.from(t);return new e(r.readUInt8(0),r.readUInt32LE(1),t.slice(5))},e.fromCloseEvent=function(t,r,i){var s=i?a.default.stringToUtf8ByteArray(i):n.alloc(0),u=n.alloc(6+s.byteLength);return u.writeUInt16LE(r,0),s.byteLength&&(u.writeUInt32LE(s.byteLength,2),u.set(s,6)),new e(o.MessageType.CloseChannel,t,u)},e.createBuffer=function(e,t,r){var i=n.alloc(5+(r?r.byteLength:0));return i.writeUInt8(e,0),i.writeUInt32LE(t,1),(null==r?void 0:r.byteLength)&&i.set(n.from(r),5),i},e.prototype.toCloseEvent=function(){var e,t;if(this.data&&this.data.byteLength){var r=n.from(this.data);if(e=r.readUInt16LE(0),r.byteLength>6){var i=r.readUInt32LE(2);t=a.default.utf8ByteArrayToString(r.slice(6,6+i))}}return new s.CloseEventClass("close",{code:e,reason:t,wasClean:1e3===e})},e.prototype.toBuffer=function(){return e.createBuffer(this.type,this.channelId,this.data)},e}();t.Message=u},391:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MessageEventClass=t.MessageEvent2=void 0;var n=r(655),i=function(e){function t(t,r){var i=void 0===r?{}:r,o=i.data,a=void 0===o?null:o,s=i.origin,u=void 0===s?"":s,c=i.lastEventId,l=void 0===c?"":c,d=i.source,f=void 0===d?null:d,h=i.ports,p=void 0===h?[]:h,m=e.call(this,t)||this;return m.data=a,m.origin="".concat(u),m.lastEventId="".concat(l),m.source=f,m.ports=n.__spreadArray([],n.__read(p),!1),m}return n.__extends(t,e),t.prototype.initMessageEvent=function(){throw Error("Deprecated method")},t}(r(9399).Event2);t.MessageEvent2=i,t.MessageEventClass="undefined"!=typeof MessageEvent?MessageEvent:i},5148:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.MessageType=void 0,(r=t.MessageType||(t.MessageType={}))[r.CreateChannel=4]="CreateChannel",r[r.CloseChannel=8]="CloseChannel",r[r.RawBinaryData=16]="RawBinaryData",r[r.RawStringData=32]="RawStringData",r[r.Data=64]="Data"},6572:(e,t,r)=>{"use strict";var n=r(8764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.Multiplexer=void 0;var i=r(655),o=r(1069),a=r(9875),s=r(5148),u=r(9399),c=r(1974),l=r(7595),d=r(391),f=i.__importDefault(r(8281)),h=function(e){function t(r,i,o){void 0===i&&(i=0);var u=e.call(this)||this;u.ws=r,u._id=i,u.CONNECTING=0,u.OPEN=1,u.CLOSING=2,u.CLOSED=3,u.binaryType="blob",u.channels=new Map,u.nextId=0,u.maxId=4294967296,u.storage=[],u.emptyTimerScheduled=!1,u.onclose=null,u.onerror=null,u.onmessage=null,u.onopen=null,u.url="",u.readyState=u.CONNECTING,0===u._id&&(r.binaryType="arraybuffer",u.readyState=u.ws.readyState),u.messageEmitter=o||r;var c=function(e){u.readyState=u.ws.readyState,u.dispatchEvent(e)},h=function(e){u.readyState=u.ws.readyState,u.dispatchEvent(e),u.channels.clear()},p=function(e){u.readyState=u.ws.readyState,u.dispatchEvent(e),u.channels.clear()},m=function(e){var t=e.data,r=a.Message.parse(t);switch(r.type){case s.MessageType.CreateChannel:var i=r.channelId,o=r.data;u.nextId<i&&(u.nextId=i);var c=u._createChannel(i,!1);u.emit("channel",{channel:c,data:o});break;case s.MessageType.RawStringData:var h=u.channels.get(r.channelId);if(h){c=h.channel;var p=new d.MessageEventClass("message",{data:f.default.utf8ByteArrayToString(n.from(r.data)),lastEventId:e.lastEventId,origin:e.origin,source:e.source});c.dispatchEvent(p)}else console.error("Channel with id (".concat(r.channelId,") not found"));break;case s.MessageType.RawBinaryData:var m=u.channels.get(r.channelId);m?(c=m.channel,p=new d.MessageEventClass("message",{data:r.data,lastEventId:e.lastEventId,origin:e.origin,source:e.source}),c.dispatchEvent(p)):console.error("Channel with id (".concat(r.channelId,") not found"));break;case s.MessageType.Data:var v=u.channels.get(r.channelId);if(v){var E=v.emitter;p=new d.MessageEventClass("message",{data:r.data,lastEventId:e.lastEventId,origin:e.origin,source:e.source}),E.dispatchEvent(p)}else console.error("Channel with id (".concat(r.channelId,") not found"));break;case s.MessageType.CloseChannel:var y=u.channels.get(r.channelId);if(y){(c=y.channel).readyState=c.CLOSING;try{c.dispatchEvent(r.toCloseEvent())}finally{c.readyState=c.CLOSED}}else console.error("Channel with id (".concat(r.channelId,") not found"));break;default:var g=new Error("Unsupported message type: ".concat(r.type));u.dispatchEvent(new l.ErrorEventClass("error",{error:g}))}},v=function(){if(u.storage.length){var e=u.ws;e instanceof t?u.storage.forEach((function(t){return e.sendData(t)})):u.storage.forEach((function(t){return e.send(t)})),u.storage.length=0}},E=function(){r.removeEventListener("open",c),r.removeEventListener("error",p),r.removeEventListener("close",h),u.messageEmitter.removeEventListener("message",m),u.off("close",E),u.off("open",v)};return r.addEventListener("open",c),r.addEventListener("error",p),r.addEventListener("close",h),u.messageEmitter.addEventListener("message",m),u.on("close",E),u.on("open",v),u.scheduleEmptyEvent(),u}return i.__extends(t,e),t.wrap=function(e){return new t(e)},Object.defineProperty(t.prototype,"bufferedAmount",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"extensions",{get:function(){return""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"protocol",{get:function(){return""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),t.prototype.scheduleEmptyEvent=function(){var e=this;this.emptyTimerScheduled||(this.emptyTimerScheduled=!0,Promise.resolve().then((function(){e.emptyTimerScheduled&&(e.emptyTimerScheduled=!1,e.emit("empty",e))})))},t.prototype.clearEmptyEvent=function(){this.emptyTimerScheduled&&(this.emptyTimerScheduled=!1)},t.prototype.close=function(e,r){if(void 0===e&&(e=1e3),this.readyState!==this.CLOSED&&this.readyState!==this.CLOSING)if(this._id){this.readyState=this.CLOSING;try{var n=a.Message.fromCloseEvent(this._id,e,r).toBuffer();this.ws instanceof t?this.ws.sendData(n):this.ws.send(n),this.emit("close",new c.CloseEventClass("close",{code:e,reason:r}))}finally{this.readyState=this.CLOSED}}else this.ws.close(e,r)},t.prototype.send=function(e){this.ws instanceof t&&(e="string"==typeof e?a.Message.createBuffer(s.MessageType.RawStringData,this._id,n.from(e)):a.Message.createBuffer(s.MessageType.RawBinaryData,this._id,n.from(e))),this._send(e)},t.prototype.sendData=function(e){this.ws instanceof t&&(e=a.Message.createBuffer(s.MessageType.Data,this._id,n.from(e))),this._send(e)},t.prototype._send=function(e){var r=this.readyState;if(r===this.OPEN)this.ws instanceof t?this.ws.sendData(e):this.ws.send(e);else{if(r!==this.ws.CONNECTING)throw Error("Socket is already in CLOSING or CLOSED state.");this.storage.push(e)}},t.prototype._createChannel=function(e,r){var n=this,i=new o.TypedEmitter,a=new t(this,e,i);return this.channels.set(e,{channel:a,emitter:i}),r?this.readyState===this.OPEN&&f.default.setImmediate((function(){a.readyState=n.OPEN,a.dispatchEvent(new u.EventClass("open"))})):a.readyState=this.readyState,a.addEventListener("close",(function(){n.channels.delete(e),n.channels.size||n.scheduleEmptyEvent()})),this.clearEmptyEvent(),a},t.prototype.createChannel=function(e){if(this.readyState===this.CLOSING||this.readyState===this.CLOSED)throw Error("Incorrect socket state");var t=this.getNextId(),r=this._createChannel(t,!0);return this.sendData(a.Message.createBuffer(s.MessageType.CreateChannel,t,e)),r},t.prototype.getNextId=function(){for(var e=!1;this.channels.has(++this.nextId);)if(this.nextId===this.maxId){if(e)throw Error("No available id");this.nextId=0,e=!0}return this.nextId},t.prototype.dispatchEvent=function(t){return"close"===t.type&&"function"==typeof this.onclose&&Reflect.apply(this.onclose,this,[t]),"open"===t.type&&"function"==typeof this.onopen&&Reflect.apply(this.onopen,this,[t]),"message"===t.type&&"function"==typeof this.onmessage&&Reflect.apply(this.onmessage,this,[t]),"error"===t.type&&"function"==typeof this.onerror&&Reflect.apply(this.onerror,this,[t]),e.prototype.dispatchEvent.call(this,t)},t}(o.TypedEmitter);t.Multiplexer=h},4120:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RemoteDevtoolsCommand=void 0,(t.RemoteDevtoolsCommand||(t.RemoteDevtoolsCommand={})).LIST_DEVTOOLS="list_devtools"},997:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t){this.canvas=e,this.size=t}},9885:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(655).__importDefault(r(8176)),i=function(){function e(e){this.gl=e,this.program=this.gl.createProgram()}return e.prototype.attach=function(e){if(!this.program)throw Error("Program type is ".concat(typeof this.program));if(!e.shader)throw Error("Shader type is ".concat(typeof e.shader));this.gl.attachShader(this.program,e.shader)},e.prototype.link=function(){if(!this.program)throw Error("Program type is ".concat(typeof this.program));this.gl.linkProgram(this.program),(0,n.default)(this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS),"Unable to initialize the shader program.")},e.prototype.use=function(){this.gl.useProgram(this.program)},e.prototype.getAttributeLocation=function(e){if(!this.program)throw Error("Program type is ".concat(typeof this.program));return this.gl.getAttribLocation(this.program,e)},e.prototype.setMatrixUniform=function(e,t){if(!this.program)throw Error("Program type is ".concat(typeof this.program));var r=this.gl.getUniformLocation(this.program,e);this.gl.uniformMatrix4fv(r,!1,t)},e}();t.default=i},5723:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){this.type=e,this.source=t}return e.createFromElementId=function(t){var r=document.getElementById(t);if(!r)throw Error("Could not find shader with ID: "+t);for(var n="",i=r.firstChild;i;)3===i.nodeType&&(n+=i.textContent),i=i.nextSibling;return new e(r.type,n)},e.createFromSource=function(t,r){return new e(t,r)},e}();t.default=r},7936:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(655).__importDefault(r(6327));t.default=function(e,t){if(this.gl=e,this.script=t,"x-shader/x-fragment"===t.type)this.shader=e.createShader(e.FRAGMENT_SHADER);else{if("x-shader/x-vertex"!==t.type)return void(0,n.default)("Unknown shader type: ".concat(t.type));this.shader=e.createShader(e.VERTEX_SHADER)}this.shader?(e.shaderSource(this.shader,t.source),e.compileShader(this.shader),e.getShaderParameter(this.shader,e.COMPILE_STATUS)||(0,n.default)("An error occurred compiling the shaders: "+e.getShaderInfoLog(this.shader))):(0,n.default)("Shader is ".concat(typeof this.shader))}},6453:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(655).__importDefault(r(8176)),i=function(){function e(e,t,r){this.gl=e,this.size=t,this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),this.format=r||e.LUMINANCE,t&&e.texImage2D(e.TEXTURE_2D,0,this.format,t.w,t.h,0,this.format,e.UNSIGNED_BYTE,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),this.textureIDs=[e.TEXTURE0,e.TEXTURE1,e.TEXTURE2]}return e.create=function(t,r){return new e(t,void 0,r)},e.prototype.fill=function(e,t,r,i){if(void 0===r||void 0===i){if(!this.size)return;r=this.size.w,i=this.size.h}var o=this.gl;(0,n.default)(e.length>=r*i,"Texture size mismatch, data:"+e.length+", texture: "+r*i),o.bindTexture(o.TEXTURE_2D,this.texture),t?o.texSubImage2D(o.TEXTURE_2D,0,0,0,r,i,this.format,o.UNSIGNED_BYTE,e):o.texImage2D(o.TEXTURE_2D,0,this.format,r,i,0,this.format,o.UNSIGNED_BYTE,e)},e.prototype.image2dBuffer=function(e,t,r){this.fill(e,!1,t,r)},e.prototype.bind=function(e,t,r){var n=this.gl;t.program&&(n.activeTexture(this.textureIDs[e]),n.bindTexture(n.TEXTURE_2D,this.texture),n.uniform1i(n.getUniformLocation(t.program,r),e))},e}();t.default=i},432:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(655),i=n.__importDefault(r(6453)),o=n.__importDefault(r(6327)),a=r(7438),s=n.__importDefault(r(9885)),u=n.__importDefault(r(7936)),c=r(4544),l=n.__importDefault(r(5723)),d=function(e){function t(t,r,n){var i=e.call(this,t,r)||this;return i.canvas=t,i.size=r,i.canvas.width=r.w,i.canvas.height=r.h,i.onInitWebGL(),i.onInitShaders(),i.initBuffers(),n&&i.initFramebuffer(),i.onInitTextures(),i.initScene(),i}return n.__extends(t,e),t.prototype.initFramebuffer=function(){var e=this.gl;if(e){this.framebuffer=e.createFramebuffer(),e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer),this.framebufferTexture=new i.default(e,this.size,e.RGBA);var t=e.createRenderbuffer();e.bindRenderbuffer(e.RENDERBUFFER,t),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,this.size.w,this.size.h),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.framebufferTexture.texture,0),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t)}else(0,o.default)("gl type is ".concat(typeof e))},t.prototype.initBuffers=function(){var e,t=this.gl;t?(this.quadVPBuffer=t.createBuffer(),this.quadVPBuffer?(t.bindBuffer(t.ARRAY_BUFFER,this.quadVPBuffer),e=[1,1,0,-1,1,0,1,-1,0,-1,-1,0],t.bufferData(t.ARRAY_BUFFER,new Float32Array(e),t.STATIC_DRAW),this.quadVTCBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.quadVTCBuffer),e=[1,0,0,0,1,1,0,1],t.bufferData(t.ARRAY_BUFFER,new Float32Array(e),t.STATIC_DRAW)):(0,o.default)("quadVPBuffer type is ".concat(typeof t))):(0,o.default)("gl type is ".concat(typeof t))},t.prototype.mvIdentity=function(){this.mvMatrix=a.Matrix.I(4)},t.prototype.mvMultiply=function(e){this.mvMatrix=this.mvMatrix.x(e)},t.prototype.mvTranslate=function(e){var t=a.Vector.create;this.mvMultiply(a.Matrix.Translation(t([e[0],e[1],e[2]])).ensure4x4())},t.prototype.setMatrixUniforms=function(){this.program?(this.program.setMatrixUniform("uPMatrix",new Float32Array(this.perspectiveMatrix.flatten())),this.program.setMatrixUniform("uMVMatrix",new Float32Array(this.mvMatrix.flatten()))):(0,o.default)("Program type is ".concat(typeof this.program))},t.prototype.initScene=function(){var e=this.gl;e?(this.perspectiveMatrix=(0,c.makePerspective)(45,1,.1,100),this.mvIdentity(),this.mvTranslate([0,0,-2.4]),e.bindBuffer(e.ARRAY_BUFFER,this.quadVPBuffer),e.vertexAttribPointer(this.vertexPositionAttribute,3,e.FLOAT,!1,0,0),e.bindBuffer(e.ARRAY_BUFFER,this.quadVTCBuffer),e.vertexAttribPointer(this.textureCoordAttribute,2,e.FLOAT,!1,0,0),this.onInitSceneTextures(),this.setMatrixUniforms(),this.framebuffer&&(console.log("Bound Frame Buffer"),e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer))):(0,o.default)("gl type is ".concat(typeof e))},t.prototype.toString=function(){return"WebGLCanvas Size: "+this.size},t.prototype.checkLastError=function(e){if(this.gl&&this.glNames){var t=this.gl.getError();if(t!==this.gl.NO_ERROR){var r=this.glNames[t];r=void 0!==r?r+"("+t+")":"Unknown WebGL ENUM (0x"+t.toString(16)+")",e?console.log("WebGL Error: %s, %s",e,r):console.log("WebGL Error: %s",r),console.trace()}}},t.prototype.onInitWebGL=function(){try{this.gl=this.canvas.getContext("experimental-webgl",{preserveDrawingBuffer:!0})}catch(e){}if(this.gl){if(!this.glNames)for(var e in this.glNames={},this.gl)if(this.gl.hasOwnProperty(e)){var t=this.gl[e];"number"==typeof t&&(this.glNames[t]=e)}}else(0,o.default)("Unable to initialize WebGL. Your browser may not support it.")},t.prototype.onInitShaders=function(){var e=this.gl;e?(this.program=new s.default(e),this.program.attach(new u.default(e,t.vertexShaderScript)),this.program.attach(new u.default(e,t.fragmentShaderScript)),this.program.link(),this.program.use(),this.vertexPositionAttribute=this.program.getAttributeLocation("aVertexPosition"),e.enableVertexAttribArray(this.vertexPositionAttribute),this.textureCoordAttribute=this.program.getAttributeLocation("aTextureCoord"),e.enableVertexAttribArray(this.textureCoordAttribute)):(0,o.default)("gl type is ".concat(typeof e))},t.prototype.onInitTextures=function(){var e=this.gl;e?this.texture=new i.default(e,this.size,e.RGBA):(0,o.default)("gl type is ".concat(typeof e))},t.prototype.onInitSceneTextures=function(){this.texture?this.program?this.texture.bind(0,this.program,"texture"):(0,o.default)("program type is ".concat(typeof this.texture)):(0,o.default)("texture type is ".concat(typeof this.texture))},t.prototype.drawScene=function(){var e=this.gl;e?e.drawArrays(e.TRIANGLE_STRIP,0,4):(0,o.default)("gl type is ".concat(typeof e))},t.prototype.readPixels=function(e){var t=this.gl;t?t.readPixels(0,0,this.size.w,this.size.h,t.RGBA,t.UNSIGNED_BYTE,e):(0,o.default)("gl type is ".concat(typeof t))},t.vertexShaderScript=l.default.createFromSource("x-shader/x-vertex","\n      attribute vec3 aVertexPosition;\n      attribute vec2 aTextureCoord;\n      uniform mat4 uMVMatrix;\n      uniform mat4 uPMatrix;\n      varying highp vec2 vTextureCoord;\n      void main(void) {\n        gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);\n        vTextureCoord = aTextureCoord;\n      }\n    "),t.fragmentShaderScript=l.default.createFromSource("x-shader/x-fragment","\n      precision highp float;\n      varying highp vec2 vTextureCoord;\n      uniform sampler2D texture;\n      void main(void) {\n        gl_FragColor = texture2D(texture, vTextureCoord);\n      }\n    "),t}(n.__importDefault(r(997)).default);t.default=d},4755:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(655),i=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.canvas=t,n.size=r,n.canvasCtx=n.canvas.getContext("2d"),n.canvasBuffer=n.canvasCtx.createImageData(r.w,r.h),n}return n.__extends(t,e),t.prototype.decode=function(e,t,r){if(e){for(var n=t*r,i=n>>2,o=e.subarray(0,n),a=e.subarray(n,n+i),s=e.subarray(n+i,n+2*i),u=0;u<r;u++)for(var c=0;c<t;c++){var l=c+u*t,d=~~(u/2)*~~(t/2)+~~(c/2),f=~~(u/2)*~~(t/2)+~~(c/2),h=1.164*(o[l]-16)+1.596*(s[f]-128),p=1.164*(o[l]-16)-.813*(s[f]-128)-.391*(a[d]-128),m=1.164*(o[l]-16)+2.018*(a[d]-128),v=4*l;this.canvasBuffer.data[v+0]=h,this.canvasBuffer.data[v+1]=p,this.canvasBuffer.data[v+2]=m,this.canvasBuffer.data[v+3]=255}this.canvasCtx.putImageData(this.canvasBuffer,0,0)}},t}(n.__importDefault(r(997)).default);t.default=i},8370:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(655),i=n.__importDefault(r(432)),o=n.__importDefault(r(9885)),a=n.__importDefault(r(7936)),s=n.__importDefault(r(5723)),u=n.__importDefault(r(6453)),c=function(e){function t(t,r){var n=e.call(this,t,r,!1)||this;return n.canvas=t,n.size=r,n}return n.__extends(t,e),t.prototype.onInitShaders=function(){this.gl&&(this.program=new o.default(this.gl),this.program.attach(new a.default(this.gl,t.vertexShaderScript)),this.program.attach(new a.default(this.gl,t.fragmentShaderScript)),this.program.link(),this.program.use(),this.vertexPositionAttribute=this.program.getAttributeLocation("aVertexPosition"),this.gl.enableVertexAttribArray(this.vertexPositionAttribute),this.textureCoordAttribute=this.program.getAttributeLocation("aTextureCoord"),this.gl.enableVertexAttribArray(this.textureCoordAttribute))},t.prototype.onInitTextures=function(){this.gl&&(this.YTexture=new u.default(this.gl,this.size),this.UTexture=new u.default(this.gl,this.size.getHalfSize()),this.VTexture=new u.default(this.gl,this.size.getHalfSize()))},t.prototype.onInitSceneTextures=function(){this.program&&this.YTexture&&this.UTexture&&this.VTexture&&(this.YTexture.bind(0,this.program,"YTexture"),this.UTexture.bind(1,this.program,"UTexture"),this.VTexture.bind(2,this.program,"VTexture"))},t.prototype.fillYUVTextures=function(e,t,r){this.YTexture&&this.UTexture&&this.VTexture&&(this.YTexture.fill(e),this.UTexture.fill(t),this.VTexture.fill(r))},t.prototype.decode=function(e,t,r){if(e&&this.YTexture&&this.UTexture&&this.VTexture){var n=t*r,i=n>>2;this.fillYUVTextures(e.subarray(0,n),e.subarray(n,n+i),e.subarray(n+i,n+2*i)),this.drawScene()}},t.prototype.toString=function(){return"YUVCanvas Size: "+this.size},t.vertexShaderScript=s.default.createFromSource("x-shader/x-vertex","\n      attribute vec3 aVertexPosition;\n      attribute vec2 aTextureCoord;\n      uniform mat4 uMVMatrix;\n      uniform mat4 uPMatrix;\n      varying highp vec2 vTextureCoord;\n      void main(void) {\n        gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);\n        vTextureCoord = aTextureCoord;\n      }\n    "),t.fragmentShaderScript=s.default.createFromSource("x-shader/x-fragment","\n      precision highp float;\n      varying highp vec2 vTextureCoord;\n      uniform sampler2D YTexture;\n      uniform sampler2D UTexture;\n      uniform sampler2D VTexture;\n      const mat4 YUV2RGB = mat4\n      (\n       1.1643828125, 0, 1.59602734375, -.87078515625,\n       1.1643828125, -.39176171875, -.81296875, .52959375,\n       1.1643828125, 2.017234375, 0, -1.081390625,\n       0, 0, 0, 1\n      );\n\n      void main(void) {\n       gl_FragColor = vec4(\n         texture2D(YTexture,  vTextureCoord).x,\n         texture2D(UTexture, vTextureCoord).x,\n         texture2D(VTexture, vTextureCoord).x,\n         1\n       ) * YUV2RGB;\n      }"),t}(i.default);t.default=c},8176:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(655).__importDefault(r(6327));t.default=function(e,t){if(!e)throw(0,n.default)(t),new Error(t)}},6327:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){console.error(e),console.trace()}},4544:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makePerspective=void 0;var n=r(7438),i=n.Matrix.create;n.Matrix.Translation=function(e){var t;if(2===e.elements.length)return(t=n.Matrix.I(3)).elements[2][0]=e.elements[0],t.elements[2][1]=e.elements[1],t;if(3===e.elements.length)return(t=n.Matrix.I(4)).elements[0][3]=e.elements[0],t.elements[1][3]=e.elements[1],t.elements[2][3]=e.elements[2],t;throw Error("Invalid length for Translation")},n.Matrix.prototype.flatten=function(){var e=[];if(0===this.elements.length)return[];for(var t=0;t<this.elements[0].length;t++)for(var r=0;r<this.elements.length;r++)e.push(this.elements[r][t]);return e},n.Matrix.prototype.ensure4x4=function(){if(4===this.elements.length&&4===this.elements[0].length)return this;if(this.elements.length>4||this.elements[0].length>4)return null;for(var e=0;e<this.elements.length;e++)for(var t=this.elements[e].length;t<4;t++)e===t?this.elements[e].push(1):this.elements[e].push(0);for(e=this.elements.length;e<4;e++)0===e?this.elements.push([1,0,0,0]):1===e?this.elements.push([0,1,0,0]):2===e?this.elements.push([0,0,1,0]):3===e&&this.elements.push([0,0,0,1]);return this},n.Vector.prototype.flatten=function(){return this.elements},t.makePerspective=function(e,t,r,n){var o=r*Math.tan(e*Math.PI/360),a=-o;return function(e,t,r,n,o,a){return i([[2*o/(t-e),0,(t+e)/(t-e),0],[0,2*o/(n-r),(n+r)/(n-r),0],[0,0,-(a+o)/(a-o),-2*a*o/(a-o)],[0,0,-1,0]])}(a*t,o*t,a,o,r,n)}},7982:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e){this.canvas=e}},3312:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.compile=function(e,t){var r;if("x-shader/x-fragment"===t.type)r=e.createShader(e.FRAGMENT_SHADER);else{if("x-shader/x-vertex"!==t.type)throw new Error("Unknown shader type: "+t.type);r=e.createShader(e.VERTEX_SHADER)}if(!r)throw new Error("Failed to create shader");if(e.shaderSource(r,t.source),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS))throw new Error("An error occurred compiling the shaders: "+e.getShaderInfoLog(r));return r},e}();t.default=r},3070:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.gl=e,this.program=this.gl.createProgram()}return e.prototype.attach=function(e){if(!this.program)throw Error("Program type is ".concat(typeof this.program));this.gl.attachShader(this.program,e)},e.prototype.link=function(){if(!this.program)throw Error("Program type is ".concat(typeof this.program));this.gl.linkProgram(this.program),this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS)||console.error("Unable to initialize the shader program.")},e.prototype.use=function(){this.gl.useProgram(this.program)},e.prototype.getAttributeLocation=function(e){if(!this.program)throw Error("Program type is ".concat(typeof this.program));return this.gl.getAttribLocation(this.program,e)},e.prototype.getUniformLocation=function(e){if(!this.program)throw Error("Program type is ".concat(typeof this.program));return this.gl.getUniformLocation(this.program,e)},e.prototype.setUniformM4=function(e,t){this.gl.uniformMatrix4fv(e,!1,t)},e}();t.default=r},333:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fragmentYUV=t.vertexQuad=void 0,t.vertexQuad={type:"x-shader/x-vertex",source:"\n  precision mediump float;\n\n  uniform mat4 u_projection;\n  attribute vec2 a_position;\n  attribute vec2 a_texCoord;\n  varying vec2 v_texCoord;\n  void main(){\n      v_texCoord = a_texCoord;\n      gl_Position = u_projection * vec4(a_position, 0.0, 1.0);\n  }\n"},t.fragmentYUV={type:"x-shader/x-fragment",source:"\n  precision lowp float;\n  \n  varying vec2 v_texCoord;\n  \n  uniform sampler2D yTexture;\n  uniform sampler2D uTexture;\n  uniform sampler2D vTexture;\n    \n  const mat4 conversion = mat4(\n    1.0,     0.0,     1.402,  -0.701,\n    1.0,    -0.344,  -0.714,   0.529,\n    1.0,     1.772,   0.0,    -0.886,\n    0.0,     0.0,     0.0,     0.0\n  );\n\n  void main(void) {\n    float yChannel = texture2D(yTexture, v_texCoord).x;\n    float uChannel = texture2D(uTexture, v_texCoord).x;\n    float vChannel = texture2D(vTexture, v_texCoord).x;\n    vec4 channels = vec4(yChannel, uChannel, vChannel, 1.0);\n    vec3 rgb = (channels * conversion).xyz;\n    gl_FragColor = vec4(rgb, 1.0);\n  }\n"}},4557:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(655),i=function(e){function t(t){var r=e.call(this,t)||this;return r.canvasBuffer=null,r.canvasCtx=r.canvas.getContext("2d"),r}return n.__extends(t,e),t.prototype.decode=function(e,t,r){if(e){this.canvasBuffer||(this.canvasBuffer=this.canvasCtx.createImageData(t,r));for(var n=t*r,i=n>>2,o=e.subarray(0,n),a=e.subarray(n,n+i),s=e.subarray(n+i,n+2*i),u=0;u<r;u++)for(var c=0;c<t;c++){var l=c+u*t,d=~~(u/2)*~~(t/2)+~~(c/2),f=~~(u/2)*~~(t/2)+~~(c/2),h=1.164*(o[l]-16)+1.596*(s[f]-128),p=1.164*(o[l]-16)-.813*(s[f]-128)-.391*(a[d]-128),m=1.164*(o[l]-16)+2.018*(a[d]-128),v=4*l;this.canvasBuffer.data[v+0]=h,this.canvasBuffer.data[v+1]=p,this.canvasBuffer.data[v+2]=m,this.canvasBuffer.data[v+3]=255}this.canvasCtx.putImageData(this.canvasBuffer,0,0)}},t}(n.__importDefault(r(7982)).default);t.default=i},4234:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(655),i=n.__importDefault(r(3070)),o=n.__importDefault(r(3312)),a=r(333),s=function(){function e(e,t,r,n){this.gl=e,this.vertexBuffer=t,this.shaderArgs=r,this.program=n}return e.create=function(t){var r=this._initShaders(t),n=this._initShaderArgs(t,r);return new e(t,this._initBuffers(t),n,r)},e._initShaders=function(e){var t=new i.default(e);return t.attach(o.default.compile(e,a.vertexQuad)),t.attach(o.default.compile(e,a.fragmentYUV)),t.link(),t.use(),t},e._initShaderArgs=function(e,t){var r={yTexture:t.getUniformLocation("yTexture"),uTexture:t.getUniformLocation("uTexture"),vTexture:t.getUniformLocation("vTexture"),u_projection:t.getUniformLocation("u_projection"),a_position:t.getAttributeLocation("a_position"),a_texCoord:t.getAttributeLocation("a_texCoord")};return e.enableVertexAttribArray(r.a_position),e.enableVertexAttribArray(r.a_texCoord),r},e._initBuffers=function(e){return e.createBuffer()},e.prototype.setTexture=function(e,t,r){var n=this.gl;n.uniform1i(this.shaderArgs.yTexture,0),n.uniform1i(this.shaderArgs.uTexture,1),n.uniform1i(this.shaderArgs.vTexture,2),n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,e.texture),n.activeTexture(n.TEXTURE1),n.bindTexture(n.TEXTURE_2D,t.texture),n.activeTexture(n.TEXTURE2),n.bindTexture(n.TEXTURE_2D,r.texture)},e.prototype.use=function(){this.program.use()},e.prototype.release=function(){this.gl.useProgram(null)},e.prototype.updateShaderData=function(e,t){var r=e.w,n=e.h;this.gl.viewport(0,0,r,n),this.program.setUniformM4(this.shaderArgs.u_projection,[2/r,0,0,0,0,2/-n,0,0,0,0,1,0,-1,1,0,1]),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vertexBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array([0,0,0,0,r,0,t.maxXTexCoord,0,r,n,t.maxXTexCoord,t.maxYTexCoord,r,n,t.maxXTexCoord,t.maxYTexCoord,0,n,0,t.maxYTexCoord,0,0,0,0]),this.gl.DYNAMIC_DRAW),this.gl.vertexAttribPointer(this.shaderArgs.a_position,2,this.gl.FLOAT,!1,16,0),this.gl.vertexAttribPointer(this.shaderArgs.a_texCoord,2,this.gl.FLOAT,!1,16,8)},e.prototype.draw=function(){var e=this.gl;e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT|e.STENCIL_BUFFER_BIT),e.drawArrays(this.gl.TRIANGLE_STRIP,0,6),e.bindTexture(e.TEXTURE_2D,null)},e}();t.default=s},893:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(655),i=n.__importDefault(r(4234)),o=n.__importDefault(r(6453)),a=function(e){function t(t){var r=e.call(this,t)||this,n=t.getContext("experimental-webgl",{preserveDrawingBuffer:!0});if(!n)throw new Error("Unable to initialize WebGL. Your browser may not support it.");return r.yuvSurfaceShader=i.default.create(n),r.yTexture=o.default.create(n,n.LUMINANCE),r.uTexture=o.default.create(n,n.LUMINANCE),r.vTexture=o.default.create(n,n.LUMINANCE),r}return n.__extends(t,e),t.prototype.decode=function(e,t,r){this.canvas.width=t,this.canvas.height=r;var n=t,i=t/n,o=r/r,a=n*r,s=a>>2,u=e.subarray(0,a),c=e.subarray(a,a+s),l=e.subarray(a+s,a+2*s),d=r>>1,f=n>>1;this.yTexture.image2dBuffer(u,n,r),this.uTexture.image2dBuffer(c,f,d),this.vTexture.image2dBuffer(l,f,d),this.yuvSurfaceShader.setTexture(this.yTexture,this.uTexture,this.vTexture),this.yuvSurfaceShader.updateShaderData({w:t,h:r},{maxXTexCoord:i,maxYTexCoord:o}),this.yuvSurfaceShader.draw()},t}(n.__importDefault(r(7982)).default);t.default=a},655:(e,t,r)=>{"use strict";r.r(t),r.d(t,{__assign:()=>o,__asyncDelegator:()=>S,__asyncGenerator:()=>_,__asyncValues:()=>C,__await:()=>g,__awaiter:()=>l,__classPrivateFieldGet:()=>I,__classPrivateFieldIn:()=>A,__classPrivateFieldSet:()=>D,__createBinding:()=>f,__decorate:()=>s,__exportStar:()=>h,__extends:()=>i,__generator:()=>d,__importDefault:()=>O,__importStar:()=>w,__makeTemplateObject:()=>T,__metadata:()=>c,__param:()=>u,__read:()=>m,__rest:()=>a,__spread:()=>v,__spreadArray:()=>y,__spreadArrays:()=>E,__values:()=>p});var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)};function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var o=function(){return o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},o.apply(this,arguments)};function a(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}function s(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a}function u(e,t){return function(r,n){t(r,n,e)}}function c(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function s(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))}function d(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var f=Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]};function h(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||f(t,e,r)}function p(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function m(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a}function v(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(m(arguments[t]));return e}function E(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n}function y(e,t,r){if(r||2===arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}function g(e){return this instanceof g?(this.v=e,this):new g(e)}function _(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,i=r.apply(e,t||[]),o=[];return n={},a("next"),a("throw"),a("return"),n[Symbol.asyncIterator]=function(){return this},n;function a(e){i[e]&&(n[e]=function(t){return new Promise((function(r,n){o.push([e,t,r,n])>1||s(e,t)}))})}function s(e,t){try{(r=i[e](t)).value instanceof g?Promise.resolve(r.value.v).then(u,c):l(o[0][2],r)}catch(e){l(o[0][3],e)}var r}function u(e){s("next",e)}function c(e){s("throw",e)}function l(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}}function S(e){var t,r;return t={},n("next"),n("throw",(function(e){throw e})),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,i){t[n]=e[n]?function(t){return(r=!r)?{value:g(e[n](t)),done:"return"===n}:i?i(t):t}:i}}function C(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=p(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise((function(n,i){!function(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)}(n,i,(t=e[r](t)).done,t.value)}))}}}function T(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var b=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function w(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&f(t,e,r);return b(t,e),t}function O(e){return e&&e.__esModule?e:{default:e}}function I(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)}function D(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r}function A(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)}},6614:(e,t,r)=>{"use strict";function n(){return new Worker(r.p+"bundle.worker.js")}r.r(t),r.d(t,{default:()=>n})},1119:function(e,t){var r,n;r=function(){var t;!function(){(t=this)||("undefined"!=typeof window?t=window:"undefined"!=typeof self&&(t=self))}();var r=function(r,n){var i,o=void 0!==o?o:{},a={};for(i in o)o.hasOwnProperty(i)&&(a[i]=o[i]);o.arguments=[],o.thisProgram="./this.program",o.quit=function(e,t){throw t},o.preRun=[],o.postRun=[];var s,u,c=!1,l=!1,d=!1,f=!1;if(o.ENVIRONMENT)if("WEB"===o.ENVIRONMENT)c=!0;else if("WORKER"===o.ENVIRONMENT)l=!0;else if("NODE"===o.ENVIRONMENT)d=!0;else{if("SHELL"!==o.ENVIRONMENT)throw new Error("Module['ENVIRONMENT'] value is not valid. must be one of: WEB|WORKER|NODE|SHELL.");f=!0}else c="object"==typeof window,l="function"==typeof importScripts,d="object"==typeof process&&!1,f=!c&&!d&&!l;if(d)o.read=function(e,t){var r;return s||(s=null("fs")),u||(u=null("path")),e=u.normalize(e),r=s.readFileSync(e),t?r:r.toString()},o.readBinary=function(e){var t=o.read(e,!0);return t.buffer||(t=new Uint8Array(t)),g(t.buffer),t},process.argv.length>1&&(o.thisProgram=process.argv[1].replace(/\\/g,"/")),o.arguments=process.argv.slice(2),e.exports=o,process.on("uncaughtException",(function(e){if(!(e instanceof Oe))throw e})),process.on("unhandledRejection",(function(e,t){process.exit(1)})),o.inspect=function(){return"[Emscripten Module object]"};else if(f)"undefined"!=typeof read&&(o.read=function(e){return read(e)}),o.readBinary=function(e){var t;return"function"==typeof readbuffer?new Uint8Array(readbuffer(e)):(g("object"==typeof(t=read(e,"binary"))),t)},"undefined"!=typeof scriptArgs?o.arguments=scriptArgs:void 0!==arguments&&(o.arguments=arguments),"function"==typeof quit&&(o.quit=function(e,t){quit(e)});else{if(!c&&!l)throw new Error("not compiled for this environment");o.read=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},l&&(o.readBinary=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),o.readAsync=function(e,t,r){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=function(){200==n.status||0==n.status&&n.response?t(n.response):r()},n.onerror=r,n.send(null)},o.setWindowTitle=function(e){document.title=e}}for(i in o.print="undefined"!=typeof console?console.log.bind(console):"undefined"!=typeof print?print:null,o.printErr="undefined"!=typeof printErr?printErr:"undefined"!=typeof console&&console.warn.bind(console)||o.print,o.print=o.print,o.printErr=o.printErr,a)a.hasOwnProperty(i)&&(o[i]=a[i]);a=void 0;var h=16;function p(e){g(!P);var t=A;return A=A+e+15&-16,t}function m(e,t){return t||(t=h),Math.ceil(e/t)*t}var v={"f64-rem":function(e,t){return e%t},debugger:function(){}},E=(new Array(0),1024),y=0;function g(e,t){e||Ae("Assertion failed: "+t)}function _(e,t){if(0===t||!e)return"";for(var r,n=0,i=0;n|=r=w[e+i>>0],(0!=r||t)&&(i++,!t||i!=t););t||(t=i);var o="";if(n<128){for(var a,s=1024;t>0;)a=String.fromCharCode.apply(String,w.subarray(e,e+Math.min(t,s))),o=o?o+a:a,e+=s,t-=s;return o}return T(e)}var S="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function C(e,t){for(var r=t;e[r];)++r;if(r-t>16&&e.subarray&&S)return S.decode(e.subarray(t,r));for(var n,i,o,a,s,u="";;){if(!(n=e[t++]))return u;if(128&n)if(i=63&e[t++],192!=(224&n))if(o=63&e[t++],224==(240&n)?n=(15&n)<<12|i<<6|o:(a=63&e[t++],240==(248&n)?n=(7&n)<<18|i<<12|o<<6|a:(s=63&e[t++],n=248==(252&n)?(3&n)<<24|i<<18|o<<12|a<<6|s:(1&n)<<30|i<<24|o<<18|a<<12|s<<6|63&e[t++])),n<65536)u+=String.fromCharCode(n);else{var c=n-65536;u+=String.fromCharCode(55296|c>>10,56320|1023&c)}else u+=String.fromCharCode((31&n)<<6|i);else u+=String.fromCharCode(n)}}function T(e){return C(w,e)}"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le");var b,w,O,I,D,A,P,M,R,N,L,x=65536,B=16777216;function F(e,t){return e%t>0&&(e+=t-e%t),e}function U(e){o.buffer=b=e}function k(){o.HEAP8=new Int8Array(b),o.HEAP16=O=new Int16Array(b),o.HEAP32=I=new Int32Array(b),o.HEAPU8=w=new Uint8Array(b),o.HEAPU16=new Uint16Array(b),o.HEAPU32=new Uint32Array(b),o.HEAPF32=new Float32Array(b),o.HEAPF64=new Float64Array(b)}function K(){Ae("Cannot enlarge memory arrays. Either (1) compile with  -s TOTAL_MEMORY=X  with X higher than the current value "+H+", (2) compile with  -s ALLOW_MEMORY_GROWTH=1  which allows increasing the size at runtime, or (3) if you want malloc to return NULL (0) instead of this abort, compile with  -s ABORTING_MALLOC=0 ")}function Y(){K()}D=A=M=R=N=L=0,P=!1;var V=o.TOTAL_STACK||5242880,H=o.TOTAL_MEMORY||52428800;function G(){return H}if(H<V&&o.printErr("TOTAL_MEMORY should be larger than TOTAL_STACK, was "+H+"! (TOTAL_STACK="+V+")"),o.buffer?b=o.buffer:("object"==typeof WebAssembly&&"function"==typeof WebAssembly.Memory?(o.wasmMemory=new WebAssembly.Memory({initial:H/x,maximum:H/x}),b=o.wasmMemory.buffer):b=new ArrayBuffer(H),o.buffer=b),k(),I[0]=1668509029,O[1]=25459,115!==w[2]||99!==w[3])throw"Runtime error: expected the system to be little-endian!";function W(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var r=t.func;"number"==typeof r?void 0===t.arg?o.dynCall_v(r):o.dynCall_vi(r,t.arg):r(void 0===t.arg?null:t.arg)}else t()}}var j=[],z=[],q=[],X=[],Q=[],$=!1;function Z(){if(o.preRun)for("function"==typeof o.preRun&&(o.preRun=[o.preRun]);o.preRun.length;)ne(o.preRun.shift());W(j)}function J(){$||($=!0,W(z))}function ee(){W(q)}function te(){W(X)}function re(){if(o.postRun)for("function"==typeof o.postRun&&(o.postRun=[o.postRun]);o.postRun.length;)ie(o.postRun.shift());W(Q)}function ne(e){j.unshift(e)}function ie(e){Q.unshift(e)}Math.abs,Math.cos,Math.sin,Math.tan,Math.acos,Math.asin,Math.atan,Math.atan2,Math.exp,Math.log,Math.sqrt,Math.ceil,Math.floor,Math.pow,Math.imul,Math.fround,Math.round,Math.min,Math.max,Math.clz32,Math.trunc;var oe=0,ae=null,se=null;function ue(e){oe++,o.monitorRunDependencies&&o.monitorRunDependencies(oe)}function ce(e){if(oe--,o.monitorRunDependencies&&o.monitorRunDependencies(oe),0==oe&&(null!==ae&&(clearInterval(ae),ae=null),se)){var t=se;se=null,t()}}o.preloadedImages={},o.preloadedAudios={};var le="data:application/octet-stream;base64,";function de(e){return String.prototype.startsWith?e.startsWith(le):0===e.indexOf(le)}function fe(){var e="avc.wast",t="avc.wasm",r="avc.temp.asm.js";"function"==typeof o.locateFile&&(de(e)||(e=o.locateFile(e)),de(t)||(t=o.locateFile(t)),de(r)||(r=o.locateFile(r)));var n={global:null,env:null,asm2wasm:v,parent:o},i=null;function a(){try{if(o.wasmBinary)return new Uint8Array(o.wasmBinary);if(o.readBinary)return o.readBinary(t);throw"on the web, we need the wasm binary to be preloaded and set on Module['wasmBinary']. emcc.py will do that for you when generating HTML (but not JS)"}catch(e){Ae(e)}}function s(e,r,s){if("object"!=typeof WebAssembly)return o.printErr("no native wasm support detected"),!1;if(!(o.wasmMemory instanceof WebAssembly.Memory))return o.printErr("no native wasm Memory in use"),!1;function u(e,t){(i=e.exports).memory&&function(e){var t=o.buffer;e.byteLength<t.byteLength&&o.printErr("the new buffer in mergeMemory is smaller than the previous one. in native wasm, we should grow memory here");var r=new Int8Array(t);new Int8Array(e).set(r),U(e),k()}(i.memory),o.asm=i,o.usingWasm=!0,ce()}if(r.memory=o.wasmMemory,n.global={NaN:NaN,Infinity:1/0},n["global.Math"]=Math,n.env=r,ue(),o.instantiateWasm)try{return o.instantiateWasm(n,u)}catch(e){return o.printErr("Module.instantiateWasm callback failed with error: "+e),!1}function d(e){u(e.instance,e.module)}function f(e){(o.wasmBinary||!c&&!l||"function"!=typeof fetch?new Promise((function(e,t){e(a())})):fetch(t,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+t+"'";return e.arrayBuffer()})).catch((function(){return a()}))).then((function(e){return WebAssembly.instantiate(e,n)})).then(e).catch((function(e){o.printErr("failed to asynchronously prepare wasm: "+e),Ae(e)}))}return o.wasmBinary||"function"!=typeof WebAssembly.instantiateStreaming||de(t)||"function"!=typeof fetch?f(d):WebAssembly.instantiateStreaming(fetch(t,{credentials:"same-origin"}),n).then(d).catch((function(e){o.printErr("wasm streaming compile failed: "+e),o.printErr("falling back to ArrayBuffer instantiation"),f(d)})),{}}o.asmPreload=o.asm;var u=o.reallocBuffer;o.reallocBuffer=function(e){return"asmjs"===d?u(e):function(e){e=F(e,o.usingWasm?x:B);var t=o.buffer.byteLength;if(o.usingWasm)try{return-1!==o.wasmMemory.grow((e-t)/65536)?o.buffer=o.wasmMemory.buffer:null}catch(e){return null}}(e)};var d="";o.asm=function(e,t,r){if(!t.table){var n=o.wasmTableSize;void 0===n&&(n=1024);var i=o.wasmMaxTableSize;"object"==typeof WebAssembly&&"function"==typeof WebAssembly.Table?t.table=void 0!==i?new WebAssembly.Table({initial:n,maximum:i,element:"anyfunc"}):new WebAssembly.Table({initial:n,element:"anyfunc"}):t.table=new Array(n),o.wasmTable=t.table}var a;return t.memoryBase||(t.memoryBase=o.STATIC_BASE),t.tableBase||(t.tableBase=0),g(a=s(0,t),"no binaryen method succeeded."),a}}fe(),A=(D=E)+9888,z.push();var he=9888;o.STATIC_BASE=D,o.STATIC_BUMP=he,A+=16;var pe={varargs:0,get:function(e){return pe.varargs+=4,I[pe.varargs-4>>2]},getStr:function(){return _(pe.get())},get64:function(){var e=pe.get(),t=pe.get();return g(e>=0?0===t:-1===t),e},getZero:function(){g(0===pe.get())}};function me(e,t){pe.varargs=t;try{var r=pe.getStreamFromFD(),n=(pe.get(),pe.get()),i=pe.get(),o=pe.get(),a=n;return FS.llseek(r,a,o),I[i>>2]=r.position,r.getdents&&0===a&&0===o&&(r.getdents=null),0}catch(e){return"undefined"!=typeof FS&&e instanceof FS.ErrnoError||Ae(e),-e.errno}}function ve(e,t){pe.varargs=t;try{var r=pe.get(),n=pe.get(),i=pe.get(),a=0;ve.buffers||(ve.buffers=[null,[],[]],ve.printChar=function(e,t){var r=ve.buffers[e];g(r),0===t||10===t?((1===e?o.print:o.printErr)(C(r,0)),r.length=0):r.push(t)});for(var s=0;s<i;s++){for(var u=I[n+8*s>>2],c=I[n+(8*s+4)>>2],l=0;l<c;l++)ve.printChar(r,w[u+l]);a+=c}return a}catch(e){return"undefined"!=typeof FS&&e instanceof FS.ErrnoError||Ae(e),-e.errno}}function Ee(e,t){pe.varargs=t;try{return 0}catch(e){return"undefined"!=typeof FS&&e instanceof FS.ErrnoError||Ae(e),-e.errno}}function ye(e,t){pe.varargs=t;try{var r=pe.getStreamFromFD();return FS.close(r),0}catch(e){return"undefined"!=typeof FS&&e instanceof FS.ErrnoError||Ae(e),-e.errno}}function ge(){r()}function _e(e,t,r){n(e,t,r)}function Se(e,t,r){return w.set(w.subarray(t,t+r),e),e}function Ce(e){return o.___errno_location&&(I[o.___errno_location()>>2]=e),e}o._broadwayOnHeadersDecoded=ge,o._broadwayOnPictureDecoded=_e,L=p(4),M=R=m(A),N=m(M+V),I[L>>2]=N,P=!0,o.wasmTableSize=10,o.wasmMaxTableSize=10,o.asmGlobalArg={},o.asmLibraryArg={abort:Ae,enlargeMemory:Y,getTotalMemory:G,abortOnCannotGrowMemory:K,___setErrNo:Ce,___syscall140:me,___syscall146:ve,___syscall54:Ee,___syscall6:ye,_broadwayOnHeadersDecoded:ge,_broadwayOnPictureDecoded:_e,_emscripten_memcpy_big:Se,DYNAMICTOP_PTR:L,STACKTOP:R};var Te,be,we=o.asm(o.asmGlobalArg,o.asmLibraryArg,b);function Oe(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function Ie(e){function t(){o.calledRun||(o.calledRun=!0,y||(J(),ee(),o.onRuntimeInitialized&&o.onRuntimeInitialized(),re()))}e=e||o.arguments,oe>0||(Z(),oe>0||o.calledRun||(o.setStatus?(o.setStatus("Running..."),setTimeout((function(){setTimeout((function(){o.setStatus("")}),1),t()}),1)):t()))}function De(e,t){t&&o.noExitRuntime&&0===e||(o.noExitRuntime||(y=!0,R=Te,te(),o.onExit&&o.onExit(e)),d&&process.exit(e),o.quit(e,new Oe(e)))}function Ae(e){throw o.onAbort&&o.onAbort(e),void 0!==e?(o.print(e),o.printErr(e),e=JSON.stringify(e)):e="",y=!0,"abort("+e+"). Build with -s ASSERTIONS=1 for more info."}if(o.asm=we,o._broadwayCreateStream=function(){return o.asm._broadwayCreateStream.apply(null,arguments)},o._broadwayExit=function(){return o.asm._broadwayExit.apply(null,arguments)},o._broadwayGetMajorVersion=function(){return o.asm._broadwayGetMajorVersion.apply(null,arguments)},o._broadwayGetMinorVersion=function(){return o.asm._broadwayGetMinorVersion.apply(null,arguments)},o._broadwayInit=function(){return o.asm._broadwayInit.apply(null,arguments)},o._broadwayPlayStream=function(){return o.asm._broadwayPlayStream.apply(null,arguments)},o.asm=we,Oe.prototype=new Error,Oe.prototype.constructor=Oe,se=function e(){o.calledRun||Ie(),o.calledRun||(se=e)},o.run=Ie,o.exit=De,o.abort=Ae,o.preInit)for("function"==typeof o.preInit&&(o.preInit=[o.preInit]);o.preInit.length>0;)o.preInit.pop()();o.noExitRuntime=!0,Ie(),void 0!==t&&t.Module&&(be=t.Module),void 0!==o&&(be=o),be._broadwayOnHeadersDecoded=r,be._broadwayOnPictureDecoded=n;var Pe,Me=!1,Re=function(){Me=!0,Pe&&Pe(be)};return be.onRuntimeInitialized=function(){Re(be)},function(e){Me?e(be):Pe=e}};return function(){"use strict";var e=function(){return(new Date).getTime()};"undefined"!=typeof performance&&performance.now&&(e=function(){return performance.now()});var n=function(t){var n;this.options=t||{},this.now=e;var i,a,s=function(t,r,a){var s,u=this.pictureBuffers[t];u||(u=this.pictureBuffers[t]=i(t,r*a*3/2));var c=!1;if(this.infoAr.length&&(c=!0,s=this.infoAr),this.infoAr=[],this.options.rgb){n||(n=o(r,a)),n.inp.set(u),n.doit();var l=new Uint8Array(n.outSize);return l.set(n.out),c&&(s[0].finishDecoding=e()),void this.onPictureDecoded(l,r,a,s)}c&&(s[0].finishDecoding=e()),this.onPictureDecoded(u,r,a,s)}.bind(this);this.options.sliceMode&&(s=function(t,r,n,o){var s=this.pictureBuffers[t];s||(s=this.pictureBuffers[t]=i(t,r*n*3/2));var u,c=this.pictureBuffers[o];c||(c=this.pictureBuffers[o]=a(o,18)),this.infoAr.length&&(u=this.infoAr),this.infoAr=[],u[0].finishDecoding=e();for(var l=[],d=0;d<20;++d)l.push(c[d]);u[0].sliceInfoAr=l,this.onPictureDecoded(s,r,n,u)}.bind(this));var u=r.apply({},[function(){},s]),c=1048576,l=this;this.onPictureDecoded=function(e,t,r,n){},this.onDecoderReady=function(){};var d=[];this.decode=function(e,t,r){d.push([e,t,r])},u((function(t){t.HEAP8;var r=t.HEAPU8;t.HEAP16,t.HEAP32,t._broadwayInit(),i=function(e,t){return r.subarray(e,e+t)},a=function(e,t){return new Uint32Array(r.buffer,e,t)},l.streamBuffer=i(t._broadwayCreateStream(c),c),l.pictureBuffers={},l.infoAr=[];var n=0;if(l.options.sliceMode?(n=l.options.sliceNum,l.decode=function(r,i,o){l.infoAr.push(i),i.startDecoding=e();var a,s=i.nals;if(!s){s=[],i.nals=s;var u=r.length,c=!1,d=0,f=0;for(a=0;a<u;++a)if(1===r[a]&&0===r[a-1]&&0===r[a-2]){var h=a-2;0===r[a-3]&&(h=a-3),c&&s.push({offset:d,end:h,type:31&r[f]}),d=h,f=h+3,0===r[a-3]&&(f=h+4),c=!0}c&&s.push({offset:d,end:a,type:31&r[f]})}var p,m=0,v=0;for(a=0;a<s.length;++a)1===s[a].type||5===s[a].type?(m===n&&(p=r.subarray(s[a].offset,s[a].end),l.streamBuffer[v]=0,v+=1,l.streamBuffer.set(p,v),v+=p.length),m+=1):(p=r.subarray(s[a].offset,s[a].end),l.streamBuffer[v]=0,v+=1,l.streamBuffer.set(p,v),v+=p.length,t._broadwayPlayStream(v),v=0);o(),t._broadwayPlayStream(v)}):l.decode=function(r,n){n&&(l.infoAr.push(n),n.startDecoding=e()),l.streamBuffer.set(r),t._broadwayPlayStream(r.length)},d.length){var o=0;for(o=0;o<d.length;++o)l.decode(d[o][0],d[o][1],d[o][2]);d=[]}l.onDecoderReady(l)}))};n.prototype={};var i={},o=function(e,r){var n=e+"x"+r;if(i[n])return i[n];for(var o=e*r,a=(0|o)>>2,s=o+a+a,u=e*r*4,c=s+u+4*Math.pow(2,24),l=Math.pow(2,24),d=l;d<c;)d+=l;var f=new ArrayBuffer(d),h=function(e,t,r){"use asm";var n=e.Math.imul,i=e.Math.min,o=e.Math.max,a=e.Math.pow,s=new e.Uint8Array(r),u=new e.Uint32Array(r),c=new e.Uint8Array(r),l=new e.Uint8Array(r),d=new e.Uint32Array(r),f=0,h=0,p=0,m=0,v=0,E=0,y=0,g=0,_=0,S=0;function C(e,t){e=e|0;t=t|0;var r=0;var i=0;f=e;_=n(e,4)|0;h=t;p=n(f|0,h|0)|0;m=(p|0)>>2;E=n(n(f,h)|0,4)|0;v=p+m|0+m|0;g=0;y=g+E|0;S=y+v|0;i=~~+a(+2,+24);i=n(i,4)|0;for(r=0|0;(r|0)<(i|0)|0;r=r+4|0){d[(S+r|0)>>2]=0}}function T(){var e=0;var t=0;var r=0;var n=0;var i=0;var o=0;var a=0;var s=0;var u=0;var l=0;var v=0;var E=0;var C=0;var T=0;C=g|0;e=y|0;t=e+p|0|0;r=t+m|0;for(u=0;(u|0)<(h|0);u=u+2|0){v=t;E=r;for(l=0;(l|0)<(f|0);l=l+2|0){n=c[e>>0]|0;i=c[(e+f|0)>>0]|0;o=c[t>>0]|0;a=c[r>>0]|0;T=((n<<16|0)+(o<<8|0)|0)+a|0;s=d[(S+T|0)>>2]|0;if(s){}else{s=b(n,o,a)|0;d[(S+T|0)>>2]=s|0}d[C>>2]=s;T=((i<<16|0)+(o<<8|0)|0)+a|0;s=d[(S+T|0)>>2]|0;if(s){}else{s=b(i,o,a)|0;d[(S+T|0)>>2]=s|0}d[(C+_|0)>>2]=s;C=C+4|0;e=e+1|0;n=c[e>>0]|0;i=c[(e+f|0)>>0]|0;T=((n<<16|0)+(o<<8|0)|0)+a|0;s=d[(S+T|0)>>2]|0;if(s){}else{s=b(n,o,a)|0;d[(S+T|0)>>2]=s|0}d[C>>2]=s;T=((i<<16|0)+(o<<8|0)|0)+a|0;s=d[(S+T|0)>>2]|0;if(s){}else{s=b(i,o,a)|0;d[(S+T|0)>>2]=s|0}d[(C+_|0)>>2]=s;C=C+4|0;e=e+1|0;t=t+1|0;r=r+1|0}C=C+_|0;e=e+f|0}}function b(e,t,r){e=e|0;t=t|0;r=r|0;var a=0;var s=0;var u=0;var c=0;var l=0;var d=0;var f=0;var h=0;var p=0;l=n(1192,e-16|0)|0;d=n(1634,r-128|0)|0;f=n(832,r-128|0)|0;h=n(400,t-128|0)|0;p=n(2066,t-128|0)|0;a=(l+d|0)>>10|0;s=((l-f|0)-h|0)>>10|0;u=(l+p|0)>>10|0;if((a&255|0)!=(a|0)|0){a=i(255,o(0,a|0)|0)|0}if((s&255|0)!=(s|0)|0){s=i(255,o(0,s|0)|0)|0}if((u&255|0)!=(u|0)|0){u=i(255,o(0,u|0)|0)|0}c=255;c=c<<8|0;c=c+u|0;c=c<<8|0;c=c+s|0;c=c<<8|0;c=c+a|0;return c|0}return{init:C,doit:T}}(t,{},f);return h.init(e,r),i[n]=h,h.heap=f,h.out=new Uint8Array(f,0,u),h.inp=new Uint8Array(f,u,s),h.outSize=u,h};if("undefined"!=typeof self){var a,s,u,c,l,d,f=!1,h=!1,p=!1,m=0,v=0,E=0,y=0,g=[],_=[],S=function(e){if(_.length){for(var t=_.shift();t&&t.byteLength!==e;)t=_.shift();if(t)return t}return new ArrayBuffer(e)},C=function(e,t,r,n,i){var o=function(r,i){var o=0;for(o=0;o<16;++o){var a=r+n*o,s=i+n*o;t.set(e.subarray(a,s),a)}},a=function(r,i){var o=0;for(o=0;o<8;++o){var a=r+n/2*o,s=i+n/2*o;t.set(e.subarray(a,s),a)}},s=function(r,n){t.set(e.subarray(r,n),r)},u=r[0],c=r[1];c>0&&(o(u,c),a(r[2],r[3]),a(r[4],r[5])),u=r[6],(c=r[7])>0&&(o(u,c),a(r[8],r[9]),a(r[10],r[11])),u=r[12],(c=r[15])>0&&(s(u,c),s(r[13],r[16]),s(r[14],r[17]))},T=function(e){E=(v=e)-1};self.addEventListener("message",(function(t){if(f){if(h&&t.data.reuse&&_.push(t.data.reuse),t.data.buf)return void(p&&0!==y?g.push(t.data):a.decode(new Uint8Array(t.data.buf,t.data.offset||0,t.data.length),t.data.info,(function(){p&&m!==E&&postMessage(t.data,[t.data.buf])})));if(t.data.slice){var r=e();if(C(new Uint8Array(t.data.slice),u,t.data.infos[0].sliceInfoAr,t.data.width,t.data.height),t.data.theOne&&(C(u,new Uint8Array(t.data.slice),s,t.data.width,t.data.height),d>t.data.infos[0].timeDecoding&&(t.data.infos[0].timeDecoding=d),t.data.infos[0].timeCopy+=e()-r),postMessage(t.data,[t.data.slice]),0==(y-=1)&&g.length){var i=g.shift();a.decode(new Uint8Array(i.buf,i.offset||0,i.length),i.info,(function(){p&&m!==E&&postMessage(i,[i.buf])}))}return}if(t.data.setSliceCnt)return void T(t.data.sliceCnt)}else t.data&&"Broadway.js - Worker init"===t.data.type&&(f=!0,a=new n(t.data.options),t.data.options.sliceMode?(h=!0,p=!0,m=t.data.options.sliceNum,T(t.data.options.sliceCnt),a.onPictureDecoded=function(e,t,r,n){var i=new Uint8Array(S(e.length));C(e,i,n[0].sliceInfoAr,t),c=n[0].startDecoding,l=n[0].finishDecoding,d=l-c,n[0].timeDecoding=d,n[0].timeCopy=0,postMessage({slice:i.buffer,sliceNum:m,width:t,height:r,infos:n},[i.buffer]),y=v-1,u=e,s=n[0].sliceInfoAr}):t.data.options.reuseMemory?(h=!0,a.onPictureDecoded=function(e,t,r,n){var i=new Uint8Array(S(e.length));i.set(e,0,e.length),postMessage({buf:i.buffer,length:e.length,width:t,height:r,infos:n},[i.buffer])}):a.onPictureDecoded=function(e,t,r,n){e&&(e=new Uint8Array(e));var i=new Uint8Array(e.length);i.set(e,0,e.length),postMessage({buf:i.buffer,length:e.length,width:t,height:r,infos:n},[i.buffer])},postMessage({consoleLog:"broadway worker initialized"}))}),!1)}return n.nowValue=e,n}()},void 0===(n=r.apply(t,[]))||(e.exports=n)},4565:e=>{"use strict";e.exports=fs}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,r),o.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;r.g.importScripts&&(e=r.g.location+"");var t=r.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");n.length&&(e=n[n.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=e})(),(()=>{"use strict";var e=r(655);r(8507);var t=r(3247),n=r(3560);window.onload=function(){return e.__awaiter(this,void 0,void 0,(function(){var i,o,a,s,u,c,l,d,f,h,p,m,v;return e.__generator(this,(function(E){switch(E.label){case 0:return i=location.hash.replace(/^#!/,""),o=new URLSearchParams(i),a=o.get("action"),[4,Promise.resolve().then((function(){return e.__importStar(r(2583))}))];case 1:return s=E.sent().BroadwayPlayer,t.StreamClientScrcpy.registerPlayer(s),[4,Promise.resolve().then((function(){return e.__importStar(r(2728))}))];case 2:return u=E.sent().MsePlayer,t.StreamClientScrcpy.registerPlayer(u),[4,Promise.resolve().then((function(){return e.__importStar(r(9025))}))];case 3:return c=E.sent().TinyH264Player,t.StreamClientScrcpy.registerPlayer(c),[4,Promise.resolve().then((function(){return e.__importStar(r(8590))}))];case 4:return l=E.sent().WebCodecsPlayer,t.StreamClientScrcpy.registerPlayer(l),d=new URLSearchParams("action=stream&udid=cf97db96&player=broadway&ws=ws%3A%2F%2Flocalhost%3A8000%2F%3Faction%3Dproxy-adb%26remote%3Dtcp%253A8886%26udid%3Dcf97db96"),t.StreamClientScrcpy.start(d),[2];case 5:return h=E.sent().ShellClient,a===h.ACTION&&"string"==typeof o.get("udid")?(h.start(h.parseParameters(o)),[2]):(f.push(h),[4,Promise.resolve().then((function(){return e.__importStar(r(2984))}))]);case 6:return p=E.sent().DevtoolsClient,a===p.ACTION?(p.start(p.parseParameters(o)),[2]):(f.push(p),[4,Promise.resolve().then((function(){return e.__importStar(r(5220))}))]);case 7:return m=E.sent().FileListingClient,a===m.ACTION?(m.start(m.parseParameters(o)),[2]):(f.push(m),f.length?[4,Promise.resolve().then((function(){return e.__importStar(r(8930))}))]:[3,9]);case 8:v=E.sent().DeviceTracker,f.forEach((function(e){v.registerTool(e)})),E.label=9;case 9:return n.HostTracker.start(),[2]}}))}))}})()})();